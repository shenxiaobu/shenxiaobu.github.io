<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>祥你的365夜</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="https://shenxiaobu.github.io/"/>
  <updated>2020-03-28T07:52:15.564Z</updated>
  <id>https://shenxiaobu.github.io/</id>
  
  <author>
    <name>shenxiaobu</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>一步一步完成个vue项目</title>
    <link href="https://shenxiaobu.github.io/2020/03/24/%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E5%AE%8C%E6%88%90%E4%B8%AAvue%E9%A1%B9%E7%9B%AE/"/>
    <id>https://shenxiaobu.github.io/2020/03/24/一步一步完成个vue项目/</id>
    <published>2020-03-24T03:11:19.000Z</published>
    <updated>2020-03-28T07:52:15.564Z</updated>
    
    <content type="html"><![CDATA[<h3 id="一步一步完成个vue项目"><a href="#一步一步完成个vue项目" class="headerlink" title="一步一步完成个vue项目"></a>一步一步完成个vue项目</h3><p>环境： git  node</p><ol><li>安装vue脚手架  </li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -g @vue/cli-service-global</span><br></pre></td></tr></table></figure><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">vue -V   </span><br><span class="line">@vue/cli 4.2.3</span><br></pre></td></tr></table></figure><p>跳出版本号 即表示安装成功</p><ol start="2"><li>创建一个项目  vue-study</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue create -d vue-study</span><br></pre></td></tr></table></figure><p>-d 表示按默认配置创建一个项目</p><ol start="3"><li>执行vue ui 使用可视化界面控制项目并安装所需依赖</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vue ui</span><br></pre></td></tr></table></figure><p>浏览器就会跳出项目可视化界面，可自行导入项目</p><p><img src="/2020/03/24/一步一步完成个vue项目/image-20200324111811682.png" alt="image-20200324111811682"></p><p>点击依赖展开的界面就可以查看项目已安装的依赖，未安装的依赖也可以在这进行安装</p><p>安装了vue全家桶  vuex、vue-router、axios、qs</p><p><img src="/2020/03/24/一步一步完成个vue项目/image-20200324112056441.png" alt="image-20200324112056441"></p><p>点击运行既可以将项目跑起来也可以执行命令</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run serve</span><br></pre></td></tr></table></figure><p>点击输出 就能看到本地链接，点击链接就能看到项目</p><p><img src="/2020/03/24/一步一步完成个vue项目/image-20200324112220752.png" alt="image-20200324112220752"></p><ol start="4"><li>在vscode编辑器上打开该文件，目录展示如下</li></ol><p><img src="/2020/03/24/一步一步完成个vue项目/image-20200324112411006.png" alt="image-20200324112411006"></p><p>可见目录与我们想要的目录还是不够的</p><ol start="5"><li>将目录建成如下结构</li></ol><blockquote><p>src        //源代码</p><blockquote><p>api       //所有请求</p><p>assets  //主题 字体等静态资源</p><p>components      //全局公用组件</p><p>directive          //全局指令</p><p>filters    //全局过滤器</p><p>icons    //项目所有svg icons</p><p>lang    //国际化 language    非必须</p><p>mock    //项目mock模拟数据 非必须</p><p>router    //路由</p><p>store   //全局store 管理</p><p>styles   //全局样式</p><p>utils    //全局公用方法</p><p>vendor     //公用vendor  非必须</p><p>views   //view</p><p>App.vue  //入口页面</p><p>main.js   //入口加载组件初始化</p><p>permission.js   //权限管理       非必须</p></blockquote><p>static</p><blockquote><p>Tinymce        //富文本</p></blockquote><p>public</p><blockquote><p>favicon.ico     //favicon图标</p><p>index.html     //html模板</p></blockquote><p>babel.config.js       //babel-loader 配置</p><p>eslintrc.js         //eslint配置项</p><p>.gitignore      //git忽略项</p><p>package.json      //package.json</p><p>README.md     //使用说明书</p><p>vue.config.js      //配置文件</p></blockquote><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//默认vue.config.js 文件内容</span></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;&#125;</span><br></pre></td></tr></table></figure><p>因为使用了webpack，但是没安装，所以会报错，解决办法就是安装开发依赖compression-webpack-plugin</p><p><img src="/2020/03/24/一步一步完成个vue项目/image-20200324130540195.png" alt="image-20200324130540195"></p><p>修改main.js</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App.vue'</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router/index'</span> <span class="comment">// 全局 路由 配置</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'./store/index'</span> <span class="comment">//   全局 状态 配置</span></span><br><span class="line"></span><br><span class="line">Vue.prototype.$bus = <span class="keyword">new</span> Vue()          <span class="comment">//$bug</span></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  render: <span class="function"><span class="params">h</span> =&gt;</span> h(App),</span><br><span class="line">&#125;).$mount(<span class="string">'#app'</span>)</span><br></pre></td></tr></table></figure><p>在router和store文件夹下创建index.js文件，在view文件夹下创建index.vue文件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//router/index.js</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> VueRouter <span class="keyword">from</span> <span class="string">'vue-router'</span></span><br><span class="line">Vue.use(VueRouter)</span><br><span class="line"><span class="comment">//引入组件的第一种方式</span></span><br><span class="line"><span class="comment">//import index from '../views/index.vue'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//引入组件的第二种方式  这种方式为懒加载模式，加载到该页面时才会加载</span></span><br><span class="line"><span class="comment">//const index = () =&gt; import('../views/index.vue')</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//引入组件的第三种方式  这种方式也是懒加载模式</span></span><br><span class="line"><span class="keyword">const</span> index =  <span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">require</span>([<span class="string">'../views/index.vue'</span>], resolve)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> VueRouter(&#123;</span><br><span class="line">    mode: <span class="string">'hash'</span>,</span><br><span class="line">    routers: [</span><br><span class="line">        &#123;</span><br><span class="line">            path: <span class="string">'/'</span>,</span><br><span class="line">            redirect: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> &#123; <span class="attr">name</span>: <span class="string">'index'</span> &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            path: <span class="string">'/index'</span>,</span><br><span class="line">            name: <span class="string">'index'</span>,</span><br><span class="line">            component: index, <span class="comment">// 登录页</span></span><br><span class="line">        &#125;,</span><br><span class="line">    ]</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure><p><strong>上面这个是错误的，字段是 routes  不是 routers    注意了,就这个错误搞得我怀疑人生。切记改正</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--view/index.vue--&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;index&quot;&gt;首页&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//store/index.js</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"><span class="keyword">const</span> VueX = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">    state:&#123;&#125;,</span><br><span class="line">    mutations:&#123;&#125;,</span><br><span class="line">    actions: &#123;&#125;,</span><br><span class="line">  modules: &#123;&#125;,</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> VueX</span><br></pre></td></tr></table></figure><p>修改完后运行界面展示如下</p><p><img src="/2020/03/24/一步一步完成个vue项目/image-20200328133738665.png" alt="image-20200328133738665"></p><h3 id="接下来一步一步配置vue-config-js"><a href="#接下来一步一步配置vue-config-js" class="headerlink" title="接下来一步一步配置vue.config.js"></a>接下来一步一步配置vue.config.js</h3><h4 id="先配置别名吧alias"><a href="#先配置别名吧alias" class="headerlink" title="先配置别名吧alias"></a>先配置别名吧alias</h4><p><img src="/2020/03/24/一步一步完成个vue项目/image-20200328153142287.png" alt="image-20200328153142287"></p><p><a href="https://shenxiaobu.github.io/2019/03/13/webpack%E4%BD%BF%E7%94%A8%EF%BC%88%E4%BA%8C%EF%BC%89/">webpack使用二</a></p><p>这样就理解了alias的作用了</p><p>接下来配置</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//vue.config.js 文件</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//引入path模块  下面用到了  path.resolve()  至于 __dirname node知识自行百度</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="built_in">console</span>.log(__dirname)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    configureWebpack: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">        <span class="built_in">Object</span>.assign(config, &#123;</span><br><span class="line">            resolve: &#123;</span><br><span class="line">                alias: &#123;</span><br><span class="line">                <span class="string">'~'</span>: path.resolve(__dirname, <span class="string">'./src'</span>),</span><br><span class="line">                <span class="string">'~views'</span>: path.resolve(__dirname, <span class="string">'./src/views'</span>),</span><br><span class="line">                &#125; <span class="comment">// 别名配置</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">__dirname   Node.js 中，__dirname 总是指向被执行 js 文件的绝对路径，所以当你在 /d1/d2/myscript.js 文件中写了 __dirname， 它的值就是 /d1/d2 。</span><br><span class="line"></span><br><span class="line">相反，./ 会返回你执行 node 命令的路径，例如你的工作路径。</span><br><span class="line"></span><br><span class="line">有一个特殊情况是在 require() 中使用 ./ 时，这时的路径就会是含有 require() 的脚本文件的相对路径。</span><br></pre></td></tr></table></figure><p><a href="https://blog.csdn.net/zsensei/article/details/79094714" target="_blank" rel="noopener">Node.js 中 __dirname 和 ./ 的区别</a></p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用上述配置的时候，路由上的路径就可以改为  此时 遇到 ~ 就替换为 ./src</span></span><br><span class="line"><span class="keyword">const</span> index =  <span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">require</span>([<span class="string">'~/views/index.vue'</span>], resolve)</span><br><span class="line"><span class="comment">//或   此时 遇到 ~views 就替换为 ./src/views</span></span><br><span class="line"><span class="keyword">const</span> index =  <span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">require</span>([<span class="string">'~views/index.vue'</span>], resolve)</span><br></pre></td></tr></table></figure><p>“~”这个是随意配的，一般是采用 @  但是喜新厌旧，用腻了，就采用 ~。</p><p>打球去了，配置会一步一步接下去的。2020.03.28 15:51</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;一步一步完成个vue项目&quot;&gt;&lt;a href=&quot;#一步一步完成个vue项目&quot; class=&quot;headerlink&quot; title=&quot;一步一步完成个vue项目&quot;&gt;&lt;/a&gt;一步一步完成个vue项目&lt;/h3&gt;&lt;p&gt;环境： git  node&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;安装v
      
    
    </summary>
    
    
      <category term="-vue -vue/cli" scheme="https://shenxiaobu.github.io/tags/vue-vue-cli/"/>
    
  </entry>
  
  <entry>
    <title>vue-cli3项目的webpack配置</title>
    <link href="https://shenxiaobu.github.io/2020/03/23/vue-cli3%E9%A1%B9%E7%9B%AE%E7%9A%84webpack%E9%85%8D%E7%BD%AE/"/>
    <id>https://shenxiaobu.github.io/2020/03/23/vue-cli3项目的webpack配置/</id>
    <published>2020-03-23T12:47:39.000Z</published>
    <updated>2020-03-23T13:03:12.197Z</updated>
    
    <content type="html"><![CDATA[<h1 id="vue-cli3搭建完整项目之webpack配置"><a href="#vue-cli3搭建完整项目之webpack配置" class="headerlink" title="vue-cli3搭建完整项目之webpack配置"></a>vue-cli3搭建完整项目之webpack配置</h1><p>前面篇介绍了项目初始化，下面就要开始对项目webpack进行配置，由于vue-cli3将webpack的基础配置全部内嵌了，这就导致我们初始化项目完成之后发现原先的webpack的config配置全部都消失不见了，那该怎么办呢？别慌，vue-cli3早就考虑到了这一点，它预留了一个vue.config.js的js文件供我们对webpack进行自定义配置。</p><p>vue.config.js官方配置指南</p><p>一、在项目根目录下新建vue.config.js文件与package.json同级<br>    下面是我的vue.config.js文件,里面有详细的注释，这里不再赘述</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  publicPath: <span class="string">'./'</span>, <span class="comment">// 基本路径</span></span><br><span class="line">  outputDir: <span class="string">'dist'</span>, <span class="comment">// 输出文件目录</span></span><br><span class="line">  lintOnSave: <span class="literal">false</span>, <span class="comment">// eslint-loader 是否在保存的时候检查</span></span><br><span class="line">  <span class="comment">// see https://github.com/vuejs/vue-cli/blob/dev/docs/webpack.md</span></span><br><span class="line">  <span class="comment">// webpack配置</span></span><br><span class="line">  chainWebpack: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">  &#125;,</span><br><span class="line">  configureWebpack: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">'production'</span>) &#123;</span><br><span class="line">      <span class="comment">// 为生产环境修改配置...</span></span><br><span class="line">      config.mode = <span class="string">'production'</span></span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 为开发环境修改配置...</span></span><br><span class="line">      config.mode = <span class="string">'development'</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">Object</span>.assign(config, &#123;</span><br><span class="line">      <span class="comment">// 开发生产共同配置</span></span><br><span class="line">      resolve: &#123;</span><br><span class="line">        alias: &#123;</span><br><span class="line">          <span class="string">'@'</span>: path.resolve(__dirname, <span class="string">'./src'</span>),</span><br><span class="line">          <span class="string">'@c'</span>: path.resolve(__dirname, <span class="string">'./src/components'</span>),</span><br><span class="line">          <span class="string">'@p'</span>: path.resolve(__dirname, <span class="string">'./src/pages'</span>)</span><br><span class="line">        &#125; <span class="comment">// 别名配置</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;,</span><br><span class="line">  productionSourceMap: <span class="literal">false</span>, <span class="comment">// 生产环境是否生成 sourceMap 文件</span></span><br><span class="line">  <span class="comment">// css相关配置</span></span><br><span class="line">  css: &#123;</span><br><span class="line">    extract: <span class="literal">true</span>, <span class="comment">// 是否使用css分离插件 ExtractTextPlugin</span></span><br><span class="line">    sourceMap: <span class="literal">false</span>, <span class="comment">// 开启 CSS source maps?</span></span><br><span class="line">    loaderOptions: &#123;</span><br><span class="line">      css: &#123;&#125;, <span class="comment">// 这里的选项会传递给 css-loader</span></span><br><span class="line">      postcss: &#123;&#125; <span class="comment">// 这里的选项会传递给 postcss-loader</span></span><br><span class="line">    &#125;, <span class="comment">// css预设器配置项 详见https://cli.vuejs.org/zh/config/#css-loaderoptions</span></span><br><span class="line">    modules: <span class="literal">false</span> <span class="comment">// 启用 CSS modules for all css / pre-processor files.</span></span><br><span class="line">  &#125;,</span><br><span class="line">  parallel: <span class="built_in">require</span>(<span class="string">'os'</span>).cpus().length &gt; <span class="number">1</span>, <span class="comment">// 是否为 Babel 或 TypeScript 使用 thread-loader。该选项在系统的 CPU 有多于一个内核时自动启用，仅作用于生产构建。</span></span><br><span class="line">  pwa: &#123;&#125;, <span class="comment">// PWA 插件相关配置 see https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-pwa</span></span><br><span class="line">  <span class="comment">// webpack-dev-server 相关配置</span></span><br><span class="line">  devServer: &#123;</span><br><span class="line">    open: process.platform === <span class="string">'darwin'</span>,</span><br><span class="line">    host: <span class="string">'0.0.0.0'</span>, <span class="comment">// 允许外部ip访问</span></span><br><span class="line">    port: <span class="number">8022</span>, <span class="comment">// 端口</span></span><br><span class="line">    https: <span class="literal">false</span>, <span class="comment">// 启用https</span></span><br><span class="line">    overlay: &#123;</span><br><span class="line">      warnings: <span class="literal">true</span>,</span><br><span class="line">      errors: <span class="literal">true</span></span><br><span class="line">    &#125;, <span class="comment">// 错误、警告在页面弹出</span></span><br><span class="line">    proxy: &#123;</span><br><span class="line">      <span class="string">'/api'</span>: &#123;</span><br><span class="line">        target: <span class="string">'http://www.baidu.com/api'</span>,</span><br><span class="line">        changeOrigin: <span class="literal">true</span>, <span class="comment">// 允许websockets跨域</span></span><br><span class="line">        <span class="comment">// ws: true,</span></span><br><span class="line">        pathRewrite: &#123;</span><br><span class="line">          <span class="string">'^/api'</span>: <span class="string">''</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="comment">// 代理转发配置，用于调试环境</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 第三方插件配置</span></span><br><span class="line">  pluginOptions: &#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="alias别名配置"><a href="#alias别名配置" class="headerlink" title="alias别名配置"></a>alias别名配置</h4><h3 id="alias"><a href="#alias" class="headerlink" title="alias"></a>alias</h3><p>当项目逐渐变大之后，文件与文件直接的引用关系会很复杂，这时候就需要使用<a href="https://webpack.js.org/configuration/resolve/" target="_blank" rel="noopener">alias</a> 了。 有的人喜欢alias 指向src目录下，再使用相对路径找文件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">resolve: &#123;</span><br><span class="line">  alias: &#123;</span><br><span class="line">    <span class="string">'~'</span>: resolve(__dirname, <span class="string">'src'</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用</span></span><br><span class="line"><span class="keyword">import</span> stickTop <span class="keyword">from</span> <span class="string">'~/components/stickTop'</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure><p>或者也可以</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">alias: &#123;</span><br><span class="line">  <span class="string">'src'</span>: path.resolve(__dirname, <span class="string">'../src'</span>),</span><br><span class="line">  <span class="string">'components'</span>: path.resolve(__dirname, <span class="string">'../src/components'</span>),</span><br><span class="line">  <span class="string">'api'</span>: path.resolve(__dirname, <span class="string">'../src/api'</span>),</span><br><span class="line">  <span class="string">'utils'</span>: path.resolve(__dirname, <span class="string">'../src/utils'</span>),</span><br><span class="line">  <span class="string">'store'</span>: path.resolve(__dirname, <span class="string">'../src/store'</span>),</span><br><span class="line">  <span class="string">'router'</span>: path.resolve(__dirname, <span class="string">'../src/router'</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用</span></span><br><span class="line"><span class="keyword">import</span> stickTop <span class="keyword">from</span> <span class="string">'components/stickTop'</span></span><br><span class="line"><span class="keyword">import</span> getArticle <span class="keyword">from</span> <span class="string">'api/article'</span></span><br><span class="line">复制代码</span><br></pre></td></tr></table></figure><p>没有好与坏对与错，纯看个人喜好和团队规范。</p><h4 id="二、优化打包chunk-vendors-js文件体积过大"><a href="#二、优化打包chunk-vendors-js文件体积过大" class="headerlink" title="二、优化打包chunk-vendors.js文件体积过大"></a>二、优化打包chunk-vendors.js文件体积过大</h4><p>​    当我们运行项目并且打包的时候，会发现chunk-vendors.js这个文件非常大，那是因为webpack将所有的依赖全都压缩到了这个文件里面，这时我们可以将其拆分，将所有的依赖都打包成单独的js。</p><p>方案一：利用splitChunks将每个依赖包单独打包，在生产环境下配置，代码如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">configureWebpack: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">'production'</span>) &#123;</span><br><span class="line">      <span class="comment">// 为生产环境修改配置...</span></span><br><span class="line">      config.mode = <span class="string">'production'</span></span><br><span class="line">      <span class="comment">// 将每个依赖包打包成单独的js文件</span></span><br><span class="line">      <span class="keyword">let</span> optimization = &#123;</span><br><span class="line">        runtimeChunk: <span class="string">'single'</span>,</span><br><span class="line">        splitChunks: &#123;</span><br><span class="line">          chunks: <span class="string">'all'</span>,</span><br><span class="line">          maxInitialRequests: <span class="literal">Infinity</span>,</span><br><span class="line">          minSize: <span class="number">20000</span>, <span class="comment">// 依赖包超过20000bit将被单独打包</span></span><br><span class="line">          cacheGroups: &#123;</span><br><span class="line">            vendor: &#123;</span><br><span class="line">              test: <span class="regexp">/[\\/]node_modules[\\/]/</span>,</span><br><span class="line">              name (<span class="built_in">module</span>) &#123;</span><br><span class="line">                <span class="comment">// get the name. E.g. node_modules/packageName/not/this/part.js</span></span><br><span class="line">                <span class="comment">// or node_modules/packageName</span></span><br><span class="line">                <span class="keyword">const</span> packageName = <span class="built_in">module</span>.context.match(<span class="regexp">/[\\/]node_modules[\\/](.*?)([\\/]|$)/</span>)[<span class="number">1</span>]</span><br><span class="line">                <span class="comment">// npm package names are URL-safe, but some servers don't like @ symbols</span></span><br><span class="line">                <span class="keyword">return</span> <span class="string">`npm.<span class="subst">$&#123;packageName.replace(<span class="string">'@'</span>, <span class="string">''</span>)&#125;</span>`</span></span><br><span class="line">              &#125;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">Object</span>.assign(config, &#123;</span><br><span class="line">        optimization</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 为开发环境修改配置...</span></span><br><span class="line">      config.mode = <span class="string">'development'</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">Object</span>.assign(config, &#123;</span><br><span class="line">      <span class="comment">// 开发生产共同配置</span></span><br><span class="line">      resolve: &#123;</span><br><span class="line">        alias: &#123;</span><br><span class="line">          <span class="string">'@'</span>: path.resolve(__dirname, <span class="string">'./src'</span>),</span><br><span class="line">          <span class="string">'@c'</span>: path.resolve(__dirname, <span class="string">'./src/components'</span>),</span><br><span class="line">          <span class="string">'@p'</span>: path.resolve(__dirname, <span class="string">'./src/pages'</span>)</span><br><span class="line">        &#125; <span class="comment">// 别名配置</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><h4 id="方案二、利用DllPlugin和DllReferencePlugin将依赖包打包成外部文件在index中引入"><a href="#方案二、利用DllPlugin和DllReferencePlugin将依赖包打包成外部文件在index中引入" class="headerlink" title="方案二、利用DllPlugin和DllReferencePlugin将依赖包打包成外部文件在index中引入"></a>方案二、利用DllPlugin和DllReferencePlugin将依赖包打包成外部文件在index中引入</h4><ol><li>在package.json中新建library,用于存储即将要打包的依赖包名和打包后的文件名</li></ol><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    ...</span><br><span class="line">    "name": "demo-cli3",</span><br><span class="line">  "version": "1.0.0",</span><br><span class="line">    "version_lib": "1.0.0",</span><br><span class="line">    "library": &#123;</span><br><span class="line">       "lib_v1_0": [</span><br><span class="line">           <span class="string">"jquery/dist/jquery.min.js"</span></span><br><span class="line">        ],</span><br><span class="line">        "vueBucket_v1_2": [</span><br><span class="line">           "vue-router",</span><br><span class="line">           <span class="string">"vuex"</span></span><br><span class="line">        ]</span><br><span class="line">    &#125;,</span><br><span class="line">    ...</span><br><span class="line">&#125;j</span><br></pre></td></tr></table></figure><p>创建webpack.dll.config.js文件，代码如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>)</span><br><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>)</span><br><span class="line"><span class="keyword">const</span> &#123;library&#125; = <span class="built_in">require</span>(<span class="string">'./package.json'</span>)</span><br><span class="line"><span class="comment">// const assetsSubDirectory = process.env.NODE_ENV === 'production'</span></span><br><span class="line"><span class="comment">//   ? build.assetsSubDirectory : dev.assetsSubDirectory</span></span><br><span class="line"><span class="keyword">let</span> &#123; version_lib &#125; = <span class="built_in">require</span>(<span class="string">'./package.json'</span>);</span><br><span class="line">version_lib = version_lib.replace(<span class="regexp">/\./g</span>,<span class="string">'_'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  entry: library,</span><br><span class="line">  output: &#123;</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">'./libs/package/js'</span>),</span><br><span class="line">    filename: <span class="string">`[name].<span class="subst">$&#123;version_lib&#125;</span>.dll.js`</span>,</span><br><span class="line">    library: <span class="string">'[name]_library'</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.vue$/</span>,</span><br><span class="line">        loader: <span class="string">'vue-loader'</span></span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.js$/</span>,</span><br><span class="line">        loader: <span class="string">'babel-loader'</span>,</span><br><span class="line">        exclude: <span class="regexp">/node_modules/</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  optimization:&#123;</span><br><span class="line">    minimizer:[</span><br><span class="line">      <span class="keyword">new</span> UglifyPlugin(&#123;</span><br><span class="line">        uglifyOptions: &#123;</span><br><span class="line">          warnings: <span class="literal">false</span>,</span><br><span class="line">          compress: &#123;</span><br><span class="line">            drop_console: <span class="literal">true</span>, <span class="comment">// console</span></span><br><span class="line">            drop_debugger: <span class="literal">false</span>,</span><br><span class="line">            pure_funcs: [<span class="string">'console.log'</span>] <span class="comment">// 移除console</span></span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;)</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> webpack.optimize.ModuleConcatenationPlugin(),</span><br><span class="line">    <span class="keyword">new</span> webpack.ContextReplacementPlugin(<span class="regexp">/moment[\/\\]locale$/</span>, /zh-cn|en-gb/),</span><br><span class="line">    <span class="keyword">new</span> webpack.DllPlugin(&#123;</span><br><span class="line">      path: path.resolve(__dirname, <span class="string">'./libs/package/json'</span>, <span class="string">'[name].manifest.json'</span>),</span><br><span class="line">      name: <span class="string">'[name]_library'</span>,</span><br><span class="line">      context: process.cwd()</span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在vue.config.js中配置DllReferencePlugin</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> &#123; version, version_lib , openGzip,library &#125; = <span class="built_in">require</span>(<span class="string">'./package.json'</span>);</span><br><span class="line">...</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  configureWebpack: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">'production'</span>) &#123;</span><br><span class="line">      <span class="comment">// 为生产环境修改配置...</span></span><br><span class="line">      config.mode = <span class="string">'production'</span>;</span><br><span class="line">      ...</span><br><span class="line">      <span class="built_in">Object</span>.assign(config, &#123;</span><br><span class="line">        ...</span><br><span class="line">        plugins:[</span><br><span class="line">          ...config.plugins,</span><br><span class="line">          ...Object.keys(library).map(<span class="function"><span class="params">name</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> webpack.DllReferencePlugin(&#123;</span><br><span class="line">              context: process.cwd(),</span><br><span class="line">              manifest: <span class="built_in">require</span>(<span class="string">`./libs/package/json/<span class="subst">$&#123;name&#125;</span>.manifest.json`</span>),</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;)</span><br><span class="line">        ]</span><br><span class="line">      &#125;);</span><br><span class="line">      ...</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 为开发环境修改配置...</span></span><br><span class="line">      config.mode = <span class="string">'development'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><p>将打包好的js自动添加进index.html中</p><p>下载add-asset-html-webpack-plugin</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev add-asset-html-webpack-plugin</span><br></pre></td></tr></table></figure><p>在vue.config.js中配置add-asset-html-webpack-plugin</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="keyword">const</span> AddAssetHtmlPlugin = <span class="built_in">require</span>(<span class="string">'add-asset-html-webpack-plugin'</span>);</span><br><span class="line">...</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">   ...</span><br><span class="line">   configureWebpack: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">'production'</span>) &#123;</span><br><span class="line">      <span class="comment">// 为生产环境修改配置...</span></span><br><span class="line">      config.mode = <span class="string">'production'</span>;</span><br><span class="line">        ...</span><br><span class="line">      <span class="built_in">Object</span>.assign(config, &#123;</span><br><span class="line">        ...</span><br><span class="line">        plugins:[</span><br><span class="line">          ...</span><br><span class="line">          <span class="keyword">new</span> AddAssetHtmlPlugin(<span class="built_in">Object</span>.keys(library).map(<span class="function"><span class="params">name</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">              filepath: <span class="built_in">require</span>.resolve(path.resolve(<span class="string">`libs/package/js/<span class="subst">$&#123;name&#125;</span>.<span class="subst">$&#123;version_lib&#125;</span>.dll.js`</span>)),</span><br><span class="line">              outputPath: <span class="string">'static/lib/js'</span>,</span><br><span class="line">              publicPath:<span class="string">'./static/lib/js'</span>,</span><br><span class="line">              includeSourcemap: <span class="literal">false</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)),</span><br><span class="line">        ]</span><br><span class="line">      &#125;);</span><br><span class="line">      ...</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 为开发环境修改配置...</span></span><br><span class="line">      config.mode = <span class="string">'development'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">  &#125;,</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>注：方案一、方案二可同时使用，单独使用方案二不需要将vue也添加进打包序列，那样会重复打包（在chunk-venders.js中始终会将vue打包进去），若同时使用则不会出现该情况。<br>至此，打包优化结束，运行打包，你会发现原先的vender文件没有了，同时多了好几个依赖的js文件（方案一）<br><img src="/2020/03/23/vue-cli3项目的webpack配置/image-20200323205311545.png" alt="image-20200323205311545"></p><h2 id="三、打包时去除打印信息（console）"><a href="#三、打包时去除打印信息（console）" class="headerlink" title="三、打包时去除打印信息（console）"></a>三、打包时去除打印信息（console）</h2><p>下载uglifyjs-webpack-plugin<br><a href="https://blog.csdn.net/u013884068/article/details/83511343" target="_blank" rel="noopener">uglifyjs-webpack-plugin中文文档</a></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev uglifyjs-webpack-plugin</span><br></pre></td></tr></table></figure><p>在vue.config.js文件中引入，并在configureWebpack的optimization中添加如下代码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> UglifyPlugin = <span class="built_in">require</span>(<span class="string">'uglifyjs-webpack-plugin'</span>)</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    ...</span><br><span class="line"> configureWebpack: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">'production'</span>) &#123;</span><br><span class="line">      <span class="comment">// 为生产环境修改配置...</span></span><br><span class="line">      config.mode = <span class="string">'production'</span></span><br><span class="line">      <span class="comment">// 将每个依赖包打包成单独的js文件</span></span><br><span class="line">      <span class="keyword">let</span> optimization = &#123;</span><br><span class="line">        ...</span><br><span class="line">        minimizer: [<span class="keyword">new</span> UglifyPlugin(&#123;</span><br><span class="line">          uglifyOptions: &#123;</span><br><span class="line">            compress: &#123;</span><br><span class="line">              warnings: <span class="literal">false</span>,</span><br><span class="line">              drop_console: <span class="literal">true</span>, <span class="comment">// console</span></span><br><span class="line">              drop_debugger: <span class="literal">false</span>,</span><br><span class="line">              pure_funcs: [<span class="string">'console.log'</span>] <span class="comment">// 移除console</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;)]</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">Object</span>.assign(config, &#123;</span><br><span class="line">        optimization</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 为开发环境修改配置...</span></span><br><span class="line">      config.mode = <span class="string">'development'</span></span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">  &#125;,</span><br><span class="line">    ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行打包，你会发现我们在页面中写的那些打印日志的代码都消失了<br>注：以上代码适用于uglifyjs-webpack-plugin 2.1.1及以前的版本，新版uglifyjs-webpack-plugin需写成以下方式</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">minimizer: [<span class="keyword">new</span> UglifyPlugin(&#123;</span><br><span class="line">   uglifyOptions: &#123;</span><br><span class="line">       warnings: <span class="literal">false</span>,</span><br><span class="line">       compress: &#123;</span><br><span class="line">         drop_console: <span class="literal">true</span>, <span class="comment">// console</span></span><br><span class="line">         drop_debugger: <span class="literal">false</span>,</span><br><span class="line">         pure_funcs: [<span class="string">'console.log'</span>] <span class="comment">// 移除console</span></span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;)]</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h2 id="四、配置全局jQuery"><a href="#四、配置全局jQuery" class="headerlink" title="四、配置全局jQuery"></a>四、配置全局jQuery</h2><ol><li>下载jQuery npm包</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install --save-dev jquery</span><br></pre></td></tr></table></figure><ol start="2"><li>设置‘jquery$’别名,代码如下：</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line">chainWebpack: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 修复HMR</span></span><br><span class="line">    config.resolve.symlinks(<span class="literal">true</span>);</span><br><span class="line">    <span class="comment">// 别名配置</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"__dirname"</span>,__dirname);</span><br><span class="line">    config.resolve.alias</span><br><span class="line">      .set(<span class="string">'@'</span>, path.resolve(__dirname, <span class="string">'./src'</span>))</span><br><span class="line">      .set(<span class="string">'@a'</span>, path.resolve(__dirname, <span class="string">'./src/assets'</span>))</span><br><span class="line">      .set(<span class="string">'@c'</span>, path.resolve(__dirname, <span class="string">'./src/components'</span>))</span><br><span class="line">      .set(<span class="string">'@p'</span>, path.resolve(__dirname, <span class="string">'./src/pages'</span>))</span><br><span class="line">      .set(<span class="string">'jquery$'</span>, <span class="string">'jquery/dist/jquery.min.js'</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">...</span><br></pre></td></tr></table></figure><ol start="3"><li>使用ProvidePlugin插件为jQuery添加全局变量</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"> configureWebpack: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">     ...</span><br><span class="line">    <span class="built_in">Object</span>.assign(config, &#123;</span><br><span class="line">      <span class="comment">// 开发生产共同配置</span></span><br><span class="line">      <span class="comment">// externals: &#123;</span></span><br><span class="line">      <span class="comment">//   'vue': 'Vue',</span></span><br><span class="line">      <span class="comment">//   'element-ui': 'ELEMENT',</span></span><br><span class="line">      <span class="comment">//   'vue-router': 'VueRouter',</span></span><br><span class="line">      <span class="comment">//   'vuex': 'Vuex'</span></span><br><span class="line">      <span class="comment">// &#125; // 防止将某些 import 的包(package)打包到 bundle 中，而是在运行时(runtime)再去从外部获取这些扩展依赖(用于csdn引入)</span></span><br><span class="line">      plugins:[</span><br><span class="line">        ...config.plugins,</span><br><span class="line">        <span class="keyword">new</span> webpack.ProvidePlugin(&#123;</span><br><span class="line">          jQuery: <span class="string">"jquery"</span>,</span><br><span class="line">          $: <span class="string">"jquery"</span>,</span><br><span class="line">          <span class="string">"windows.jQuery"</span>:<span class="string">"jquery"</span></span><br><span class="line">        &#125;)</span><br><span class="line">      ]</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">...</span><br></pre></td></tr></table></figure><ol start="4"><li>至此可以在全局使用jquery了</li></ol><p>五、开启gizp压缩<br>gizp压缩是一种http请求优化方式，通过减少文件体积来提高加载速度。html、js、css文件甚至json数据都可以用它压缩，可以减小60%以上的体积。webpack在打包时可以借助 compression webpack plugin 实现gzip压缩。</p><ol><li><p>下载 compression webpack plugin</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm install -D compression-webpack-plugin</span><br></pre></td></tr></table></figure></li><li><p>在package.json中添加openGzip字段，用作gizp开启开关</p></li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;demo-cli3&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br><span class="line">  &quot;openGizp&quot;: false,</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="3"><li>vue.config.js 中配置如下</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> CompressionPlugin = <span class="built_in">require</span>(<span class="string">"compression-webpack-plugin"</span>);</span><br><span class="line">...</span><br><span class="line">configureWebpack: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">'production'</span>) &#123;</span><br><span class="line">      <span class="comment">// 为生产环境修改配置...</span></span><br><span class="line">      config.mode = <span class="string">'production'</span>;</span><br><span class="line">      <span class="comment">// 将每个依赖包打包成单独的js文件</span></span><br><span class="line">      ...</span><br><span class="line">      <span class="keyword">if</span>(openGzip)&#123;</span><br><span class="line">        config.plugins = [</span><br><span class="line">          ...config.plugins,</span><br><span class="line">          <span class="keyword">new</span> CompressionPlugin(&#123;</span><br><span class="line">            test:<span class="regexp">/\.js$|\.html$|.\css/</span>, <span class="comment">//匹配文件名</span></span><br><span class="line">            threshold: <span class="number">10240</span>,<span class="comment">//对超过10k的数据压缩</span></span><br><span class="line">            deleteOriginalAssets: <span class="literal">false</span> <span class="comment">//不删除源文件</span></span><br><span class="line">          &#125;)</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 为开发环境修改配置...</span></span><br><span class="line">      config.mode = <span class="string">'development'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    ...</span><br><span class="line">  &#125;,</span><br><span class="line">...</span><br></pre></td></tr></table></figure><ol start="4"><li>注：生成的压缩文件以.gz为后缀，一般浏览器都已支持.gz的资源文件，在http请求的Request Headers 中能看到 Accept-Encoding:gzip。要使服务器返回.gz文件，还需要对服务器进行配置，根据Request Headers的Accept-Encoding标签进行鉴别，如果支持gzip就返回.gz文件。</li></ol><h2 id="六、将版本号添加进打包的js名中"><a href="#六、将版本号添加进打包的js名中" class="headerlink" title="六、将版本号添加进打包的js名中"></a>六、将版本号添加进打包的js名中</h2><ol><li>vue.config.js 中配置如下</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">...</span><br><span class="line"><span class="keyword">let</span> &#123; version , openGzip &#125; = <span class="built_in">require</span>(<span class="string">'./package.json'</span>);</span><br><span class="line">version = version.replace(<span class="regexp">/\./g</span>,<span class="string">'_'</span>);</span><br><span class="line">...</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  assetsDir: <span class="string">"static"</span>,</span><br><span class="line"> configureWebpack: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">'production'</span>) &#123;</span><br><span class="line">      <span class="comment">// 为生产环境修改配置...</span></span><br><span class="line">      config.mode = <span class="string">'production'</span>;</span><br><span class="line">        ...</span><br><span class="line">      <span class="built_in">Object</span>.assign(config, &#123;</span><br><span class="line">        output:&#123;</span><br><span class="line">          ...config.output,</span><br><span class="line">          filename: <span class="string">`static/js/[name].[chunkhash].<span class="subst">$&#123;version&#125;</span>.js`</span>,</span><br><span class="line">          chunkFilename: <span class="string">`static/js/[name].[chunkhash].<span class="subst">$&#123;version&#125;</span>.js`</span></span><br><span class="line">        &#125;,</span><br><span class="line">        ...</span><br><span class="line">      &#125;);</span><br><span class="line">      ...</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 为开发环境修改配置...</span></span><br><span class="line">      config.mode = <span class="string">'development'</span>;</span><br><span class="line">    &#125; </span><br><span class="line">    ...</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">...</span><br></pre></td></tr></table></figure><h4 id="完整代码如下："><a href="#完整代码如下：" class="headerlink" title="完整代码如下："></a>完整代码如下：</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> webpack = <span class="built_in">require</span>(<span class="string">'webpack'</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"><span class="comment">// const UglifyPlugin = require('uglifyjs-webpack-plugin');</span></span><br><span class="line"><span class="keyword">const</span> CompressionPlugin = <span class="built_in">require</span>(<span class="string">"compression-webpack-plugin"</span>);</span><br><span class="line"><span class="keyword">const</span> AddAssetHtmlPlugin = <span class="built_in">require</span>(<span class="string">'add-asset-html-webpack-plugin'</span>);</span><br><span class="line"><span class="keyword">let</span> &#123; version, version_lib , openGzip,library &#125; = <span class="built_in">require</span>(<span class="string">'./package.json'</span>);</span><br><span class="line">version = version.replace(<span class="regexp">/\./g</span>,<span class="string">'_'</span>);</span><br><span class="line">version_lib = version_lib.replace(<span class="regexp">/\./g</span>,<span class="string">'_'</span>);</span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  publicPath: <span class="string">'./'</span>, <span class="comment">// 基本路径</span></span><br><span class="line">  outputDir: <span class="string">'dist'</span>, <span class="comment">// 输出文件目录</span></span><br><span class="line">  assetsDir: <span class="string">"static"</span>,</span><br><span class="line">  lintOnSave: <span class="literal">false</span>, <span class="comment">// eslint-loader 是否在保存的时候检查</span></span><br><span class="line">  <span class="comment">// see https://github.com/vuejs/vue-cli/blob/dev/docs/webpack.md</span></span><br><span class="line">  <span class="comment">// webpack配置</span></span><br><span class="line">  chainWebpack: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="comment">// 修复HMR</span></span><br><span class="line">    config.resolve.symlinks(<span class="literal">true</span>);</span><br><span class="line">    <span class="comment">// 别名配置</span></span><br><span class="line">    config.resolve.alias</span><br><span class="line">      .set(<span class="string">'@'</span>, path.resolve(__dirname, <span class="string">'./src'</span>))</span><br><span class="line">      .set(<span class="string">'@a'</span>, path.resolve(__dirname, <span class="string">'./src/assets'</span>))</span><br><span class="line">      .set(<span class="string">'@c'</span>, path.resolve(__dirname, <span class="string">'./src/components'</span>))</span><br><span class="line">      .set(<span class="string">'@p'</span>, path.resolve(__dirname, <span class="string">'./src/pages'</span>))</span><br><span class="line">      .set(<span class="string">'jquery$'</span>, <span class="string">'jquery/dist/jquery.min.js'</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">  configureWebpack: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">'production'</span>) &#123;</span><br><span class="line">      <span class="comment">// 为生产环境修改配置...</span></span><br><span class="line">      config.mode = <span class="string">'production'</span>;</span><br><span class="line"></span><br><span class="line">      <span class="comment">// 将每个依赖包打包成单独的js文件</span></span><br><span class="line">     <span class="comment">/* let optimization = &#123;</span></span><br><span class="line"><span class="comment">        runtimeChunk: 'single',</span></span><br><span class="line"><span class="comment">        splitChunks: &#123;</span></span><br><span class="line"><span class="comment">          chunks: 'all',</span></span><br><span class="line"><span class="comment">          maxInitialRequests: Infinity,</span></span><br><span class="line"><span class="comment">          minSize: 20000, // 依赖包超过20000bit将被单独打包</span></span><br><span class="line"><span class="comment">          cacheGroups: &#123;</span></span><br><span class="line"><span class="comment">            vendor: &#123;</span></span><br><span class="line"><span class="comment">              test: /[\\/]node_modules[\\/]/,</span></span><br><span class="line"><span class="comment">              name (module) &#123;</span></span><br><span class="line"><span class="comment">                // get the name. E.g. node_modules/packageName/not/this/part.js  or node_modules/packageName</span></span><br><span class="line"><span class="comment">                const packageName = module.context.match(/[\\/]node_modules[\\/](.*?)([\\/]|$)/)[1];</span></span><br><span class="line"><span class="comment">                // npm package names are URL-safe, but some servers don't like @ symbols</span></span><br><span class="line"><span class="comment">                return `npm.$&#123;packageName.replace('@', '')&#125;`;</span></span><br><span class="line"><span class="comment">              &#125;</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">          &#125;</span></span><br><span class="line"><span class="comment">        &#125;,</span></span><br><span class="line"><span class="comment">        minimizer: [</span></span><br><span class="line"><span class="comment">          new UglifyPlugin(&#123;</span></span><br><span class="line"><span class="comment">            uglifyOptions: &#123;</span></span><br><span class="line"><span class="comment">              warnings: false,</span></span><br><span class="line"><span class="comment">              compress: &#123;</span></span><br><span class="line"><span class="comment">                drop_console: true, // console</span></span><br><span class="line"><span class="comment">                drop_debugger: false,</span></span><br><span class="line"><span class="comment">                pure_funcs: ['console.log'] // 移除console</span></span><br><span class="line"><span class="comment">              &#125;</span></span><br><span class="line"><span class="comment">            &#125;</span></span><br><span class="line"><span class="comment">          &#125;)</span></span><br><span class="line"><span class="comment">        ]</span></span><br><span class="line"><span class="comment">      &#125;;*/</span></span><br><span class="line">      <span class="built_in">Object</span>.assign(config, &#123;</span><br><span class="line">        output:&#123;</span><br><span class="line">          ...config.output,</span><br><span class="line">          filename: <span class="string">`static/js/[name].[chunkhash].<span class="subst">$&#123;version&#125;</span>.js`</span>,</span><br><span class="line">          chunkFilename: <span class="string">`static/js/[name].[chunkhash].<span class="subst">$&#123;version&#125;</span>.js`</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="comment">// optimization,</span></span><br><span class="line">        plugins:[</span><br><span class="line">          ...config.plugins,</span><br><span class="line">          ...Object.keys(library).map(<span class="function"><span class="params">name</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> webpack.DllReferencePlugin(&#123;</span><br><span class="line">              context: process.cwd(),</span><br><span class="line">              manifest: <span class="built_in">require</span>(<span class="string">`./libs/package/json/<span class="subst">$&#123;name&#125;</span>.manifest.json`</span>),</span><br><span class="line">            &#125;)</span><br><span class="line">          &#125;),</span><br><span class="line">          <span class="keyword">new</span> AddAssetHtmlPlugin(<span class="built_in">Object</span>.keys(library).map(<span class="function"><span class="params">name</span> =&gt;</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> &#123;</span><br><span class="line">              filepath: <span class="built_in">require</span>.resolve(path.resolve(<span class="string">`libs/package/js/<span class="subst">$&#123;name&#125;</span>.<span class="subst">$&#123;version_lib&#125;</span>.dll.js`</span>)),</span><br><span class="line">              outputPath: <span class="string">'static/lib/js'</span>,</span><br><span class="line">              publicPath:<span class="string">'./static/lib/js'</span>,</span><br><span class="line">              includeSourcemap: <span class="literal">false</span></span><br><span class="line">            &#125;</span><br><span class="line">          &#125;)),</span><br><span class="line">        ]</span><br><span class="line">      &#125;);</span><br><span class="line">      <span class="keyword">if</span>(openGzip)&#123;</span><br><span class="line">        config.plugins = [</span><br><span class="line">          ...config.plugins,</span><br><span class="line">          <span class="keyword">new</span> CompressionPlugin(&#123;</span><br><span class="line">            test:<span class="regexp">/\.js$|\.html$|.\css/</span>, <span class="comment">//匹配文件名</span></span><br><span class="line">            threshold: <span class="number">10240</span>,<span class="comment">//对超过10k的数据压缩</span></span><br><span class="line">            deleteOriginalAssets: <span class="literal">false</span> <span class="comment">//不删除源文件</span></span><br><span class="line">          &#125;)</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="comment">// 为开发环境修改配置...</span></span><br><span class="line">      config.mode = <span class="string">'development'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">Object</span>.assign(config, &#123;</span><br><span class="line">      <span class="comment">// 开发生产共同配置</span></span><br><span class="line">      <span class="comment">// externals: &#123;</span></span><br><span class="line">      <span class="comment">//   'vue': 'Vue',</span></span><br><span class="line">      <span class="comment">//   'element-ui': 'ELEMENT',</span></span><br><span class="line">      <span class="comment">//   'vue-router': 'VueRouter',</span></span><br><span class="line">      <span class="comment">//   'vuex': 'Vuex'</span></span><br><span class="line">      <span class="comment">// &#125; // 防止将某些 import 的包(package)打包到 bundle 中，而是在运行时(runtime)再去从外部获取这些扩展依赖(用于csdn引入)</span></span><br><span class="line">      plugins:[</span><br><span class="line">        ...config.plugins,</span><br><span class="line">        <span class="keyword">new</span> webpack.ProvidePlugin(&#123;</span><br><span class="line">          jQuery: <span class="string">"jquery"</span>,</span><br><span class="line">          $: <span class="string">"jquery"</span>,</span><br><span class="line">          <span class="string">"windows.jQuery"</span>:<span class="string">"jquery"</span></span><br><span class="line">        &#125;)</span><br><span class="line">      ]</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">  productionSourceMap: <span class="literal">false</span>, <span class="comment">// 生产环境是否生成 sourceMap 文件</span></span><br><span class="line">  <span class="comment">// css相关配置</span></span><br><span class="line">  css: &#123;</span><br><span class="line">    extract: <span class="literal">true</span>, <span class="comment">// 是否使用css分离插件 ExtractTextPlugin</span></span><br><span class="line">    sourceMap: <span class="literal">false</span>, <span class="comment">// 开启 CSS source maps?</span></span><br><span class="line">    loaderOptions: &#123;</span><br><span class="line">      css: &#123;&#125;, <span class="comment">// 这里的选项会传递给 css-loader</span></span><br><span class="line">      postcss: &#123;&#125; <span class="comment">// 这里的选项会传递给 postcss-loader</span></span><br><span class="line">    &#125;, <span class="comment">// css预设器配置项</span></span><br><span class="line">    modules: <span class="literal">false</span> <span class="comment">// 启用 CSS modules for all css / pre-processor files.</span></span><br><span class="line">  &#125;,</span><br><span class="line">  parallel: <span class="built_in">require</span>(<span class="string">'os'</span>).cpus().length &gt; <span class="number">1</span>, <span class="comment">// 是否为 Babel 或 TypeScript 使用 thread-loader。该选项在系统的 CPU 有多于一个内核时自动启用，仅作用于生产构建。</span></span><br><span class="line">  pwa: &#123;&#125;, <span class="comment">// PWA 插件相关配置 see https://github.com/vuejs/vue-cli/tree/dev/packages/%40vue/cli-plugin-pwa</span></span><br><span class="line">  <span class="comment">// webpack-dev-server 相关配置</span></span><br><span class="line">  devServer: &#123;</span><br><span class="line">    open: process.platform === <span class="string">'darwin'</span>,</span><br><span class="line">    host: <span class="string">'0.0.0.0'</span>, <span class="comment">// 允许外部ip访问</span></span><br><span class="line">    port: <span class="number">8022</span>, <span class="comment">// 端口</span></span><br><span class="line">    https: <span class="literal">false</span>, <span class="comment">// 启用https</span></span><br><span class="line">    overlay: &#123;</span><br><span class="line">      warnings: <span class="literal">true</span>,</span><br><span class="line">      errors: <span class="literal">true</span></span><br><span class="line">    &#125;, <span class="comment">// 错误、警告在页面弹出</span></span><br><span class="line">    proxy: &#123;</span><br><span class="line">      <span class="string">'/api'</span>: &#123;</span><br><span class="line">        target: <span class="string">`<span class="subst">$&#123;process.env.VUE_APP_BASE_API&#125;</span>/api`</span>,</span><br><span class="line">        changeOrigin: <span class="literal">true</span>, <span class="comment">// 允许websockets跨域</span></span><br><span class="line">        <span class="comment">// ws: true,</span></span><br><span class="line">        pathRewrite: &#123;</span><br><span class="line">          <span class="string">'^/api'</span>: <span class="string">''</span></span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="comment">// 代理转发配置，用于调试环境</span></span><br><span class="line">  &#125;, <span class="comment">// 第三方插件配置</span></span><br><span class="line">  pluginOptions: &#123;&#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><p>注：如需其他的配置可在上方<a href="https://cli.vuejs.org/zh/config/#vue-config-js" target="_blank" rel="noopener">官网配置指南</a>中查找相关配置</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h1 id=&quot;vue-cli3搭建完整项目之webpack配置&quot;&gt;&lt;a href=&quot;#vue-cli3搭建完整项目之webpack配置&quot; class=&quot;headerlink&quot; title=&quot;vue-cli3搭建完整项目之webpack配置&quot;&gt;&lt;/a&gt;vue-cli3搭建完整项目
      
    
    </summary>
    
    
      <category term="-vue" scheme="https://shenxiaobu.github.io/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>VSCode配置多个sftp</title>
    <link href="https://shenxiaobu.github.io/2020/03/23/VSCode%E9%85%8D%E7%BD%AE%E5%A4%9A%E4%B8%AAsftp/"/>
    <id>https://shenxiaobu.github.io/2020/03/23/VSCode配置多个sftp/</id>
    <published>2020-03-23T08:56:39.000Z</published>
    <updated>2020-03-23T09:12:57.756Z</updated>
    
    <content type="html"><![CDATA[<h3 id="VSCode配置多个sftp，同一个文件可以分别上传到配置的sftp服务器"><a href="#VSCode配置多个sftp，同一个文件可以分别上传到配置的sftp服务器" class="headerlink" title="VSCode配置多个sftp，同一个文件可以分别上传到配置的sftp服务器"></a>VSCode配置多个sftp，同一个文件可以分别上传到配置的sftp服务器</h3><p>上面的章节已经学会了 如何一键将文件部署到服务器，但是现在遇到了一种情况，偶尔需要将文件上传</p><p>到客户服务器，偶尔是传到自己测试服务器。以现有的实力要实现的话 就是部署一次改一次 配置。</p><p>部署一次还行，经常部署肯定是不可取的，于是啥都不会只能百度咯</p><p>于是就搜到了这篇文章<a href="https://blog.csdn.net/u012560340/article/details/83030680" target="_blank" rel="noopener">配置多个sftp</a></p><p>大概关键字就是  profiles 这个字段</p><p>安装完 sftp 插件后 需要 按 ctrl + shift + p  搜索 sftp</p><p>了这个插件之后，还要配置它才能用，因为鬼才知道你的服务器是哪个，端口是什么等等。<br>最左侧选择文件模块，现在当前目录文件，当然，sftp的配置都是针对某个目录的，说白了就是某个项目，是先有项目，然后才知道你要上传什么文件，在文件模块，找到“.vscode”，展开它，发现“sftp.json”这一项就是配置sftp的文件，没有的话自己新建一个，名字要一模一样，如下图：</p><p><img src="/2020/03/23/VSCode配置多个sftp/image-20200323170631873.png" alt="image-20200323170631873"></p><p>“context”是本地目录路径，这个路径跟服务器的路径对应起来，“ignore”就是要忽略的文件，或文件夹，这里这样写就会忽略这些文件夹，“port”是服务器端口，“remotePath”是跟“context”对应的服务器那边的目录路径。<br>最关键就是这个“profiles”，多个服务器就在它里面配置，“profiles”是一个对象，里面每一个属性代表一个服务器，这里“test_h5”就是其中一个服务器的名字，“real_m_240”就是另一个服务器的名字，“profiles”里面的服务器配置就是每个服务器的配置信息，而“profiles”外面的属性就是所有服务器的公共属性，比如“profiles”外面的“port”属性，就是里面所有服务器的公共属性，如果“profiles”里面某个服务器的配置属性跟“profiles”外面的某个属性名字一样，那么，里面的属性会覆盖外面的属性。<br>“host”就是服务器的ip地址，“username”和“password”就是登录服务器要用的账号名和密码。<br>配置好之后，保存这个文件，sftp的配置就生效了，重启一下VSCode也是比较稳的做法。</p><p>因为是json文件，所以需要严格遵守json格式</p><p>json格式要求： </p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//字段和 值都需要 引号包着  最后一个字段不能有逗号</span></span><br></pre></td></tr></table></figure><p>具体配置如下</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"vue-charging-pc"</span>,  <span class="comment">//名字  使用时需要把注释去掉</span></span><br><span class="line">    <span class="attr">"protocol"</span>: <span class="string">"sftp"</span>,  <span class="comment">//协议  使用时需要把注释去掉</span></span><br><span class="line">    <span class="attr">"port"</span>: <span class="number">22</span>,</span><br><span class="line">    <span class="attr">"username"</span>: <span class="string">"root"</span>,   <span class="comment">//服务器用户名</span></span><br><span class="line">    <span class="attr">"privateKeyPath"</span>: <span class="string">"服务器密钥文件路径"</span>,  <span class="comment">//服务器密钥文件</span></span><br><span class="line">    <span class="attr">"remotePath"</span>: <span class="string">"/home/charge/springboot/view/"</span>,  <span class="comment">//部署到服务器的目录</span></span><br><span class="line">    <span class="attr">"profiles"</span>:&#123;</span><br><span class="line">        <span class="attr">"zhishang"</span>: &#123;    <span class="comment">//sftp 的名字  当使用这个时 按下面的配置进行部署 </span></span><br><span class="line">            <span class="attr">"host"</span>: <span class="string">"服务器主机地址"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"god"</span>:&#123;</span><br><span class="line">            <span class="attr">"host"</span>: <span class="string">"服务器主机地址"</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;VSCode配置多个sftp，同一个文件可以分别上传到配置的sftp服务器&quot;&gt;&lt;a href=&quot;#VSCode配置多个sftp，同一个文件可以分别上传到配置的sftp服务器&quot; class=&quot;headerlink&quot; title=&quot;VSCode配置多个sftp，同一个
      
    
    </summary>
    
    
      <category term="-vscode" scheme="https://shenxiaobu.github.io/tags/vscode/"/>
    
  </entry>
  
  <entry>
    <title>vsCode插件sftp的使用及async/await的使用等</title>
    <link href="https://shenxiaobu.github.io/2020/03/22/vsCode%E6%8F%92%E4%BB%B6sftp%E7%9A%84%E4%BD%BF%E7%94%A8%E5%8F%8Aasync-await%E7%9A%84%E4%BD%BF%E7%94%A8%E7%AD%89/"/>
    <id>https://shenxiaobu.github.io/2020/03/22/vsCode插件sftp的使用及async-await的使用等/</id>
    <published>2020-03-22T14:00:14.000Z</published>
    <updated>2020-03-22T15:31:51.575Z</updated>
    
    <content type="html"><![CDATA[<h3 id="vscode插件sftp的使用及async-await"><a href="#vscode插件sftp的使用及async-await" class="headerlink" title="vscode插件sftp的使用及async/await"></a>vscode插件sftp的使用及async/await</h3><p>在vscode拓展上搜索 sftp 安装即可</p><p>配置：</p><p>一般在开发项目时，总是有多个项目在同时开发。如果要为单一的项目配置的话，就需要打开此项目，快捷键win+shift+p 打开命令：输入：sftp 即可在该项目的根目录下生成.vscode的文件夹，并生成了一个sftp.json的文件。配置如下</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"host"</span>: <span class="string">"远程ip地址"</span>,</span><br><span class="line">    <span class="attr">"port"</span>: <span class="number">22</span>,</span><br><span class="line">    <span class="attr">"username"</span>: <span class="string">"登录名"</span>,</span><br><span class="line">    <span class="attr">"password"</span>: <span class="string">"登录密码"</span>,</span><br><span class="line">    <span class="attr">"protocol"</span>: <span class="string">"sftp"</span>, </span><br><span class="line">    <span class="attr">"agent"</span>: <span class="literal">null</span>,</span><br><span class="line">    <span class="attr">"privateKeyPath"</span>: <span class="string">"null或如果链接服务器用的不是账号密码是key文件 这里为key文件路径"</span>, </span><br><span class="line">    <span class="attr">"passphrase"</span>: <span class="literal">null</span>, </span><br><span class="line">    <span class="attr">"passive"</span>: <span class="literal">false</span>, </span><br><span class="line">    <span class="attr">"interactiveAuth"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"remotePath"</span>: <span class="string">"需要打到的远程的文件夹地址"</span>,</span><br><span class="line">    <span class="attr">"context"</span>: <span class="string">"本地项目地址"</span>,</span><br><span class="line">    <span class="attr">"uploadOnSave"</span>: <span class="literal">true</span>,</span><br><span class="line">    <span class="attr">"syncMode"</span>: <span class="string">"update"</span>,</span><br><span class="line">    <span class="attr">"ignore"</span>: [</span><br><span class="line">        <span class="string">"**/.vscode/**"</span>,</span><br><span class="line">        <span class="string">"**/.git/**"</span>,</span><br><span class="line">        <span class="string">"**/.DS_Store"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"watcher"</span>: &#123;</span><br><span class="line">        <span class="attr">"files"</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">"autoUpload"</span>: <span class="literal">false</span>,</span><br><span class="line">        <span class="attr">"autoDelete"</span>: <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>使用：</p><p>只需要配置host、username、password以及 remotePath四个参数就可以使用了。</p><p>1、同步全部的工程文件，可以在需要同步的文件夹上面右键：选择SFTP:Sync to remote，即可同步到远程服务器。</p><p>2、同步单一的文件，在以在需要同步的文件上右键，选择SFTP:Upload，即可同步到远程服务器。</p><p>注意：<br>不建议开启autoUpload和autoDelete操作，避免不小心把临时改动update到服务器上，就不好玩了。</p><h3 id="async-await-的使用"><a href="#async-await-的使用" class="headerlink" title="async/await 的使用"></a>async/await 的使用</h3><p>promise很好的解决了回调地狱的问题，但是当异步嵌套的时候会有很多then，也是挺难看的</p><p>所以引入了 generator，这里跳过generator 直接来将 async/await</p><blockquote><ol><li>await后面接一个会return new promise的函数并执行它</li><li>await只能放在async函数里</li></ol></blockquote><ul><li>使用async和await获取成功的结果</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> 摇色子(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> sino = <span class="built_in">parseInt</span>(<span class="built_in">Math</span>.random() * <span class="number">6</span> +<span class="number">1</span>)</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">            resolve(sino)</span><br><span class="line">        &#125;,<span class="number">3000</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">let</span> n =<span class="keyword">await</span> 摇色子()</span><br><span class="line">    <span class="built_in">console</span>.log(n)</span><br><span class="line">&#125;</span><br><span class="line">test()</span><br></pre></td></tr></table></figure><p>上面这段代码async中使<code>await 摇色子()</code>先执行，等到三秒后执行完再把得到的结果赋值给左边的n，也就是说test函数需要三秒钟才执行完成，所以test函数是异步的，因此前面必须写async</p><ul><li>获取失败的结果</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> 摇色子(<span class="params">猜测</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> sino = <span class="built_in">parseInt</span>(<span class="built_in">Math</span>.random() * <span class="number">6</span> +<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">if</span>(sino &gt; <span class="number">3</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(猜测 === <span class="string">'大'</span>)&#123;</span><br><span class="line">                resolve(sino)</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                reject(sino)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(猜测 === <span class="string">'大'</span>)&#123;</span><br><span class="line">                reject(sino)</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                resolve(sino)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">            resolve(sino)</span><br><span class="line">        &#125;,<span class="number">300</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="comment">//把await及获取它的值的操作放在try里</span></span><br><span class="line">        <span class="keyword">let</span> n =<span class="keyword">await</span> 摇色子(<span class="string">'大'</span>)</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'赢了'</span> + n)</span><br><span class="line">    &#125;<span class="keyword">catch</span>(error)&#123;</span><br><span class="line">      <span class="comment">//失败的操作放在catch里</span></span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'输了'</span> + error)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">test()</span><br></pre></td></tr></table></figure><p>把await和成功后的操作放到try里，失败的放在catch</p><ul><li>为什么要用await<br> 为了使我们的异步代码，更像同步的代码</li><li>有多个promise，怎么拿到所有的promise都结束后的结果<br> 比如有两个色子，我想得到这两个色子的点数</li></ul><ol><li>使用promise</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> 摇色子(<span class="params">猜测</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">resolve, reject</span>)=&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> sino = <span class="built_in">parseInt</span>(<span class="built_in">Math</span>.random() * <span class="number">6</span> +<span class="number">1</span>)</span><br><span class="line">        <span class="keyword">if</span>(sino &gt; <span class="number">3</span>)&#123;</span><br><span class="line">            <span class="keyword">if</span>(猜测 === <span class="string">'大'</span>)&#123;</span><br><span class="line">                resolve(sino)</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'error'</span>)</span><br><span class="line">                reject(sino)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(猜测 === <span class="string">'大'</span>)&#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">'error'</span>)</span><br><span class="line">                reject(sino)</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                resolve(sino)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        setTimeout(<span class="function"><span class="params">()</span>=&gt;</span>&#123;</span><br><span class="line">            resolve(sino)</span><br><span class="line">        &#125;,<span class="number">300</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="built_in">Promise</span>.all([摇色子(<span class="string">'大'</span>),摇色子(<span class="string">'大'</span>)]).then(<span class="function">(<span class="params">x</span>)=&gt;</span>&#123;<span class="built_in">console</span>.log(x)&#125;,(y)=&gt;&#123;<span class="built_in">console</span>.log(y)&#125;)</span><br></pre></td></tr></table></figure><p>promise.all里面跟一个数组，数组的每一项是一个返回promise的函数调用，then的第一个参数是所有的promise都成功后调用，拿到所有promise的结果是一个数组；第二个参数拿到的是第一个失败的值</p><ol start="2"><li>使用await<br> await是直接获取多个promise的结果的，因为Promise.all()返回的也是一个promise所以如果要使用await拿到多个promise的值，可以直接await Promise.all()</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">test</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">try</span>&#123;</span><br><span class="line">        <span class="keyword">let</span> n = <span class="keyword">await</span> <span class="built_in">Promise</span>.all([摇色子(<span class="string">'大'</span>),摇色子(<span class="string">'大'</span>)])</span><br><span class="line">        <span class="built_in">console</span>.log(n)</span><br><span class="line">    &#125;<span class="keyword">catch</span>(error)&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(error)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">test()</span><br></pre></td></tr></table></figure><ul><li>async函数会返回一个promise，并且Promise对象的状态值是resolved（成功的）</li></ul><ol><li>如果你没有在async函数中写return，那么Promise对象resolve的值就是是undefined</li></ol><p><img src="/2020/03/22/vsCode插件sftp的使用及async-await的使用等/image-20200322225755137.png" alt="image-20200322225755137"></p><ol start="2"><li>如果你写了return，那么return的值就会作为你成功的时候传入的值</li></ol><p><img src="/2020/03/22/vsCode插件sftp的使用及async-await的使用等/image-20200322225931451.png" alt="image-20200322225931451"></p><p><strong>await 等到之后，做了一件什么事情？</strong><br> 那么右侧表达式的结果，就是await要等的东西。<br> 等到之后，对于await来说，分2个情况</p><ul><li>不是promise对象</li><li>是promise对象</li></ul><blockquote><p>如果不是 promise , await会阻塞后面的代码，先执行async外面的同步代码，同步代码执行完，再回到async内部，把这个非promise的东西，作为 await表达式的结果。<br> 如果它等到的是一个 promise 对象，await 也会暂停async后面的代码，先执行async外面的同步代码，等着 Promise 对象 fulfilled，然后把 resolve 的参数作为 await 表达式的运算结果。</p></blockquote><ul><li>如果asycn里的代码都是同步的，那么这个函数被调用就会同步执行</li></ul><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'a'</span>)</span><br><span class="line">&#125;</span><br><span class="line">fn()</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'b'</span>)</span><br><span class="line"><span class="comment">//a</span></span><br><span class="line"><span class="comment">//b</span></span><br></pre></td></tr></table></figure><p>如果在await后面接的这个promsie都是同步的，后面的promise会同步执行，但是拿到这个值还是得等待（特别注意：如果promise没有一个成功的值传入，对await来说就算是失败了，下面的代码就不会执行），所以不管await后面的代码是同步还是异步，await总是需要时间，从右向左执行，先执行右侧的代码，执行完后，发现有await关键字，于是让出线程，阻塞代码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">await</span> fn()</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">&#125;</span><br><span class="line">f1()</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line"><span class="comment">//1</span></span><br><span class="line"><span class="comment">//3js</span></span><br></pre></td></tr></table></figure><p>这个代码因为fn是属于同步的，所以先打印出1，然后是3，但是因为没有resolve结果，所以await拿不到值，因此不会打印2</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">fn</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function"><span class="params">resolve</span>=&gt;</span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="number">1</span>)</span><br><span class="line">        resolve()</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">async</span> <span class="function"><span class="keyword">function</span> <span class="title">f1</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">await</span> fn()</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">2</span>)</span><br><span class="line">&#125;</span><br><span class="line">f1()</span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">3</span>)</span><br><span class="line"><span class="comment">//1</span></span><br><span class="line"><span class="comment">//3</span></span><br><span class="line"><span class="comment">//2</span></span><br></pre></td></tr></table></figure><p>这个代码与前面相比多了个resolve说明promise成功了，所以await能拿到结果，因此就是1 3 2</p><p>async/await在项目中的应用</p><p>校验验证码再执行修改验证码操作</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">async</span> validateCode() &#123;</span><br><span class="line">     <span class="keyword">var</span> _this = <span class="keyword">this</span>;</span><br><span class="line">     <span class="keyword">const</span> res1 = <span class="keyword">await</span> _this.$axios.post(</span><br><span class="line">       <span class="string">"/pc/msg/validate"</span>,</span><br><span class="line">       _this.$qs.stringify(_this.data)</span><br><span class="line">     );</span><br><span class="line">     <span class="keyword">if</span> (!res1.data.success) &#123;</span><br><span class="line">       <span class="keyword">return</span>;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">const</span> res2 = <span class="keyword">await</span> _this.$axios.post(</span><br><span class="line">       <span class="string">"/pc/account/change-phone"</span>,</span><br><span class="line">       _this.$qs.stringify(&#123;</span><br><span class="line">         accountId: _this.$store.state.userInfo.id,</span><br><span class="line">         phone: _this.data.phone</span><br><span class="line">       &#125;)</span><br><span class="line">     );</span><br><span class="line">     <span class="keyword">if</span> (res2.data.success) &#123;</span><br><span class="line">       _this.$message.success(<span class="string">"绑定号码修改成功"</span>);</span><br><span class="line">       setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">         _this.step++;</span><br><span class="line">         _this.$store.state.userInfo.linkPhone = _this.data.phone;</span><br><span class="line">         _this.validate();</span><br><span class="line">       &#125;, <span class="number">1000</span>);</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;,</span><br><span class="line">   modify(formName)&#123;</span><br><span class="line">       <span class="keyword">var</span> _this = <span class="keyword">this</span></span><br><span class="line">       _this.$refs[formName].validate(<span class="function"><span class="params">valid</span> =&gt;</span> &#123;</span><br><span class="line">           <span class="built_in">console</span>.log(valid);</span><br><span class="line">           <span class="keyword">if</span> (!valid) &#123;</span><br><span class="line">             <span class="keyword">return</span>;</span><br><span class="line">           &#125;</span><br><span class="line">           _this.validateCode();</span><br><span class="line">         &#125;);</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><h4 id="vue中内联样式加载背景图片"><a href="#vue中内联样式加载背景图片" class="headerlink" title="vue中内联样式加载背景图片"></a>vue中内联样式加载背景图片</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span> <span class="attr">style</span>=<span class="string">"background:url('../assets/images/Portal/News/time.png') no-repeat top center/82px 82px"</span>&gt;</span>官方APP<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>像这样直接加载本地图片是加载不出来的，改成网络图片的话就可以。但是我就是要加载本地背景图</p><p>解决办法</p><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"app"</span> <span class="attr">:style</span>=<span class="string">"'background: url(' + require('../assets/images/Portal/News/time.png') + ') no-repeat top center/82px 82px'"</span>&gt;</span>官方APP<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>采用require方式引入本地图片</p><h4 id="vue中引入子组件的方式"><a href="#vue中引入子组件的方式" class="headerlink" title="vue中引入子组件的方式"></a>vue中引入子组件的方式</h4><p>错误方式</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;footer&#125; <span class="keyword">from</span> <span class="string">'../footer'</span></span><br></pre></td></tr></table></figure><p>正确方式</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//方式一</span></span><br><span class="line"><span class="keyword">import</span> footer <span class="keyword">from</span> <span class="string">'../footer'</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    components:&#123;</span><br><span class="line">        <span class="string">'v-foot'</span>: footer</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//方式二</span></span><br><span class="line"><span class="keyword">const</span> footer = <span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">require</span>([<span class="string">'../components/Footer'</span>], resolve)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    components:&#123;</span><br><span class="line">        <span class="string">'v-foot'</span>: footer</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//方式三</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    components:&#123;</span><br><span class="line">        <span class="string">'v-foot'</span>:  <span class="function"><span class="params">resolve</span> =&gt;</span> <span class="built_in">require</span>([<span class="string">'../components/Footer'</span>], resolve)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;vscode插件sftp的使用及async-await&quot;&gt;&lt;a href=&quot;#vscode插件sftp的使用及async-await&quot; class=&quot;headerlink&quot; title=&quot;vscode插件sftp的使用及async/await&quot;&gt;&lt;/a&gt;vscod
      
    
    </summary>
    
    
      <category term="-vscode -async" scheme="https://shenxiaobu.github.io/tags/vscode-async/"/>
    
  </entry>
  
  <entry>
    <title>常用正则表达式</title>
    <link href="https://shenxiaobu.github.io/2020/03/19/%E5%B8%B8%E7%94%A8%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F/"/>
    <id>https://shenxiaobu.github.io/2020/03/19/常用正则表达式/</id>
    <published>2020-03-19T02:22:37.000Z</published>
    <updated>2020-03-23T01:42:56.774Z</updated>
    
    <content type="html"><![CDATA[<h2 id="常用正则表达式"><a href="#常用正则表达式" class="headerlink" title="常用正则表达式"></a>常用正则表达式</h2><h2 id="一、校验数字的表达式"><a href="#一、校验数字的表达式" class="headerlink" title="一、校验数字的表达式"></a>一、校验数字的表达式</h2><ul><li>数字：<strong>^[0-9]*$</strong></li><li>n位的数字：<strong>^\d{n}$</strong></li><li>至少n位的数字<strong>：^\d{n,}$</strong></li><li>m-n位的数字：<strong>^\d{m,n}$</strong></li><li>零和非零开头的数字：<strong>^(0|[1-9][0-9]*)$</strong></li><li>非零开头的最多带两位小数的数字：<strong>^([1-9][0-9]*)+(.[0-9]{1,2})?$</strong></li><li>带1-2位小数的正数或负数：<strong>^(-)?\d+(.\d{1,2})$</strong></li><li>正数、负数、和小数：<strong>^(-|+)?\d+(.\d+)?$</strong></li><li>有两位小数的正实数：<strong>^[0-9]+(.[0-9]{2})?$</strong></li><li>有1~3位小数的正实数：<strong>^[0-9]+(.[0-9]{1,3})?$</strong></li><li>非零的正整数：<strong>^[1-9]\d*$ 或 ^([1-9][0-9]*){1,3}$ 或 ^+?[1-9][0-9]*$</strong></li><li>非零的负整数：<strong>^-[1-9][]0-9”*$ 或 ^-[1-9]\d*$</strong></li><li>非负整数：<strong>^\d+$ 或 ^[1-9]\d*|0$</strong></li><li>非正整数：<strong>^-[1-9]\d*|0$ 或 ^((-\d+)|(0+))$</strong></li><li>非负浮点数：<strong>^\d+(.\d+)?$ 或 ^[1-9]\d*.\d*|0.\d*[1-9]\d*|0?.0+|0$</strong></li><li>非正浮点数：<strong>^((-\d+(.\d+)?)|(0+(.0+)?))$ 或 ^(-([1-9]\d*.\d*|0.\d*[1-9]\d*))|0?.0+|0$</strong></li><li>正浮点数：<strong>^[1-9]\d*.\d*|0.\d*[1-9]\d*$ 或 ^(([0-9]+.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*.[0-9]+)|([0-9]*[1-9][0-9]*))$</strong></li><li>负浮点数：<strong>^-([1-9]\d*.\d*|0.\d*[1-9]\d*)$ 或 ^(-(([0-9]+.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*.[0-9]+)|([0-9]*[1-9][0-9]*)))$</strong></li><li>浮点数：<strong>^(-?\d+)(.\d+)?$ 或 ^-?([1-9]\d*.\d*|0.\d*[1-9]\d*|0?.0+|0)$</strong></li></ul><hr><h2 id="校验字符的表达式"><a href="#校验字符的表达式" class="headerlink" title="校验字符的表达式"></a>校验字符的表达式</h2><ul><li>汉字：<strong>^[\u4e00-\u9fa5]{0,}$</strong></li><li>英文和数字：<strong>^[A-Za-z0-9]+$ 或 ^[A-Za-z0-9]{4,40}$</strong></li><li>长度为3-20的所有字符：<strong>^.{3,20}$</strong></li><li>由26个英文字母组成的字符串：<strong>^[A-Za-z]+$</strong></li><li>由26个大写英文字母组成的字符串：<strong>^[A-Z]+$</strong></li><li>由26个小写英文字母组成的字符串：<strong>^[a-z]+$</strong></li><li>由数字和26个英文字母组成的字符串：<strong>^[A-Za-z0-9]+$</strong></li><li>由数字、26个英文字母或者下划线组成的字符串：<strong>^\w+$ 或 ^\w{3,20}$</strong></li><li>中文、英文、数字包括下划线：<strong>^[\u4E00-\u9FA5A-Za-z0-9_]+$</strong></li><li>中文、英文、数字但不包括下划线等符号：<strong>^[\u4E00-\u9FA5A-Za-z0-9]+$ 或 ^[\u4E00-\u9FA5A-Za-z0-9]{2,20}$</strong></li><li>可以输入含有^%&amp;’,;=?$\”等字符：<strong>[^%&amp;’,;=?$\x22]+</strong></li><li>禁止输入含有~的字符：<strong>[^~\x22]+</strong></li></ul><hr><h2 id="三、特殊需求表达式"><a href="#三、特殊需求表达式" class="headerlink" title="三、特殊需求表达式"></a>三、特殊需求表达式</h2><ul><li>Email地址：<strong>^\w+([-+.]\w+)*@\w+([-.]\w+)*.\w+([-.]\w+)*$</strong></li><li>域名：<strong>[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+.?</strong></li><li>InternetURL：<strong>[a-zA-z]+://[^\s]* 或 ^http://([\w-]+.)+[\w-]+(/[\w-./?%&amp;=]*)?$</strong></li><li>手机号码：<strong>^(13[0-9]|14[5|7]|15[0|1|2|3|4|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$</strong></li><li>电话号码(“XXX-XXXXXXX”、”XXXX-XXXXXXXX”、”XXX-XXXXXXX”、”XXX-XXXXXXXX”、”XXXXXXX”和”XXXXXXXX)：<strong>^((\d{3,4}-)|\d{3.4}-)?\d{7,8}$</strong></li><li>国内电话号码(0511-4405222、021-87888822)：<strong>\d{3}-\d{8}|\d{4}-\d{7}</strong></li><li>电话号码正则表达式（支持手机号码，3-4位区号，7-8位直播号码，1－4位分机号）: <strong>((\d{11})|^((\d{7,8})|(\d{4}|\d{3})-(\d{7,8})|(\d{4}|\d{3})-(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1})|(\d{7,8})-(\d{4}|\d{3}|\d{2}|\d{1}))$)</strong></li><li>身份证号(15位、18位数字)，最后一位是校验位，可能为数字或字符X：<strong>(^\d{15}$)|(^\d{18}$)|(^\d{17}(\d|X|x)$)</strong></li><li>帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)：<strong>^[a-zA-Z][a-zA-Z0-9_]{4,15}$</strong></li><li>密码(以字母开头，长度在6~18之间，只能包含字母、数字和下划线)：<strong>^[a-zA-Z]\w{5,17}$</strong></li><li>强密码(必须包含大小写字母和数字的组合，不能使用特殊字符，长度在 8-10 之间)：<strong>^(?=.*\d)(?=.*[a-z])(?=.*[A-Z])[a-zA-Z0-9]{8,10}$</strong></li><li>强密码(必须包含大小写字母和数字的组合，可以使用特殊字符，长度在8-10之间)：<strong>^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,10}$</strong></li><li>日期格式：<strong>^\d{4}-\d{1,2}-\d{1,2}</strong></li><li>一年的12个月(01～09和1～12)：<strong>^(0?[1-9]|1[0-2])$</strong></li><li>一个月的31天(01～09和1～31)：<strong>^((0?[1-9])|((1|2)[0-9])|30|31)$</strong></li><li>钱的输入格式：<ol><li>有四种钱的表示形式我们可以接受:”10000.00” 和 “10,000.00”, 和没有 “分” 的 “10000” 和 “10,000”：<strong>^[1-9][0-9]*$</strong></li><li>这表示任意一个不以0开头的数字,但是,这也意味着一个字符”0”不通过,所以我们采用下面的形式：<strong>^(0|[1-9][0-9]*)$</strong></li><li>一个0或者一个不以0开头的数字.我们还可以允许开头有一个负号：<strong>^(0|-?[1-9][0-9]*)$</strong></li><li>这表示一个0或者一个可能为负的开头不为0的数字.让用户以0开头好了.把负号的也去掉,因为钱总不能是负的吧。下面我们要加的是说明可能的小数部分：<strong>^[0-9]+(.[0-9]+)?$</strong></li><li>必须说明的是,小数点后面至少应该有1位数,所以”10.”是不通过的,但是 “10” 和 “10.2” 是通过的：<strong>^[0-9]+(.[0-9]{2})?$</strong></li><li>这样我们规定小数点后面必须有两位,如果你认为太苛刻了,可以这样：<strong>^[0-9]+(.[0-9]{1,2})?$</strong></li><li>这样就允许用户只写一位小数.下面我们该考虑数字中的逗号了,我们可以这样：<strong>^[0-9]{1,3}(,[0-9]{3})*(.[0-9]{1,2})?$</strong></li><li>1到3个数字,后面跟着任意个 逗号+3个数字,逗号成为可选,而不是必须：<strong>^([0-9]+|[0-9]{1,3}(,[0-9]{3})*)(.[0-9]{1,2})?$</strong></li><li>备注：这就是最终结果了,别忘了”+”可以用”*”替代如果你觉得空字符串也可以接受的话(奇怪,为什么?)最后,别忘了在用函数时去掉去掉那个反斜杠,一般的错误都在这里</li></ol></li><li>xml文件：<strong>^([a-zA-Z]+-?)+[a-zA-Z0-9]+\.[x|X][m|M][l|L]$</strong></li><li>中文字符的正则表达式：<strong>[\u4e00-\u9fa5]</strong></li><li>双字节字符：<strong>[^\x00-\xff] (包括汉字在内，可以用来计算字符串的长度(一个双字节字符长度计2，ASCII字符计1))</strong></li><li>空白行的正则表达式：<strong>\n\s*\r (可以用来删除空白行)</strong></li><li>HTML标记的正则表达式：<strong>&lt;(\S*?)[^&gt;]*&gt;.*?|&lt;.*? /&gt; ( 首尾空白字符的正则表达式：^\s*|\s*$或(^\s*)|(\s*$) (可以用来删除行首行尾的空白字符(包括空格、制表符、换页符等等)，非常有用的表达式)</strong></li><li>腾讯QQ号：<strong>[1-9][0-9]{4,} (腾讯QQ号从10000开始)</strong></li><li>中国邮政编码：<strong>[1-9]\d{5}(?!\d) (中国邮政编码为6位数字)</strong></li><li>IP地址：<strong>((?:(?:25[0-5]|2[0-4]\d|[01]?\d?\d)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d?\d))</strong></li></ul>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h2 id=&quot;常用正则表达式&quot;&gt;&lt;a href=&quot;#常用正则表达式&quot; class=&quot;headerlink&quot; title=&quot;常用正则表达式&quot;&gt;&lt;/a&gt;常用正则表达式&lt;/h2&gt;&lt;h2 id=&quot;一、校验数字的表达式&quot;&gt;&lt;a href=&quot;#一、校验数字的表达式&quot; class=&quot;head
      
    
    </summary>
    
    
      <category term="-RegExp -js" scheme="https://shenxiaobu.github.io/tags/RegExp-js/"/>
    
  </entry>
  
  <entry>
    <title>多个请求下加载的展示与关闭</title>
    <link href="https://shenxiaobu.github.io/2020/03/12/%E5%A4%9A%E4%B8%AA%E8%AF%B7%E6%B1%82%E4%B8%8B%E5%8A%A0%E8%BD%BD%E7%9A%84%E5%B1%95%E7%A4%BA%E4%B8%8E%E5%85%B3%E9%97%AD/"/>
    <id>https://shenxiaobu.github.io/2020/03/12/多个请求下加载的展示与关闭/</id>
    <published>2020-03-12T13:50:11.000Z</published>
    <updated>2020-03-22T13:49:33.135Z</updated>
    
    <content type="html"><![CDATA[<h4 id="多个请求下加载的展示与关闭"><a href="#多个请求下加载的展示与关闭" class="headerlink" title="多个请求下加载的展示与关闭"></a>多个请求下加载的展示与关闭</h4><p>问题：发送请求前加个 遮罩层，请求结束时关闭遮罩层</p><p>解决： 采用饿了吗的组件 实现遮罩层的开启与关闭</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//开启</span></span><br><span class="line"><span class="keyword">const</span> loading = <span class="keyword">this</span>.$loading(&#123;</span><br><span class="line">          lock: <span class="literal">true</span>,</span><br><span class="line">          text: <span class="string">'Loading'</span>,</span><br><span class="line">          spinner: <span class="string">'el-icon-loading'</span>,</span><br><span class="line">          background: <span class="string">'rgba(0, 0, 0, 0.7)'</span></span><br><span class="line">        &#125;);</span><br><span class="line"><span class="comment">//关闭</span></span><br><span class="line"> loading.close();</span><br></pre></td></tr></table></figure><p>残留问题 一个页面同时发送多个请求时，每个请求都得写一遍，繁琐，而且繁琐的情况下还有bug</p><p>bug：当一个请求结束 别的请求未结束时 遮罩层被关闭了。</p><p>解决：在 app.vue配置一个全局loading</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">//app.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;router-view /&gt;</span><br><span class="line">    &lt;div</span><br><span class="line">      v-show=&quot;$store.state.isShowLoading&quot;</span><br><span class="line">      class=&quot;el-loading-mask is-fullscreen&quot;</span><br><span class="line">      style=&quot;background-color: rgba(0, 0, 0, 0.7); z-index: 2000;&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;div class=&quot;el-loading-spinner&quot;&gt;</span><br><span class="line">        &lt;i class=&quot;el-icon-loading&quot;&gt;&lt;/i&gt;</span><br><span class="line">        &lt;p class=&quot;el-loading-text&quot; ref=&quot;tips&quot;&gt;正在加载&lt;/p&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><p>如果要问这个 加载的是怎么来的？那我告诉你</p><p>因为我们是有用 element组件的，所以代码上打出 一个 loading 的界面，然后不要关闭 loading</p><p>审查元素，把这个遮罩层的元素都拿过来就好了。</p><p>还有另一种方法就是在弹出 loading的 时候在控制台输入 debugger 回车，loading也不会关闭</p><p>如果还是debugger拦截不到的话 就在控制台把网速 调成  slow-3g</p><p><img src="/2020/03/12/多个请求下加载的展示与关闭/1584021890068.png" alt="1584021890068"></p><p><img src="/2020/03/12/多个请求下加载的展示与关闭/1584021997454.png" alt="1584021997454"></p><p>这样就拿到了上面的元素</p><p>言归正传</p><p>在axios上设置拦截</p><p>上面的代码看到了是用 store.state.isShowLoading 控制是否显示的，一开始是用 全局变量 </p><p>Vue.prototype.isShowLoading  但是发现app上的 .isShowLoading 一直都是false，并不会</p><p>随时更改，后面就用vuex的store</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//vuex index.js</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"><span class="keyword">const</span> sessionStorageState = sessionStorage.getItem(<span class="string">'state'</span>)</span><br><span class="line"><span class="keyword">let</span> state</span><br><span class="line"><span class="keyword">if</span> (sessionStorageState) &#123;</span><br><span class="line">  state = <span class="built_in">JSON</span>.parse(sessionStorageState)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    isShowLoading: <span class="literal">false</span>, <span class="comment">//是否展示加载框</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> VueX = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state,</span><br><span class="line">  mutations: &#123;&#125;,</span><br><span class="line">  actions: &#123;&#125;,</span><br><span class="line">  modules: &#123;&#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> VueX</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//axios index.js</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'../store/index'</span></span><br><span class="line"><span class="keyword">import</span> qs <span class="keyword">from</span> <span class="string">'qs'</span></span><br><span class="line">Vue.prototype.$axios = axios</span><br><span class="line">Vue.prototype.$qs = qs</span><br><span class="line">Vue.prototype.BASE_URL = <span class="string">"默认请求地址"</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//解决本地调试跨域问题,使用 "/api"实现代理  配置请看 Vue.config.js</span></span><br><span class="line">axios.defaults.baseURL = process.env.NODE_ENV === <span class="string">'development'</span> ? <span class="string">'/api'</span> : Vue.prototype.BASE_URL</span><br><span class="line">axios.defaults.headers.post[<span class="string">'Content-Type'</span>] = <span class="string">'application/x-www-form-urlencoded;charset=utf-8'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加请求拦截器</span></span><br><span class="line">axios.interceptors.request.use(</span><br><span class="line">  <span class="comment">// 在发送请求之前做些什么</span></span><br><span class="line">  config =&gt; &#123;</span><br><span class="line">    store.state.isShowLoading = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">  &#125;,</span><br><span class="line">  error =&gt; &#123;</span><br><span class="line">    store.state.isShowLoading = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加响应拦截器</span></span><br><span class="line">axios.interceptors.response.use(</span><br><span class="line">  <span class="comment">// 响应成功</span></span><br><span class="line">  response =&gt; &#123;</span><br><span class="line">      store.state.isShowLoading = <span class="literal">false</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 响应失败</span></span><br><span class="line">  error =&gt; &#123;</span><br><span class="line">    store.state.isShowLoading = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>这个拦截器的功能是在请求前打开 loading，请求结束或出错时关闭 loading。<br>如果每次只有一个请求，这样运行是没问题的。但同时有多个请求并发，就会出现和前面说的一样的问题了。</p><p>举例：</p><p>假如现在同时发起两个请求，在请求前，拦截器 store.state.isShowLoading = true 将 loading 打开。<br>现在有一个请求结束了。store.state.isShowLoading = false 拦截器关闭 loading，但是另一个请求由于某些原因并没有结束。<br>造成的后果就是页面请求还没完成，loading 却关闭了，用户会以为页面加载完成了，结果页面不能正常运行，导致用户体验不好。</p><p><strong>解决方案</strong><br>在vuex上增加一个 <code>loadingCount</code> 变量，用来计算请求的次数。</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//vuex index.js</span></span><br><span class="line">state = &#123;</span><br><span class="line">    isShowLoading: <span class="literal">false</span>, <span class="comment">//是否展示加载框</span></span><br><span class="line">    loadingCount: <span class="number">0</span>,<span class="comment">//请求的数量</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当有请求的时候loadingCount++，当请求报错的时候 直接 loadingCount = 0，isShowLoading = false</p><p>响应结束时 loadingCount–  当loadingCount == 0  将 isShowLoading 设置成false  或者 响应报错时</p><p>将 loadingCount 设为 0     isShowLoading 设置成false</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//axios index.js</span></span><br><span class="line">axios.interceptors.request.use(</span><br><span class="line">  <span class="comment">// 在发送请求之前做些什么</span></span><br><span class="line">  config =&gt; &#123;</span><br><span class="line">    store.state.isShowLoading = <span class="literal">true</span></span><br><span class="line">    store.state.loadingCount++</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'请求了'</span> + store.state.loadingCount)</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">  &#125;,</span><br><span class="line">  error =&gt; &#123;</span><br><span class="line">    store.state.isShowLoading = <span class="literal">false</span></span><br><span class="line">    store.state.loadingCount = <span class="number">0</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加响应拦截器</span></span><br><span class="line">axios.interceptors.response.use(</span><br><span class="line">  <span class="comment">// 响应成功</span></span><br><span class="line">  response =&gt; &#123;</span><br><span class="line">    store.state.loadingCount--</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'响应后还有'</span> + store.state.loadingCount)</span><br><span class="line">    <span class="keyword">if</span> (store.state.loadingCount == <span class="number">0</span>) &#123;</span><br><span class="line">      store.state.isShowLoading = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">     <span class="keyword">return</span> response</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 响应失败</span></span><br><span class="line">  error =&gt; &#123;</span><br><span class="line">    store.state.isShowLoading = <span class="literal">false</span></span><br><span class="line">    store.state.loadingCount = <span class="number">0</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>个拦截器的功能是：<br>每当发起一个请求，打开 loading，同时 loadingCount 加1。<br>每当一个请求结束， loadingCount 减1，并判断 loadingCount 是否为 0，如果为 0，则关闭 loading。<br>这样即可解决，多个请求下有某个请求提前结束，导致 loading 关闭的问题。</p><p>即使这样还是不能满足开发需求，因为提示语被固定了，其实我早有准备，看到最前面的代码中那个</p><p>refs=”tips“ 了没？早就准备好用refs改变tips了</p><p>在请求之前 使用 this.$refs.tips.innerHtml = “想要的提示语”</p><p>发现并不能改，于是打印  this.$refs.tips  结果显示undefined，所以组件上并不能获得 父组件甚</p><p>至爷爷级组件的 ref。 所以想到了 使用  $bus 。</p><p>在子组件上触发改变提示语的 方法，在 app.vue上 接收这个方法，并改变内容</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//子组件</span></span><br><span class="line"><span class="keyword">this</span>.$bus.$emit(<span class="string">"changeTips"</span>,<span class="string">"想改的内容"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//app.vue</span></span><br><span class="line"><span class="keyword">this</span>.$bus.$on(<span class="string">"changeTips"</span>, val =&gt; &#123;</span><br><span class="line"><span class="keyword">this</span>.$refs.tips.innerHTML = val</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure><p>这样的话就实现了 更改 提示语的要求，但是发现改完之后别的 请求的提示语没变回来，所以就需要在请求结束之后将提示语改回来。</p><p>所以在axios上使用$bus的emit方法 将文字改回来</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//axios index.js方法</span></span><br><span class="line"><span class="comment">//请求报错时，响应结束时，响应报错时 添加下面语句</span></span><br><span class="line">Vue.prototype.$bus.$emit(<span class="string">"changeTips"</span>,<span class="string">"1234154"</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//使用 $bus 前提是 有引入 ，在main.js上</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">'./App'</span></span><br><span class="line"><span class="keyword">import</span> router <span class="keyword">from</span> <span class="string">'./router/index'</span> <span class="comment">// 全局 路由 配置</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'./store/index'</span> <span class="comment">//   全局 状态 配置</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./mixin/mixin'</span> <span class="comment">//              全局 mixin 注入 配置</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./plugins/element-ui'</span> <span class="comment">//       全局 element-ui 配置</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./plugins/view-design'</span> <span class="comment">//      全局 view-design 配置</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./plugins/vue-scroll'</span> <span class="comment">//       全局 vue-scroll 配置</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./plugins/infinite-scroll'</span> <span class="comment">//  全局 infinite-scroll 无限滚动 配置</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./plugins/date-format'</span> <span class="comment">//      全局 注入时间处理工具</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">'./axios/index'</span> <span class="comment">//              全局 axios 配置</span></span><br><span class="line">Vue.prototype.$bus = <span class="keyword">new</span> Vue()    <span class="comment">//使用$bus  </span></span><br><span class="line">Vue.config.productionTip = <span class="literal">false</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  router,</span><br><span class="line">  store,</span><br><span class="line">  render: <span class="function"><span class="params">h</span> =&gt;</span> h(App),</span><br><span class="line">&#125;).$mount(<span class="string">'#app'</span>)</span><br></pre></td></tr></table></figure><p>不知道为什么 axios是在 定义$bus之前的，但是在 axios上 可以使用 $bus.  可能是new出来的原因吧</p><p>有人会说多个请求时 修改提示语，中途会被别的请求给覆盖回去，这个说法是对的，但是同时会有多个</p><p>请求的时候一般都是加载数据，只有单个请求时才会修改提示语。例如 修改数据，提交数据，删除数据等等</p><p>所以加载数据时无需更改提示语</p><p>但是感觉控制显示隐藏使用  vuex ，控制提示语 使用 $bus有点不协调，后面在vuex里 加了个提示语的变量</p><p>统一都用vuex</p><p>最终 app.vue如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//vuex index.js</span></span><br><span class="line">state = &#123;</span><br><span class="line">    isShowLoading: <span class="literal">false</span>, <span class="comment">//是否展示加载框</span></span><br><span class="line">    loadingCount: <span class="number">0</span>,<span class="comment">//请求的数量</span></span><br><span class="line">    tips: <span class="string">'正在加载'</span>, <span class="comment">//加载提示语</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--app.vue--&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;router-view /&gt;</span><br><span class="line">    &lt;div</span><br><span class="line">      v-show=&quot;$store.state.isShowLoading&quot;</span><br><span class="line">      class=&quot;el-loading-mask is-fullscreen&quot;</span><br><span class="line">      style=&quot;background-color: rgba(0, 0, 0, 0.7); z-index: 2000;&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;div class=&quot;el-loading-spinner&quot;&gt;</span><br><span class="line">        &lt;i class=&quot;el-icon-loading&quot;&gt;&lt;/i&gt;</span><br><span class="line">        &lt;p class=&quot;el-loading-text&quot; ref=&quot;tips&quot;&gt;&#123;&#123; $store.state.tips &#125;&#125;&lt;/p&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//axios index.js</span></span><br><span class="line">axios.interceptors.request.use(</span><br><span class="line">  <span class="comment">// 在发送请求之前做些什么</span></span><br><span class="line">  config =&gt; &#123;</span><br><span class="line">    store.state.isShowLoading = <span class="literal">true</span></span><br><span class="line">    store.state.loadingCount++</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'请求了'</span> + store.state.loadingCount)</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">  &#125;,</span><br><span class="line">  error =&gt; &#123;</span><br><span class="line">    store.state.isShowLoading = <span class="literal">false</span></span><br><span class="line">    store.state.loadingCount = <span class="number">0</span></span><br><span class="line">    store.state.tips = <span class="string">'正在加载'</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加响应拦截器</span></span><br><span class="line">axios.interceptors.response.use(</span><br><span class="line">  <span class="comment">// 响应成功</span></span><br><span class="line">  response =&gt; &#123;</span><br><span class="line">    store.state.loadingCount--</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'响应后还有'</span> + store.state.loadingCount)</span><br><span class="line">    <span class="keyword">if</span> (store.state.loadingCount == <span class="number">0</span>) &#123;</span><br><span class="line">      store.state.tips = <span class="string">'正在加载'</span></span><br><span class="line">      store.state.isShowLoading = <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">   <span class="keyword">return</span> response</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 响应失败</span></span><br><span class="line">  error =&gt; &#123;</span><br><span class="line">    store.state.isShowLoading = <span class="literal">false</span></span><br><span class="line">    store.state.loadingCount = <span class="number">0</span></span><br><span class="line">    store.state.tips = <span class="string">'正在加载'</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//请求前需要修改提示语的地方</span></span><br><span class="line"><span class="keyword">this</span>.$store.state.tips = <span class="string">"想要的提示语"</span></span><br></pre></td></tr></table></figure><p>这样按理说其实就是结束了 </p><p>但是由于有使用 session缓存，当有缓存时时从 session拿数据保存到state的。</p><p>所以偶尔出现 loadingCount 不是为0的情况，所以加了个 保存到session之前将 loadingCount 设置为0</p><p>isShowLoading设置为false，这个情况让我一直摸不着 找了挺久问题的。loading一直关不掉，才有上面每次</p><p>请求和响应时打印  loadingCount </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--app.vue--&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;router-view /&gt;</span><br><span class="line">    &lt;div</span><br><span class="line">      v-show=&quot;$store.state.isShowLoading&quot;</span><br><span class="line">      class=&quot;el-loading-mask is-fullscreen&quot;</span><br><span class="line">      style=&quot;background-color: rgba(0, 0, 0, 0.7); z-index: 2000;&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;div class=&quot;el-loading-spinner&quot;&gt;</span><br><span class="line">        &lt;i class=&quot;el-icon-loading&quot;&gt;&lt;/i&gt;</span><br><span class="line">        &lt;p class=&quot;el-loading-text&quot; ref=&quot;tips&quot;&gt;&#123;&#123; $store.state.tips &#125;&#125;&lt;/p&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &apos;App&apos;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    //监听页面刷新，页面刷新时将 vuex 的数据存储起来</span><br><span class="line">    window.addEventListener(&apos;unload&apos;, this.saveState)</span><br><span class="line">    //页面加载完清除sessionStorage中的 state</span><br><span class="line">    window.addEventListener(&apos;load&apos;, () =&gt; &#123;</span><br><span class="line">      console.log(&apos;load加载完成&apos;)</span><br><span class="line">      //清除state</span><br><span class="line">      sessionStorage.removeItem(&apos;state&apos;)</span><br><span class="line">      //清除所有</span><br><span class="line">      // sessionStorage.clear();</span><br><span class="line">    &#125;)</span><br><span class="line">    console.log(this.$store.state.loadingCount)</span><br><span class="line">    console.log(this.$store.state.isShowLoading)</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    //将vuex 的数据 存储到浏览器缓存</span><br><span class="line">    saveState() &#123;</span><br><span class="line">      console.log(&apos;页面刷新&apos;)</span><br><span class="line">      //存之前将 一些变量重置下</span><br><span class="line">      this.$store.state.isShowLoading = false</span><br><span class="line">      this.$store.state.loadingCount = 0</span><br><span class="line">      this.$store.state.tips = &quot;正在加载&quot;</span><br><span class="line">      sessionStorage.setItem(&apos;state&apos;, JSON.stringify(this.$store.state))</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">@import &apos;./assets/styles/reset.css&apos;;</span><br><span class="line">@import &apos;./assets/styles/commons.css&apos;;</span><br><span class="line">#app &#123;</span><br><span class="line">  width: 100%;</span><br><span class="line">  height: 100%;</span><br><span class="line">  -webkit-font-smoothing: antialiased;</span><br><span class="line">  -moz-osx-font-smoothing: grayscale;</span><br><span class="line">&#125;</span><br><span class="line">/* </span><br><span class="line">  AdminInvoiceManageDeliveryAddress 寄送地址页面的 选择地区 el-cascader的样式</span><br><span class="line">*/</span><br><span class="line">.el-cascader-panel &#123;</span><br><span class="line">  height: 300px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>看到了  el-cascader，下一篇我们就讲这个</p><p>刚弄完就遇到同事说 他有个地方轮询了，不需要这个加载画面，说可以配置一下吗？</p><p>答案肯定是可以的，于是</p><ol><li>在vuex里面再加个变量  mustShowLoading  设置为 true</li><li>请求拦截那里 设置 当mustShowLoading为true时才打开加载窗口</li><li>将mustShowLoading设置为true</li><li>不需要加载画面的窗口 请求前将mustShowLoading 设为false</li></ol><p>代码如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//store index.js</span></span><br><span class="line">state = &#123;</span><br><span class="line">    isShowLoading: <span class="literal">false</span>, <span class="comment">//是否展示加载框</span></span><br><span class="line">    loadingCount: <span class="number">0</span>, <span class="comment">//请求的数量</span></span><br><span class="line">    tips: <span class="string">'正在加载'</span>, <span class="comment">//加载提示语</span></span><br><span class="line">    mustShowLoading: <span class="literal">true</span>, <span class="comment">//是否请求开启 loading</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//axios index.js</span></span><br><span class="line"><span class="comment">// 添加请求拦截器</span></span><br><span class="line">axios.interceptors.request.use(</span><br><span class="line">  <span class="comment">// 在发送请求之前做些什么</span></span><br><span class="line">  config =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (store.state.mustShowLoading) &#123;</span><br><span class="line">      store.state.isShowLoading = <span class="literal">true</span></span><br><span class="line">      store.state.loadingCount++</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'请求了'</span> + store.state.loadingCount)</span><br><span class="line">    &#125;</span><br><span class="line">    store.state.mustShowLoading = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">  &#125;,</span><br><span class="line">  error =&gt; &#123;</span><br><span class="line">    store.state.isShowLoading = <span class="literal">false</span></span><br><span class="line">    store.state.loadingCount = <span class="number">0</span></span><br><span class="line">    store.state.mustShowLoading = <span class="literal">true</span></span><br><span class="line">    store.state.tips = <span class="string">'正在加载'</span></span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>一开始是这样的，结果忘记后面响应时 是有将 count– 的，导致 count不会等于 0 导致加载框去不掉</p><p>最终方案</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//axios.js</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'../store/index'</span></span><br><span class="line"><span class="keyword">import</span> &#123; message &#125; <span class="keyword">from</span> <span class="string">'@/assets/js/resetMessage'</span></span><br><span class="line"><span class="keyword">import</span> qs <span class="keyword">from</span> <span class="string">'qs'</span></span><br><span class="line"></span><br><span class="line">Vue.prototype.$axios = axios</span><br><span class="line">Vue.prototype.$qs = qs</span><br><span class="line">Vue.prototype.FILE_PATH = <span class="string">'http://img.test.zhishangsoft.com/charge/file/'</span></span><br><span class="line">Vue.prototype.IMG_PATH = <span class="string">'http://img.test.zhishangsoft.com/charge/images/'</span></span><br><span class="line">Vue.prototype.BASE_URL = <span class="string">'http://47.99.240.206:9071'</span></span><br><span class="line">axios.defaults.baseURL = process.env.NODE_ENV === <span class="string">'development'</span> ? <span class="string">'/api'</span> : Vue.prototype.BASE_URL</span><br><span class="line">axios.defaults.headers.post[<span class="string">'Content-Type'</span>] = <span class="string">'application/x-www-form-urlencoded;charset=utf-8'</span></span><br><span class="line"><span class="comment">// 添加请求拦截器</span></span><br><span class="line">axios.interceptors.request.use(</span><br><span class="line">  <span class="comment">// 在发送请求之前做些什么</span></span><br><span class="line">  config =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> accountId = store.state.accountId</span><br><span class="line">    <span class="keyword">let</span> token = store.state.token</span><br><span class="line">    <span class="keyword">if</span> (token) &#123;</span><br><span class="line">      <span class="comment">// 判断是否存在token，如果存在的话，则每个http header都加上token</span></span><br><span class="line">      config.headers.common.token = <span class="string">`<span class="subst">$&#123;token&#125;</span>`</span></span><br><span class="line">      config.headers.common.accountId = <span class="string">`<span class="subst">$&#123;accountId&#125;</span>`</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (store.state.mustShowLoading) &#123;</span><br><span class="line">      store.state.isShowLoading = <span class="literal">true</span></span><br><span class="line">      store.state.loadingCount++</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'请求了'</span> + store.state.loadingCount)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">  &#125;,</span><br><span class="line">  error =&gt; &#123;</span><br><span class="line">    store.state.isShowLoading = <span class="literal">false</span></span><br><span class="line">    store.state.loadingCount = <span class="number">0</span></span><br><span class="line">    store.state.mustShowLoading = <span class="literal">true</span></span><br><span class="line">    store.state.tips = <span class="string">'正在加载'</span></span><br><span class="line">    message.error(<span class="string">'请求失败'</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加响应拦截器</span></span><br><span class="line">axios.interceptors.response.use(</span><br><span class="line">  <span class="comment">// 响应成功</span></span><br><span class="line">  response =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (store.state.loadingCount &gt; <span class="number">0</span>) &#123;</span><br><span class="line">      store.state.loadingCount--</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">'响应后还有'</span> + store.state.loadingCount)</span><br><span class="line">      <span class="keyword">if</span> (store.state.loadingCount == <span class="number">0</span>) &#123;</span><br><span class="line">        store.state.tips = <span class="string">'正在加载'</span></span><br><span class="line">        store.state.isShowLoading = <span class="literal">false</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    store.state.mustShowLoading = <span class="literal">true</span></span><br><span class="line">    <span class="keyword">if</span> (response.data.code === <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> response</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (response.data.code === <span class="number">0</span>) &#123;</span><br><span class="line">      message.error(response.data.info)</span><br><span class="line">      <span class="keyword">return</span> response</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 响应失败</span></span><br><span class="line">  error =&gt; &#123;</span><br><span class="line">    store.state.isShowLoading = <span class="literal">false</span></span><br><span class="line">    store.state.loadingCount = <span class="number">0</span></span><br><span class="line">    store.state.mustShowLoading = <span class="literal">true</span></span><br><span class="line">    store.state.tips = <span class="string">'正在加载'</span></span><br><span class="line">    message.error(<span class="string">'响应失败啦'</span>)</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;多个请求下加载的展示与关闭&quot;&gt;&lt;a href=&quot;#多个请求下加载的展示与关闭&quot; class=&quot;headerlink&quot; title=&quot;多个请求下加载的展示与关闭&quot;&gt;&lt;/a&gt;多个请求下加载的展示与关闭&lt;/h4&gt;&lt;p&gt;问题：发送请求前加个 遮罩层，请求结束时关闭遮罩层&lt;
      
    
    </summary>
    
    
      <category term="-vue -element" scheme="https://shenxiaobu.github.io/tags/vue-element/"/>
    
  </entry>
  
  <entry>
    <title>页面刷新后vuex数据消失问题，以及登录token啥的</title>
    <link href="https://shenxiaobu.github.io/2020/02/29/%E9%A1%B5%E9%9D%A2%E5%88%B7%E6%96%B0%E5%90%8Evuex%E6%95%B0%E6%8D%AE%E6%B6%88%E5%A4%B1%E9%97%AE%E9%A2%98%EF%BC%8C%E4%BB%A5%E5%8F%8A%E7%99%BB%E5%BD%95token%E5%95%A5%E7%9A%84/"/>
    <id>https://shenxiaobu.github.io/2020/02/29/页面刷新后vuex数据消失问题，以及登录token啥的/</id>
    <published>2020-02-29T08:53:29.000Z</published>
    <updated>2020-03-23T01:42:56.774Z</updated>
    
    <content type="html"><![CDATA[<h4 id="页面刷新后vuex数据消失问题，以及登录成功后设置请求头，跨域问题"><a href="#页面刷新后vuex数据消失问题，以及登录成功后设置请求头，跨域问题" class="headerlink" title="页面刷新后vuex数据消失问题，以及登录成功后设置请求头，跨域问题"></a>页面刷新后vuex数据消失问题，以及登录成功后设置请求头，跨域问题</h4><p>问题：vue项目肯定少不了使用vuex保存数据，但是vuex保存的数据只要页面一刷新，vuex的数据就初始化了。</p><h2 id="1-产生原因"><a href="#1-产生原因" class="headerlink" title="1. 产生原因"></a>1. 产生原因</h2><p>其实很简单，因为store里的数据是保存在运行内存中的,当页面刷新时，页面会重新加载vue实例，store里面的数据就会被重新赋值。</p><h4 id="2-解决思路"><a href="#2-解决思路" class="headerlink" title="2 解决思路"></a>2 解决思路</h4><p>1 一种是state里的数据全部是通过请求来触发action或mutation来改变</p><p>2 一种是将state里的数据保存一份到本地存储(localStorage、sessionStorage、cookie）中</p><p>很显然，第一种方案基本不可行，除非项目很小或者vuex存储的数据很少。而第二种可以保证刷新页面数据不丢失且易于读取。</p><h4 id="3-解决过程"><a href="#3-解决过程" class="headerlink" title="3 解决过程"></a>3 解决过程</h4><p>1 首先得选择合适的客户端存储</p><p>localStorage是永久存储在本地，除非你主动去删除;</p><p>sessionStorage是存储到当前页面关闭为止;</p><p>cookie则根据你设置的有效时间来存储，但缺点是不能储存大数据且不易读取。</p><p>我选择的是sessionStorage,选择的原因vue是单页面应用，操作都是在一个页面跳转路由，另一个原因是sessionStorage可以保证打开页面时sessionStorage的数据为空，而如果是localStorage则会读取上一次打开页面的数据。</p><p>2 然后是怎么用sessionStorage来保存state里的数据。</p><h5 id="第一种方案"><a href="#第一种方案" class="headerlink" title="第一种方案"></a>第一种方案</h5><p>由于state里的数据是响应式，所以sessionStorage存储也要跟随变化。又由于vuex规定所有state里数据必须通过mutation方法来修改，所以第一种方案就是mutation修改state的同时修改sessionStorage对应存储的属性</p><h5 id="第二种方案"><a href="#第二种方案" class="headerlink" title="第二种方案"></a>第二种方案</h5><p>第一种方案确实可以解决问题，但这种方法很明显让人觉得怪异，都这样了，那不如直接用sessionStorage来做状态管理。</p><p>那怎么才能不用每次修改state时同时也要修改sessionStorage呢？这时我们可以换一个思路，因为我们是只有在刷新页面时才会丢失state里的数据，那有没有办法在点击页面刷新时先将state数据保存到sessionStorage,然后才真正刷新页面?</p><p>当然有，beforeunload这个事件在页面刷新时先触发的。那这个事件应该在哪里触发呢？我们总不能每个页面都监听这个事件，所以我选择放在app.vue这个入口组件中，这样就可以保证每次刷新页面都可以触发。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--app.vue--&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;router-view /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &apos;App&apos;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    //监听页面刷新，页面刷新时将 vuex 的数据存储起来  使用 beforeunload 或 unload 都可以</span><br><span class="line">    window.addEventListener(&apos;unload&apos;, this.saveState)</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    //将vuex 的数据 存储到浏览器缓存</span><br><span class="line">    saveState() &#123;</span><br><span class="line">      console.log(&apos;页面刷新&apos;)</span><br><span class="line">      //存之前将 一些变量重置下</span><br><span class="line">      this.$store.state.isShowLoading = false</span><br><span class="line">      this.$store.state.loadingCount = 0</span><br><span class="line">      this.$store.state.tips = &quot;正在加载&quot;</span><br><span class="line">      sessionStorage.setItem(&apos;state&apos;, JSON.stringify(this.$store.state))</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>然后 store index.js 文件做如下处理</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//store index.js</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> Vuex <span class="keyword">from</span> <span class="string">'vuex'</span></span><br><span class="line">Vue.use(Vuex)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> sessionStorageState = sessionStorage.getItem(<span class="string">'state'</span>)</span><br><span class="line"><span class="keyword">let</span> state</span><br><span class="line"><span class="keyword">if</span> (sessionStorageState) &#123;  <span class="comment">//如果有sessionStorage的话拿 里面的数据</span></span><br><span class="line">  state = <span class="built_in">JSON</span>.parse(sessionStorageState)</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  state = &#123;</span><br><span class="line">    token: <span class="number">0</span>, <span class="comment">//       用户token</span></span><br><span class="line">    accountId: <span class="number">0</span>, <span class="comment">//   用户ID</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> VueX = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    login(state, obj) &#123;</span><br><span class="line">      state.token = obj.token</span><br><span class="line">      state.accountId = obj.id</span><br><span class="line">    &#125;,</span><br><span class="line">    clearInfo(state) &#123;</span><br><span class="line">      state.token = <span class="literal">null</span></span><br><span class="line">      state.accountId = <span class="literal">null</span></span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;&#125;,</span><br><span class="line">  modules: &#123;&#125;,</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> VueX</span><br></pre></td></tr></table></figure><p>这样就解决了页面刷新时 vuex数据消失的问题，但是还是有个问题，这样的话 存储的一些数据就暴露在 sessionStorage 了，存在安全隐患，需要解决这问题</p><p>就是state的数据加载完后清除sessionStorage。</p><p>所以在app.vue 的mounted 里添加如下代码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//页面加载完清除sessionStorage中的 state</span></span><br><span class="line">   <span class="built_in">window</span>.addEventListener(<span class="string">'load'</span>, () =&gt; &#123;</span><br><span class="line">     <span class="built_in">console</span>.log(<span class="string">'load加载完成'</span>)</span><br><span class="line">     <span class="comment">//清除state</span></span><br><span class="line">     sessionStorage.removeItem(<span class="string">'state'</span>)</span><br><span class="line">     <span class="comment">//清除所有</span></span><br><span class="line">     <span class="comment">// sessionStorage.clear();</span></span><br><span class="line">   &#125;)</span><br></pre></td></tr></table></figure><p>这样就解决了</p><p>接下来将全局设置请求头</p><h4 id="axios全局设置请求头"><a href="#axios全局设置请求头" class="headerlink" title="axios全局设置请求头"></a>axios全局设置请求头</h4><p>一些接口是要求登陆后才能访问的，登录后会从后台得到一个登录凭证token，和用户id。通过把这两个值设置</p><p>到请求头才可以访问一些接口。通过请求拦截配置请求头</p><p>先看看登录</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//登录成功后将获取到的数据存到 vuex</span></span><br><span class="line"><span class="keyword">this</span>.$store.commit(<span class="string">'login'</span>, &#123;</span><br><span class="line">            id: success.id,</span><br><span class="line">            token: success.token,</span><br><span class="line">          &#125;)</span><br></pre></td></tr></table></figure><p>再看拦截</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//axios 请求拦截</span></span><br><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">'axios'</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">'../store/index'</span></span><br><span class="line"><span class="keyword">import</span> qs <span class="keyword">from</span> <span class="string">'qs'</span></span><br><span class="line">Vue.prototype.$axios = axios</span><br><span class="line">Vue.prototype.$qs = qs</span><br><span class="line">Vue.prototype.BASE_URL = <span class="string">'127.0.0.1:11111请求的ip'</span></span><br><span class="line">axios.defaults.baseURL = process.env.NODE_ENV === <span class="string">'development'</span> ? <span class="string">'/api'</span> : Vue.prototype.BASE_URL</span><br><span class="line">axios.defaults.headers.post[<span class="string">'Content-Type'</span>] = <span class="string">'application/x-www-form-urlencoded;charset=utf-8'</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加请求拦截器</span></span><br><span class="line">axios.interceptors.request.use(</span><br><span class="line">  <span class="comment">// 在发送请求之前做些什么</span></span><br><span class="line">  config =&gt; &#123;</span><br><span class="line">    <span class="keyword">let</span> accountId = store.state.accountId</span><br><span class="line">    <span class="keyword">let</span> token = store.state.token</span><br><span class="line">    <span class="keyword">if</span> (token) &#123;</span><br><span class="line">      <span class="comment">// 判断是否存在token，如果存在的话，则每个http header都加上token</span></span><br><span class="line">      config.headers.common.token = <span class="string">`<span class="subst">$&#123;token&#125;</span>`</span></span><br><span class="line">      config.headers.common.accountId = <span class="string">`<span class="subst">$&#123;accountId&#125;</span>`</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> config</span><br><span class="line">  &#125;,</span><br><span class="line">  error =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 添加响应拦截器</span></span><br><span class="line">axios.interceptors.response.use(</span><br><span class="line">  <span class="comment">// 响应成功</span></span><br><span class="line">  response =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (response.data.code === <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> response</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (response.data.code === <span class="number">0</span>) &#123;</span><br><span class="line">      message(response.data.info)</span><br><span class="line">      <span class="keyword">return</span> response</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="comment">// 响应失败</span></span><br><span class="line">  error =&gt; &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error)</span><br><span class="line">  &#125;</span><br><span class="line">)</span><br></pre></td></tr></table></figure><p>这样就设置好全局请求头了。</p><h4 id="跨域问题"><a href="#跨域问题" class="headerlink" title="跨域问题"></a>跨域问题</h4><p>由于本地调试的访问地址是 localhost:8080或者本机ip地址，而请求的接口地址是  XXX.XXX.XXX.XXX:XXXX的ip地址，所以就会产生跨域.</p><p>解决办法就是在 vue.config.js上使用代理</p><p>具体如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// vue.config.js</span></span><br><span class="line"><span class="keyword">const</span> CompressionPlugin = <span class="built_in">require</span>(<span class="string">'compression-webpack-plugin'</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  publicPath: <span class="string">'./'</span>,</span><br><span class="line">  indexPath: <span class="string">'index.html'</span>,</span><br><span class="line">  filenameHashing: <span class="literal">true</span>,</span><br><span class="line"></span><br><span class="line">  pages: &#123;</span><br><span class="line">    index: &#123;</span><br><span class="line">      entry: <span class="string">'src/main.js'</span>,</span><br><span class="line">      template: <span class="string">'public/index.html'</span>,</span><br><span class="line">      filename: <span class="string">'index.html'</span>,</span><br><span class="line">      title: <span class="string">'Index Page'</span>,</span><br><span class="line">      chunks: [<span class="string">'chunk-vendors'</span>, <span class="string">'chunk-common'</span>, <span class="string">'index'</span>],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  runtimeCompiler: <span class="literal">false</span>,</span><br><span class="line">  productionSourceMap: <span class="literal">false</span>,</span><br><span class="line"></span><br><span class="line">  configureWebpack: <span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (process.env.NODE_ENV === <span class="string">'production'</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        plugins: [</span><br><span class="line">          <span class="keyword">new</span> CompressionPlugin(&#123;</span><br><span class="line">            algorithm: <span class="string">'gzip'</span>,</span><br><span class="line">            test: <span class="regexp">/\.(js|css)$/</span>,</span><br><span class="line">            threshold: <span class="number">10240</span>,</span><br><span class="line">            deleteOriginalAssets: <span class="literal">false</span>,</span><br><span class="line">            minRatio: <span class="number">0.8</span>,</span><br><span class="line">          &#125;),</span><br><span class="line">        ],</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line">  devServer: &#123;</span><br><span class="line">    proxy: &#123;</span><br><span class="line">      <span class="string">'/api'</span>: &#123;</span><br><span class="line">        target: <span class="string">'接口ip地址及端口号'</span>, </span><br><span class="line">        changeOrigin: <span class="literal">true</span>,</span><br><span class="line">        pathRewrite: &#123;</span><br><span class="line">          <span class="string">'^/api'</span>: <span class="string">''</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//axios index.js</span></span><br><span class="line">Vue.prototype.BASE_URL = <span class="string">'项目部署后的ip地址及端口号'</span></span><br><span class="line"><span class="comment">//开发环境的话使用 /api  实现代理  生产环境使用 项目部署后的 ip地址及端口号</span></span><br><span class="line">axios.defaults.baseURL = process.env.NODE_ENV === <span class="string">'development'</span> ? <span class="string">'/api'</span> : Vue.prototype.BASE_URL</span><br></pre></td></tr></table></figure><p>这样处理后重启项目，本地环境 跨域问题解决。</p><p>但是打包后生产环境会有跨域问题</p><p>这时就需要配置 nginx 的配置文件了</p><p>配置文件如下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">#定义变量 charge-vue的值为 接口ip地址及端口号</span><br><span class="line">upstream charge-vue&#123;</span><br><span class="line">        server IP地址:端口号;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server&#123;</span><br><span class="line">listen 端口号;</span><br><span class="line">server_name  项目启动ip或域名;</span><br><span class="line">location / &#123;</span><br><span class="line">root /home/charge/springboot/view/dist;  //项目文件路径</span><br><span class="line">try_files $uri $uri/ /index.html;    //项目入口文件</span><br><span class="line">add_header X-Frame-Options SAMEORIGIN;</span><br><span class="line">expires      3d;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location ~* \.(txt)$ &#123;</span><br><span class="line">root /usr/share/nginx/html;</span><br><span class="line">expires      7d;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">location /api/ &#123;                    //当访问遇到 /api/前缀时 代理到上面的接口</span><br><span class="line">proxy_pass http://charge-vue;</span><br><span class="line">proxy_set_header Host $host;</span><br><span class="line">proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">client_max_body_size 50m;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> location /pc/ &#123;              //当访问遇到 /pc/前缀时 代理到上面的接口</span><br><span class="line">                                proxy_pass http://charge-vue;</span><br><span class="line">                                proxy_set_header Host $host;</span><br><span class="line">                                proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">                                proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">                                                                client_max_body_size 50m;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>至此 线上版本跨域问题也解决</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;页面刷新后vuex数据消失问题，以及登录成功后设置请求头，跨域问题&quot;&gt;&lt;a href=&quot;#页面刷新后vuex数据消失问题，以及登录成功后设置请求头，跨域问题&quot; class=&quot;headerlink&quot; title=&quot;页面刷新后vuex数据消失问题，以及登录成功后设置请
      
    
    </summary>
    
    
      <category term="-vuex -vue -axios" scheme="https://shenxiaobu.github.io/tags/vuex-vue-axios/"/>
    
  </entry>
  
  <entry>
    <title>element-ui遇到的坑</title>
    <link href="https://shenxiaobu.github.io/2020/02/27/element-ui%E9%81%87%E5%88%B0%E7%9A%84%E5%9D%91/"/>
    <id>https://shenxiaobu.github.io/2020/02/27/element-ui遇到的坑/</id>
    <published>2020-02-27T04:26:57.000Z</published>
    <updated>2020-03-22T13:49:33.043Z</updated>
    
    <content type="html"><![CDATA[<h4 id="element-ui遇到的坑"><a href="#element-ui遇到的坑" class="headerlink" title="element-ui遇到的坑"></a>element-ui遇到的坑</h4><h5 id="Carousel-走马灯"><a href="#Carousel-走马灯" class="headerlink" title="Carousel 走马灯"></a>Carousel 走马灯</h5><p>需求：轮播图宽度百分百，高度自适应。</p><p>问题：走马灯必须设置高度，否则高度默认300；</p><p>解决思路：获取图片高度后再设置 走马灯高度 为图片高度。</p><p><strong>打印图片高度，偶尔是 0，偶尔是真正的图片高度。</strong></p><p>原因： 由于图片加载需要时间，所以 高度为0；</p><p>所以必须在图片加载完后才能拿到图片高度，因此使用延迟测试时下，基本上可以。但是这样是不严谨的。</p><p>最后：在轮播图图片加载完成后才执行设置轮播图高度。</p><p>代码如下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;!--banner部分开始--&gt;</span><br><span class="line">    &lt;div class=&quot;banner-box&quot;&gt;</span><br><span class="line">      &lt;el-carousel :autoplay=&quot;false&quot; arrow=&quot;never&quot; trigger=&quot;click&quot; :height=&quot;bannerHeight&quot;&gt;</span><br><span class="line">        &lt;el-carousel-item v-for=&quot;(item, index) in bannerList&quot; :key=&quot;index&quot;&gt;</span><br><span class="line">          &lt;a :href=&quot;item.url&quot; target=&quot;_blank&quot;&gt;</span><br><span class="line">            &lt;img ref=&quot;img&quot; width=&quot;100%&quot; @load=&quot;loadCompelete(index)&quot; :src=&quot;item.src&quot; :alt=&quot;item&quot; /&gt;</span><br><span class="line">          &lt;/a&gt;</span><br><span class="line">        &lt;/el-carousel-item&gt;</span><br><span class="line">      &lt;/el-carousel&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;!--banner部分结束--&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">    export default &#123;</span><br><span class="line">        data()&#123;</span><br><span class="line">            return&#123;</span><br><span class="line">                completeBannerImgs: [], //已完成加载的轮播图图片索引</span><br><span class="line">      bannerHeight: &apos;0px&apos;,</span><br><span class="line">                bannerList: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        url: &apos;https://www.qq.com&apos;,</span><br><span class="line">                        src:</span><br><span class="line">                        &apos;https://timgsa.baidu.com/timg?image&amp;quality=80&amp;size=b9999_10000&amp;sec=1582374543898&amp;di=7447d83b1d496897775b011b2c1f3362&amp;imgtype=0&amp;src=http%3A%2F%2Fwww.08lr.cn%2Fuploads%2Fallimg%2F170822%2F1-1FR2164649.jpg&apos;,</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        url: &apos;https://www.baidu.com&apos;,</span><br><span class="line">                        src: &apos;http://qiniu.xiaobusoft.com/banner.png&apos;,</span><br><span class="line">                    &#125;,</span><br><span class="line">                    &#123;</span><br><span class="line">                        url: &apos;https://www.baidu.com&apos;,</span><br><span class="line">                        src: &apos;http://p0.ifengimg.com/pmop/2017/0518/524BD5F65E9CED48A41F12E2C9BC6A5A61C457FE_size35_w578_h315.jpeg&apos;,</span><br><span class="line">                    &#125;,</span><br><span class="line">                ],</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        mounted() &#123;</span><br><span class="line">            var _this = this</span><br><span class="line">            _this.initEven()</span><br><span class="line">        &#125;,</span><br><span class="line">        method:&#123;</span><br><span class="line">            //初始化事件</span><br><span class="line">            initEven() &#123;</span><br><span class="line">              var _this = this</span><br><span class="line">              //窗口改变时改变轮播图高度</span><br><span class="line">              window.onresize = function() &#123;</span><br><span class="line">                _this.imgUpload()</span><br><span class="line">              &#125;</span><br><span class="line">            //判断轮播图是否加载完成</span><br><span class="line">            loadCompelete(index) &#123;</span><br><span class="line">                this.completeBannerImgs.push(index)</span><br><span class="line">                if (this.completeBannerImgs.length == this.bannerList.length) &#123;</span><br><span class="line">                    console.log(&apos;图片加载完&apos;)</span><br><span class="line">                    this.imgUpload()</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            //选出最低高度做为轮播图高度</span><br><span class="line">            imgUpload() &#123;</span><br><span class="line">                var _this = this</span><br><span class="line">                var height</span><br><span class="line">                for (var i = 0; i &lt; _this.$refs.img.length; i++) &#123;</span><br><span class="line">                    if (i == 0) &#123;</span><br><span class="line">                        height = _this.$refs.img[i].height</span><br><span class="line">                    &#125; else if (height &gt; _this.$refs.img[i].height) &#123;</span><br><span class="line">                        height = _this.$refs.img[i].height</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                _this.bannerHeight = height + &apos;px&apos;</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>以上方法解决轮播图高度问题，测试过 low-3g 网络，fast-3g网络，均可用。暂没遇到问题。</p><h5 id="Message-消息提示"><a href="#Message-消息提示" class="headerlink" title="Message 消息提示"></a>Message 消息提示</h5><p>按需引入Message</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> &#123; Message &#125; <span class="keyword">from</span> <span class="string">'element-ui'</span>;</span><br></pre></td></tr></table></figure><p>根据<a href="https://element.eleme.io/#/zh-CN/component/message" target="_blank" rel="noopener">elemment-ui文档</a>调用Message</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">this.$message(&apos;这是一条消息提示&apos;);</span><br></pre></td></tr></table></figure><p>此时会报错  <strong>this.$message is not a function</strong></p><p>原因 vue实例中并没有$message这个方法</p><p>解决：在后面添加  Vue.prototype.$message = Message</p><p>即如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> &#123; Message &#125; <span class="keyword">from</span> <span class="string">'element-ui'</span>;</span><br><span class="line">Vue.prototype.$message = Message</span><br></pre></td></tr></table></figure><p>此时弹框就可以用了。有时会遇到<strong>页面刷新时（只有刷新时复现）</strong> 有个消息框在页面上。</p><p>原因：引用时加了  Vue.use(Message)</p><p>即如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">'vue'</span></span><br><span class="line"><span class="keyword">import</span> &#123; Message &#125; <span class="keyword">from</span> <span class="string">'element-ui'</span>;</span><br><span class="line">Vue.use(Message)</span><br><span class="line">Vue.prototype.$message = Message</span><br></pre></td></tr></table></figure><p>解决就是<strong><em>把这行去掉即可</em></strong>，或者<strong>将Vue.use(Message)改为Vue.component(Message.name, Message)</strong></p><p>上述问题都解决后，这个Message还是有问题的。</p><p>会遇到重复弹出多个message框的情况。</p><p><img src="/2020/02/27/element-ui遇到的坑/1582779800317.png" alt="1582779800317"></p><p>如何解决呢？</p><p>可以看到，element-ui是动态往页面根节点插入message元素来实现弹框效果的，都拥有el-message类</p><p><img src="/2020/02/27/element-ui遇到的坑/1582779945248.png" alt="1582779945248"></p><p>那么我们就可以通过判断页面中message的个数来决定要不要弹出第二个提示框</p><p>这就需要重新写一下element-ui的message</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//resetMessage.js</span></span><br><span class="line"><span class="comment">/**重置message，防止重复点击重复弹出message弹框 */</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    Message</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'element-ui'</span>;</span><br><span class="line"><span class="keyword">const</span> showMessage = <span class="built_in">Symbol</span>(<span class="string">'showMessage'</span>)</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DoneMessage</span> </span>&#123;</span><br><span class="line">    [showMessage](type, options, single) &#123;</span><br><span class="line">        <span class="keyword">if</span> (single) &#123;</span><br><span class="line">            <span class="keyword">if</span> (<span class="built_in">document</span>.getElementsByClassName(<span class="string">'el-message'</span>).length === <span class="number">0</span>) &#123;</span><br><span class="line">                Message[type](options)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            Message[type](options)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    info(options, single = <span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>[showMessage](<span class="string">'info'</span>, options, single)</span><br><span class="line">    &#125;</span><br><span class="line">    warning(options, single = <span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>[showMessage](<span class="string">'warning'</span>, options, single)</span><br><span class="line">    &#125;</span><br><span class="line">    error(options, single = <span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>[showMessage](<span class="string">'error'</span>, options, single)</span><br><span class="line">    &#125;</span><br><span class="line">    success(options, single = <span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>[showMessage](<span class="string">'success'</span>, options, single)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> message = <span class="keyword">new</span> DoneMessage();</span><br></pre></td></tr></table></figure><p>main.js引入</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">  message</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'@/utils/resetMessage'</span>;</span><br><span class="line"></span><br><span class="line">Vue.use(ElementUI)</span><br><span class="line">Vue.prototype.$message = message;</span><br></pre></td></tr></table></figure><p>全局调用方法：</p><p><strong>this.$message.error(‘hello’)或者this,$message.error({message:’hello’})</strong></p><p>注意：挂载自定义message必须放在Vue.use(ElementUI)后面，才能覆盖element-ui默认的message，不然没有效果</p><p>这样就不用担心重复点击会弹出好多弹框了</p><p>上面的方法是根据 页面中 el-message的数量决定要不要弹出下一个提示框，重复提示的时候必须等上一个message隐藏了之后才能弹出下一个，这就导致后续的点击没有反应，缺少页面反馈，会有卡顿的现象，如果快速点击不同提示的按钮，由于第一个弹框还没隐藏，后续不同的提示也不会展示；</p><p>例如：两个点击按钮，两种提示语，点击了一个弹出对应提示语，但是点击另一个弹不出新得提示语言；</p><p>解决：</p><p>利用element-ui中message的close方法，在下一个弹框弹出前先把上一个弹框实例关闭掉</p><p>把之前的代码改造一下：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//resetMessage.js</span></span><br><span class="line"><span class="comment">/**重置message，防止重复点击重复弹出message弹框 */</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    Message</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'element-ui'</span>;</span><br><span class="line"><span class="keyword">const</span> showMessage = <span class="built_in">Symbol</span>(<span class="string">'showMessage'</span>);</span><br><span class="line"><span class="keyword">let</span> messageInstance = <span class="literal">null</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">DoneMessage</span> </span>&#123;</span><br><span class="line">    [showMessage](type, options, single) &#123;</span><br><span class="line">        <span class="keyword">if</span> (messageInstance &amp;&amp; single) &#123;</span><br><span class="line">            messageInstance.close()</span><br><span class="line">        &#125;</span><br><span class="line">        messageInstance = Message[type](options)</span><br><span class="line">    &#125;</span><br><span class="line">    info(options, single = <span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>[showMessage](<span class="string">'info'</span>, options, single)</span><br><span class="line">    &#125;</span><br><span class="line">    warning(options, single = <span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>[showMessage](<span class="string">'warning'</span>, options, single)</span><br><span class="line">    &#125;</span><br><span class="line">    error(options, single = <span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>[showMessage](<span class="string">'error'</span>, options, single)</span><br><span class="line">    &#125;</span><br><span class="line">    success(options, single = <span class="literal">true</span>) &#123;</span><br><span class="line">        <span class="keyword">this</span>[showMessage](<span class="string">'success'</span>, options, single)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> message = <span class="keyword">new</span> DoneMessage();</span><br></pre></td></tr></table></figure><p>这样重复点击的时候页面弹框和用户的行为有了一定的交互，体验更好</p><p>但是还是有不足</p><p>不足： 因为是通过new方法创建的对象，所以只能拿通过$message.error()的形式调用，不支持$message({})形式调用，参考element-ui中message方法的实现，将封装再次优化一下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//resetMessage.js</span></span><br><span class="line"><span class="comment">/**重置message，防止重复点击重复弹出message弹框 */</span></span><br><span class="line"><span class="keyword">import</span> &#123;</span><br><span class="line">    Message</span><br><span class="line">&#125; <span class="keyword">from</span> <span class="string">'element-ui'</span>;</span><br><span class="line"><span class="keyword">let</span> messageInstance = <span class="literal">null</span>;</span><br><span class="line"><span class="keyword">const</span> resetMessage = <span class="function">(<span class="params">options</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span>(messageInstance) &#123;</span><br><span class="line">        messageInstance.close()</span><br><span class="line">    &#125;</span><br><span class="line">    messageInstance = Message(options)</span><br><span class="line">&#125;</span><br><span class="line">;[<span class="string">'error'</span>,<span class="string">'success'</span>,<span class="string">'info'</span>,<span class="string">'warning'</span>].forEach(<span class="function"><span class="params">type</span> =&gt;</span> &#123;</span><br><span class="line">    resetMessage[type] = <span class="function"><span class="params">options</span> =&gt;</span> &#123;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">typeof</span> options === <span class="string">'string'</span>) &#123;</span><br><span class="line">            options = &#123;</span><br><span class="line">                message:options</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        options.type = type</span><br><span class="line">        <span class="keyword">return</span> resetMessage(options)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> message = resetMessage</span><br></pre></td></tr></table></figure><p>这样两种调用方式都支持了</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;element-ui遇到的坑&quot;&gt;&lt;a href=&quot;#element-ui遇到的坑&quot; class=&quot;headerlink&quot; title=&quot;element-ui遇到的坑&quot;&gt;&lt;/a&gt;element-ui遇到的坑&lt;/h4&gt;&lt;h5 id=&quot;Carousel-走马灯&quot;&gt;&lt;a 
      
    
    </summary>
    
    
      <category term="-vue -elementUi" scheme="https://shenxiaobu.github.io/tags/vue-elementUi/"/>
    
  </entry>
  
  <entry>
    <title>IDEA2019.3最新激活教程</title>
    <link href="https://shenxiaobu.github.io/2020/02/18/IDEA2019.3%E6%9C%80%E6%96%B0%E6%BF%80%E6%B4%BB%E6%95%99%E7%A8%8B/"/>
    <id>https://shenxiaobu.github.io/2020/02/18/IDEA2019.3最新激活教程/</id>
    <published>2020-02-18T05:59:37.000Z</published>
    <updated>2020-03-22T13:49:33.008Z</updated>
    
    <content type="html"><![CDATA[<h3 id="IDEA-2019-3-最新激活教程，有效期到-2089-年"><a href="#IDEA-2019-3-最新激活教程，有效期到-2089-年" class="headerlink" title="IDEA 2019.3 最新激活教程，有效期到 2089 年"></a>IDEA 2019.3 最新激活教程，有效期到 2089 年</h3><p><img src="/2020/02/18/IDEA2019.3最新激活教程/ideaLogo.jpg" alt="img"></p><blockquote><p>申明：本教程 IntelliJ IDEA 破解补丁、激活码均收集于网络，请勿商用，仅供个人学习使用，如有侵权，请联系作者删除。</p></blockquote><p>注意</p><ul><li>本教程理论上适用于 IntelliJ IDEA 所有版本，请放心食用~</li><li>本教程适用于 JetBrains 全系列产品，包括 Pycharm、IDEA、WebStorm、Phpstorm、Datagrip、RubyMine、CLion、AppCode 等。</li><li>本教程无需修改hosts文件。</li></ul><p>一、前言</p><p>说实话，IDEA 更新是真滴快，还以为 IDEA 2019.2.4 后面会更新 IDEA 2019.2.5 版本，谁知道 11 月份刚结束，官方直接就上了 2019.3 版本 …</p><blockquote><p>据官方说 IDEA 2019.3 版本在启动速度以及 UI 交互上做了很大优化。</p></blockquote><p>今天无事便更新一波，尝尝鲜，使用的方法还是之前 2019.2 的破解方法，同样可以破解成功，Happy~, 又可以愉快的玩耍了。</p><p>废话少说，开始激活破解 …</p><p>三、下载最新的 IDEA 2019.3</p><p>其实也可以从老版本直接升级，这里为了照顾大部分人可能第一次安装，我们选择从官网下载，下载地址为: <a href="https://www.jetbrains.com/idea/download/" target="_blank" rel="noopener">https://www.jetbrains.com/idea/download/</a></p><p><img src="/2020/02/18/IDEA2019.3最新激活教程/ideaDownload.jpg" alt="img"></p><p>点击下载，静待下载完成~</p><p>四、启动 IDEA 2019.3 安装包</p><p>这里笔者机器上，之前是安装过 IDEA 2019.2.3 版本的，所以提示是否删除老版本，这里我们选择删除老版本：</p><p><img src="/2020/02/18/IDEA2019.3最新激活教程/ideaDeleteOld.jpg" alt="img"></p><blockquote><p>注意: 若你第一次安装，是没有这一步的，跳过看后面即可~</p></blockquote><p>继续点击下一步，这里笔者的电脑是 64 位的，顺便将 64 位的 IDEA 启动图标生成到桌面上：</p><p><img src="/2020/02/18/IDEA2019.3最新激活教程/idea64.png" alt="img"></p><p>点击下一步，这里又弹出卸载老版本 IDEA 2019.2.3 可以做的操作，如果是第一次安装，则没有这一步，看下面步骤即可~</p><p>这里由于我之前安装有老版本的 IDEA, 选择将老版本的缓存、本地历史也删除掉：</p><p><img src="/2020/02/18/IDEA2019.3最新激活教程/ideaDeleteHistroy.png" alt="img"></p><blockquote><p>注意：很多小伙伴激活失败，很可能是之前老版本的遗留缓存导致的，在升级的时候，一定记住要给删除掉，否则，可能导致激活失败的情况~</p></blockquote><p>继续点击下一步，启动 IDEA 2019.3, 启动成功后，我们可以看到 IDEA 新的欢迎界面如下:</p><p><img src="/2020/02/18/IDEA2019.3最新激活教程/idea.jpg" alt="img"></p><p>五、开始激活</p><p>在激活之前，主要注意：无需改动 host 文件。</p><p><strong>重点：激活码需要结合破解补丁，一起使用，请参考下面步骤**</strong>⬇️⬇️⬇️**</p><p>如下图所示，我们先选择免费试用 30 天，先进去再说:</p><p><img src="/2020/02/18/IDEA2019.3最新激活教程/ideaTry.jpg" alt="img"></p><p>六、配置破解补丁</p><p>进去过后，我们随便建个项目，点击菜单栏<strong>Help -&gt; Edit Custom VM Options</strong>:</p><blockquote><p>注意：切记一定要通过 IDEA 来修改 .vmoptions 文件，不要手动直接去修改，现在 IDEA 针对反破解已经越来越严格了~</p></blockquote><p><img src="/2020/02/18/IDEA2019.3最新激活教程/ideaBuding.png" alt="img"></p><p>下载破解补丁成功以后，笔者将它放置在了 IDEA 的安装目录/bin路径下，以防止后面被自己误删:</p><p><img src="/2020/02/18/IDEA2019.3最新激活教程/ideaPojie.jpg" alt="img"></p><blockquote><p>注意：补丁全路径中不要包含中文，否则，可能导致破解失败！另外，jetbrains-agent.jar补丁是不需要解压的~</p></blockquote><blockquote><p>最新的破解补丁与激活码的网盘链接，已在公众号消息中回复，注意滑动屏幕查看。</p></blockquote><blockquote></blockquote><blockquote><p>注意：在 [小哈学Java] 公众号回复关键字：<strong>**idea</strong>， 会<strong>自动回复3条信息</strong>，分别是：</p></blockquote><blockquote><ol><li><p><strong>激活码与最新破解补丁的网盘链接</strong></p></li><li><p><strong>图文破解教程</strong></p></li><li><p><strong>破解失败问题集锦汇总（没激活成功的小伙伴，注意看下，是不是有同样的情况导致激活失败了~）</strong></p><p>注意滑动屏幕查看哟~</p><p><strong>（注意：**</strong>内含两个不同的IDEA版本破解补丁，请对应版本使用~）**</p><p><img src="/2020/02/18/IDEA2019.3最新激活教程/jihuoma.png" alt="img"></p></li></ol></blockquote><p><img src="/2020/02/18/IDEA2019.3最新激活教程/ideajihuo.png" alt="img"></p><p>在 .vmoptions 文件中配置我们补丁放置的全路径位置。</p><ol><li>-javaagent:C:\Program Files\JetBrains\IntelliJ IDEA 2019.3\bin\jetbrains-agent.jar</li></ol><p>七、重启IDEA</p><p>破解补丁配置完成以后，重启IDEA。</p><p>八、填入激活码，激活</p><p>重启完成后，开始填入激活码，点击菜单栏<strong>Help -&gt; Register</strong>:</p><p><img src="/2020/02/18/IDEA2019.3最新激活教程/jihuo2.png" alt="img"></p><p><img src="/2020/02/18/IDEA2019.3最新激活教程/jihuo3.png" alt="img"></p><blockquote><p>注意：激活码需搭配上面的破解补丁一起使用才有效！！！</p></blockquote><p>点击激活:</p><p><img src="/2020/02/18/IDEA2019.3最新激活教程/jihuo4.png" alt="img"></p><p>可以看到，已经激活到 2089 年了，开心编码吧~</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;IDEA-2019-3-最新激活教程，有效期到-2089-年&quot;&gt;&lt;a href=&quot;#IDEA-2019-3-最新激活教程，有效期到-2089-年&quot; class=&quot;headerlink&quot; title=&quot;IDEA 2019.3 最新激活教程，有效期到 2089 年&quot;&gt;
      
    
    </summary>
    
    
      <category term="-idea" scheme="https://shenxiaobu.github.io/tags/idea/"/>
    
  </entry>
  
  <entry>
    <title>监测汇总</title>
    <link href="https://shenxiaobu.github.io/2020/02/11/%E7%9B%91%E6%B5%8B%E6%B1%87%E6%80%BB/"/>
    <id>https://shenxiaobu.github.io/2020/02/11/监测汇总/</id>
    <published>2020-02-11T04:25:14.000Z</published>
    <updated>2020-03-22T13:49:33.147Z</updated>
    
    <content type="html"><![CDATA[<h3 id="产业监测系统汇总"><a href="#产业监测系统汇总" class="headerlink" title="产业监测系统汇总"></a>产业监测系统汇总</h3><p>1 下拉选项样式初始化</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">xiaobuSelectInit</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"xiaobuSelectInit"</span>);</span><br><span class="line">        <span class="keyword">var</span> unSelected = <span class="string">"#B4B4B4"</span>;</span><br><span class="line">        <span class="keyword">var</span> selected = <span class="string">"#323232"</span>;</span><br><span class="line">        <span class="keyword">var</span> len = $(<span class="string">"select"</span>).length;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i++)&#123;</span><br><span class="line">            <span class="keyword">var</span> val = $(<span class="string">"select"</span>).eq(i).val();</span><br><span class="line">            <span class="keyword">var</span> text = $(<span class="string">"select"</span>).eq(i).find(<span class="string">"option"</span>).eq(<span class="number">0</span>).text();</span><br><span class="line">            <span class="keyword">if</span>(val == <span class="string">''</span> || (val == <span class="number">0</span> &amp;&amp; text != <span class="string">'国内'</span>) || !val || val == <span class="string">'请选择'</span>)&#123;</span><br><span class="line">                $(<span class="string">"select"</span>).eq(i).css(<span class="string">"color"</span>, unSelected);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                $(<span class="string">"select"</span>).eq(i).css(<span class="string">"color"</span>, selected);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>2 树图选项列表</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//返回符合树结构的  对象list</span></span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">xiaobuGetNodes</span>(<span class="params">list</span>) </span>&#123;</span><br><span class="line">       <span class="keyword">if</span> (!list) &#123;</span><br><span class="line">           <span class="keyword">return</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">var</span> nodes = [];</span><br><span class="line">       <span class="keyword">for</span> (<span class="keyword">var</span> index <span class="keyword">in</span> list) &#123;</span><br><span class="line">           <span class="keyword">var</span> item = list[index];</span><br><span class="line">           <span class="keyword">var</span> node = &#123;</span><br><span class="line">               <span class="string">"id"</span>: item.id,</span><br><span class="line">               <span class="string">"title"</span>: item.name,</span><br><span class="line">               <span class="string">"subs"</span>: xiaobuGetNodes(item.list)</span><br><span class="line">           &#125;</span><br><span class="line">           nodes.push(node);</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">return</span> nodes;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure><p>3 给 .xiaobu-year-list设置下拉年份选项，用data-value设置该值</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//下拉年份</span></span><br><span class="line"> <span class="function"><span class="keyword">function</span> <span class="title">xiaobuSelectYearInit</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">     <span class="comment">//年份范围限制</span></span><br><span class="line">     <span class="keyword">var</span> myDate = <span class="keyword">new</span> <span class="built_in">Date</span>();</span><br><span class="line">     <span class="keyword">var</span> startYear = myDate.getFullYear();<span class="comment">//起始年份</span></span><br><span class="line">     <span class="keyword">var</span> endYear = startYear - <span class="number">100</span>;<span class="comment">//结束年份</span></span><br><span class="line">     <span class="keyword">var</span> obj = $(<span class="string">".xiaobu-year-list"</span>);</span><br><span class="line">     obj.each(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">         <span class="keyword">for</span>(<span class="keyword">var</span> i = startYear; i &gt;= endYear; i--)&#123;</span><br><span class="line">             $(<span class="keyword">this</span>).append(<span class="string">'&lt;option value='</span> + i + <span class="string">'&gt;'</span> + i + <span class="string">'&lt;/option&gt;'</span>);</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">var</span> val = $(<span class="keyword">this</span>).attr(<span class="string">"data-value"</span>);</span><br><span class="line">         $(<span class="keyword">this</span>).val(val);</span><br><span class="line">     &#125;)</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//改变下拉年份的时候给该元素一个data-value,防执行xiaobuSelectYearInit的时候数值被清空</span></span><br><span class="line">       $(<span class="string">"body"</span>).on(<span class="string">"change"</span>,<span class="string">'.xiaobu-year-list'</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">           <span class="keyword">var</span> val = $(<span class="keyword">this</span>).val();</span><br><span class="line">           $(<span class="keyword">this</span>).attr(<span class="string">"data-value"</span>,val);</span><br><span class="line">       &#125;)</span><br></pre></td></tr></table></figure><p>4 树图选项插件</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    创建构造函数  xiaobuComboTree，传入参数 元素，对象参数</span></span><br><span class="line"><span class="comment">    init 初始化对象 initstruct 初始化结构  init 初始化dom</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">;(<span class="function"><span class="keyword">function</span> (<span class="params">$, window, document</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> comboTreePlugins = <span class="string">'xiaobuComboTree'</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> defaults = &#123;</span><br><span class="line">        source: [],</span><br><span class="line">        isMultiple: <span class="literal">false</span>,</span><br><span class="line">        cascadeSelect: <span class="literal">false</span>,</span><br><span class="line">        folderSelect: <span class="literal">true</span>,  <span class="comment">//是否展开选项</span></span><br><span class="line">        selected: [],</span><br><span class="line">        isShowParent: <span class="literal">false</span>,</span><br><span class="line">        selectedlength: <span class="number">100</span>,</span><br><span class="line">        placeholder: <span class="string">'请选择'</span>,</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//由于是闭包  这里是私有方法 外部访问不到</span></span><br><span class="line">    <span class="keyword">var</span> xiaobuComboTree = <span class="function"><span class="keyword">function</span> (<span class="params">element, options,callback</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.options = $.extend(&#123;&#125;, defaults, options);</span><br><span class="line">        <span class="keyword">this</span>.element = element;</span><br><span class="line">        <span class="keyword">this</span>.callback = callback || <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">this</span>.ulcontainer = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//已选数据</span></span><br><span class="line">        <span class="keyword">this</span>.oliIdArray = [];</span><br><span class="line">        <span class="comment">//选项数据</span></span><br><span class="line">        <span class="keyword">this</span>.copysource = [];</span><br><span class="line">        <span class="comment">//选择结果容器</span></span><br><span class="line">        <span class="keyword">this</span>.roleSelects = <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">//选项容器的复制dom</span></span><br><span class="line">        <span class="keyword">this</span>.copydom = <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">//搜索框容器input标签</span></span><br><span class="line">        <span class="keyword">this</span>.comboxinput = <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">//搜索框容器</span></span><br><span class="line">        <span class="keyword">this</span>.comboxinputcontainer = <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">//选项容器  包含  选项 与 搜索结果为空</span></span><br><span class="line">        <span class="keyword">this</span>.comboxulcontainer = <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">//数据选项容器</span></span><br><span class="line">        <span class="keyword">this</span>.selectul = <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">//提示内容容器</span></span><br><span class="line">        <span class="keyword">this</span>.myplaceholder = <span class="literal">null</span>;</span><br><span class="line">        <span class="comment">//无搜索结果容器</span></span><br><span class="line">        <span class="keyword">this</span>.noresults = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">this</span>.init();</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    xiaobuComboTree.prototype.init = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        $.extend(<span class="literal">true</span>, <span class="keyword">this</span>.copysource, <span class="keyword">this</span>.options.source);</span><br><span class="line">        <span class="keyword">this</span>.initstruct();</span><br><span class="line">        <span class="keyword">this</span>.initdom();</span><br><span class="line">        <span class="keyword">this</span>.ulcontainer = $(<span class="keyword">this</span>.element).find(<span class="string">'div[_id=comboxulcontainer]'</span>);</span><br><span class="line">        <span class="keyword">this</span>.comboxinput = $(<span class="keyword">this</span>.element).find(<span class="string">'input[_id=comboxinput]'</span>);</span><br><span class="line">        <span class="keyword">this</span>.roleSelects = $(<span class="keyword">this</span>.element).find(<span class="string">'div[_id=role_selectsb]'</span>);</span><br><span class="line">        <span class="keyword">this</span>.comboxinputcontainer = $(<span class="keyword">this</span>.element).find(<span class="string">'div[_id=comboxinputcontainer]'</span>);</span><br><span class="line">        <span class="keyword">this</span>.comboxulcontainer = $(<span class="keyword">this</span>.element).find(<span class="string">'div[_id=comboxulcontainer]'</span>)</span><br><span class="line">        <span class="keyword">this</span>.copydom = <span class="keyword">this</span>.selectul.clone();</span><br><span class="line">        <span class="keyword">this</span>.myplaceholder = $(<span class="keyword">this</span>.element).find(<span class="string">'span[_id=myplaceholder]'</span>);</span><br><span class="line">        <span class="keyword">this</span>.noresults = $(<span class="keyword">this</span>.element).find(<span class="string">'.noresults'</span>);</span><br><span class="line">        <span class="keyword">this</span>.initevent();</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    xiaobuComboTree.prototype.initstruct = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; <span class="keyword">this</span>.copysource.length; i++) &#123;</span><br><span class="line">            <span class="keyword">this</span>.copysource[i][<span class="string">'class'</span>] = <span class="string">'first'</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    xiaobuComboTree.prototype.initdom = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        $(<span class="keyword">this</span>.element).append(</span><br><span class="line">            <span class="string">'&lt;div class="input-keyword-wrap"&gt;'</span> +</span><br><span class="line">            <span class="string">'&lt;div _id="role_selectsb" class="select-menu-input imitationSelect role_selectsb"&gt;'</span> +</span><br><span class="line">            <span class="string">'&lt;span _id="myplaceholder" class="input-tips"&gt;'</span> +</span><br><span class="line">            <span class="keyword">this</span>.options.placeholder +</span><br><span class="line">            <span class="string">'&lt;/span&gt;'</span> +</span><br><span class="line">            <span class="string">'&lt;/div&gt;'</span> +</span><br><span class="line">            <span class="string">'&lt;i class="fa fa-caret-down handle-arrow"&gt;&lt;/i&gt;'</span> +</span><br><span class="line">            <span class="string">'&lt;/div&gt;'</span> +</span><br><span class="line">            <span class="string">'&lt;div class="drop-down-wrap"&gt;'</span> +</span><br><span class="line">            <span class="string">'&lt;div _id="comboxinputcontainer" class="comboxinputcontainer keyword-search"&gt;'</span> +</span><br><span class="line">            <span class="string">'&lt;input _id="comboxinput" placeholder="输入关键词搜索" type="text"&gt;'</span> +</span><br><span class="line">            <span class="string">'&lt;span tag="search" class="search-icons"&gt;&lt;i class="fa fa-search"&gt;&lt;/i&gt;&lt;/span&gt;'</span> +</span><br><span class="line">            <span class="string">'&lt;/div&gt;'</span> +</span><br><span class="line">            <span class="string">'&lt;div _id="comboxulcontainer"&gt;'</span> +</span><br><span class="line">            <span class="string">'&lt;div _id="noresault" class="noresults"&gt;无搜索结果&lt;/div&gt;'</span> +</span><br><span class="line">            <span class="string">'&lt;ul class="select-tree-list select-tree" _id="selectUl"&gt;&lt;/ul&gt;'</span> +</span><br><span class="line">            <span class="string">'&lt;/div&gt;'</span> +</span><br><span class="line">            <span class="string">'&lt;/div&gt;'</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.selectul = $(<span class="keyword">this</span>.element).find(<span class="string">'ul[_id=selectUl]'</span>);</span><br><span class="line">        <span class="keyword">this</span>.createitem(<span class="keyword">this</span>.copysource, <span class="keyword">this</span>.selectul);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    xiaobuComboTree.prototype.initevent = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> _this = <span class="keyword">this</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//点击元素</span></span><br><span class="line">        $(<span class="keyword">this</span>.element).on(<span class="string">'click'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">            event = event || <span class="built_in">window</span>.event;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//找到存放结果的容器 closet</span></span><br><span class="line">            <span class="keyword">var</span> closet = $(event.target).closest(<span class="string">'.input-keyword-wrap'</span>),</span><br><span class="line">                icon = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//如果点击的是 输入框 或者 是右边的箭头</span></span><br><span class="line">            <span class="keyword">if</span> (($(event.target).hasClass(<span class="string">'imitationSelect'</span>) || $(event.target).hasClass(<span class="string">'fa'</span>)) &amp;&amp; closet.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"点击了输入框 或者 右边的箭头"</span>);</span><br><span class="line">                $(_this.element).find(<span class="string">'.drop-down-wrap'</span>).toggle();</span><br><span class="line">                <span class="keyword">if</span> (!icon) &#123;</span><br><span class="line">                    icon = $(_this.element).find(<span class="string">'.input-keyword-wrap&gt;i'</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> (icon.hasClass(<span class="string">"fa-caret-down"</span>)) &#123;</span><br><span class="line">                    $(<span class="keyword">this</span>).css(&#123;</span><br><span class="line">                        <span class="string">'position'</span>: <span class="string">'absolute'</span>,</span><br><span class="line">                        <span class="string">'background-color'</span>: <span class="string">'#FFF'</span>,</span><br><span class="line">                        <span class="string">'z-index'</span>: <span class="string">'99'</span></span><br><span class="line">                    &#125;)</span><br><span class="line">                    icon.removeClass(<span class="string">"fa-caret-down"</span>).addClass(<span class="string">"fa-caret-up"</span>); <span class="comment">//点击input选择适合，小图标动态切换</span></span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    $(<span class="keyword">this</span>).css(<span class="string">'position'</span>, <span class="string">''</span>);</span><br><span class="line">                    icon.removeClass(<span class="string">"fa-caret-up"</span>).addClass(<span class="string">"fa-caret-down"</span>); <span class="comment">//点击input选择适合，小图标动态切换</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">var</span> target = $(event.target).hasClass(<span class="string">'title-containers'</span>) ? $(event.target) : $(event.target)</span><br><span class="line">                .parent().hasClass(<span class="string">'title-containers'</span>) ? $(event.target).parent() : <span class="literal">null</span>;</span><br><span class="line">            <span class="keyword">if</span> (target) &#123;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 如果已选择的大于设定的数目，并且当前是选择动作 则不执行</span></span><br><span class="line">                <span class="keyword">if</span> ((_this.oliIdArray.length &gt;= _this.options.selectedlength) &amp;&amp; !target.hasClass(<span class="string">'actived_li'</span>) &amp;&amp; _this.options.isMultiple) &#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">'最大可选条目已设置'</span>);</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (target.attr(<span class="string">'role'</span>) !== <span class="string">'parent'</span>) &#123;</span><br><span class="line">                    event.target = target;</span><br><span class="line">                    <span class="keyword">var</span> oliId = target.attr(<span class="string">"data-id"</span>);</span><br><span class="line">                    <span class="keyword">if</span> (target.hasClass(<span class="string">'actived_li'</span>)) &#123;</span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">"点击了非父元素非单选框盒子且选中状态的选项"</span>);</span><br><span class="line">                        _this.uncheckrow(oliId);</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">"点击了非父元素非单选框盒子且为选中状态的选项"</span>);</span><br><span class="line">                        <span class="keyword">if</span> (!_this.options.isMultiple) &#123; <span class="comment">//如果是单选，则已选条目大于零，并且所点击的不是 激活状态的，不执行</span></span><br><span class="line">                            <span class="keyword">if</span> (_this.oliIdArray.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                                <span class="built_in">console</span>.log(<span class="string">"单选时 清除 其他的选项"</span>)</span><br><span class="line">                                <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; _this.oliIdArray.length; j++) &#123;</span><br><span class="line">                                    _this.uncheckrow(_this.oliIdArray[j]);</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                        _this.checkrow(target, oliId, <span class="literal">false</span>); <span class="comment">//第三个参数表示点击的是否是checkbox</span></span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    <span class="keyword">if</span> (!_this.options.isMultiple) &#123;</span><br><span class="line">                        _this.hideul();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> ($(event.target).attr(<span class="string">'type'</span>) === <span class="string">'checkbox'</span>) &#123;</span><br><span class="line">                <span class="comment">// if ((_this.oliIdArray.length &gt;= _this.options.selectedlength) &amp;&amp; $(event.target).prop(</span></span><br><span class="line">                <span class="comment">//         'checked')) &#123;</span></span><br><span class="line">                <span class="comment">//     console.log('超出最大条目');</span></span><br><span class="line">                <span class="comment">//     return false;</span></span><br><span class="line">                <span class="comment">// &#125;</span></span><br><span class="line">               </span><br><span class="line">                <span class="keyword">var</span> _target = $(event.target).closest(<span class="string">'.title-containers'</span>);</span><br><span class="line">                <span class="keyword">if</span> (_target.hasClass(<span class="string">'actived_li'</span>)) &#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">"点击了单选框盒子且为选中状态的选项"</span>);</span><br><span class="line">                    _this.uncheckrow($(event.target).attr(<span class="string">'data-id'</span>));</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">"点击了单选框盒子且为非选中状态的选项"</span>);</span><br><span class="line">                    <span class="keyword">if</span> (!_this.options.isMultiple) &#123; <span class="comment">//如果是单选，则已选条目大于零，并且所点击的不是 激活状态的，不执行</span></span><br><span class="line">                        <span class="keyword">if</span> (_this.oliIdArray.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                            <span class="built_in">console</span>.log(<span class="string">"单选时 清除 其他的选项"</span>)</span><br><span class="line">                            <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; _this.oliIdArray.length; j++) &#123;</span><br><span class="line">                                _this.uncheckrow(_this.oliIdArray[j]);</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="built_in">console</span>.log($(event.target));</span><br><span class="line">                    _this.checkrow(_target, $(event.target).attr(<span class="string">'data-id'</span>), <span class="literal">true</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//点击x关闭事件处理</span></span><br><span class="line">            <span class="keyword">if</span> ($(event.target).attr(<span class="string">'class'</span>) === <span class="string">'close'</span>) &#123;</span><br><span class="line">                <span class="built_in">console</span>.log(<span class="string">"点击删除选项"</span>)</span><br><span class="line">                _this.uncheckrow($(event.target).attr(<span class="string">'data-id'</span>));</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> containerparent = $(event.target).attr(<span class="string">'role'</span>) === <span class="string">'parent'</span> ? $(event.target) : $(event</span><br><span class="line">                .target).parent().attr(<span class="string">'role'</span>) === <span class="string">'parent'</span> ? $(event.target).parent() : <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (!containerparent) &#123;</span><br><span class="line">                target = $(event.target).attr(<span class="string">'tag'</span>) === <span class="string">'closeitem'</span> ?</span><br><span class="line">                    $(event.target) : $(event.target).parent().attr(<span class="string">'tag'</span>) === <span class="string">'closeitem'</span> ?</span><br><span class="line">                    $(event.target).parent() : <span class="literal">null</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> ($(event.target).attr(<span class="string">'tag'</span>) === <span class="string">'search'</span> || $(event.target).parent().attr(<span class="string">'tag'</span>) === <span class="string">'search'</span>) &#123;</span><br><span class="line">                _this.comboxinput.val(<span class="string">''</span>);</span><br><span class="line">                _this.comboxinput.trigger(<span class="string">'keyup'</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (target || containerparent) &#123;</span><br><span class="line">                <span class="keyword">var</span> _parent = <span class="literal">null</span>;</span><br><span class="line">                <span class="keyword">if</span> (containerparent) &#123;</span><br><span class="line">                    _parent = containerparent</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    _parent = target.closest(<span class="string">'.title-containers'</span>);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">//展开和隐藏子选项</span></span><br><span class="line">                _parent.next().toggle();</span><br><span class="line">                target = target.find(<span class="string">'i'</span>);</span><br><span class="line">                <span class="comment">//切换父选项左边的图标</span></span><br><span class="line">                <span class="keyword">if</span> (target.hasClass(<span class="string">'fa-caret-down'</span>)) &#123;</span><br><span class="line">                    target.removeClass(<span class="string">'fa-caret-down'</span>).addClass(<span class="string">'fa-caret-right'</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    target.removeClass(<span class="string">'fa-caret-right'</span>).addClass(<span class="string">'fa-caret-down'</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (event.stopPropagation) &#123;</span><br><span class="line">                event.stopPropagation(); <span class="comment">// 针对 Mozilla 和 Opera</span></span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="built_in">window</span>.event) &#123;</span><br><span class="line">                <span class="built_in">window</span>.event.cancelBubble = <span class="literal">true</span>; <span class="comment">// 针对 IE</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">this</span>.comboxinput.on(<span class="string">'keyup'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">            event = event || <span class="built_in">window</span>.event;</span><br><span class="line"></span><br><span class="line">            _this.selectul.find(<span class="string">'.hide'</span>).removeClass(<span class="string">'hide'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment">// 判断搜索框里是否有内容，如果有则添加删除按钮</span></span><br><span class="line">            <span class="keyword">if</span> (event.currentTarget.value != <span class="string">""</span>) &#123;</span><br><span class="line">                $(<span class="keyword">this</span>).siblings(<span class="string">'span'</span>).find(<span class="string">'i'</span>).removeClass(<span class="string">'fa-search'</span>).addClass(<span class="string">'fa-close'</span>);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                $(<span class="keyword">this</span>).siblings(<span class="string">'span'</span>).find(<span class="string">'i'</span>).removeClass(<span class="string">'fa-close'</span>).addClass(<span class="string">'fa-search'</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> lis = _this.selectul.find(<span class="string">'li'</span>),</span><br><span class="line">                targetli = <span class="literal">null</span>,</span><br><span class="line">                _tempattr = <span class="literal">null</span>;</span><br><span class="line"></span><br><span class="line">            lis.each(<span class="function"><span class="keyword">function</span> (<span class="params">index, item</span>) </span>&#123;</span><br><span class="line">                $(item).attr(<span class="string">'matched'</span>, <span class="string">''</span>);</span><br><span class="line">            &#125;);</span><br><span class="line">            <span class="keyword">var</span> val = $(event.target).val();</span><br><span class="line"></span><br><span class="line">            <span class="function"><span class="keyword">function</span> <span class="title">getChildren</span>(<span class="params">parent</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">var</span> lichild = parent.children(<span class="string">'li'</span>);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (lichild.length) &#123;</span><br><span class="line">                    <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, _p = lichild, len = _p.length; i &lt; len; i++) &#123;</span><br><span class="line">                        targetli = _p.eq(i), _tempattr = targetli.attr(<span class="string">'data-name'</span>);</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">if</span> (_tempattr.indexOf(val) &gt;= <span class="number">0</span> &amp;&amp; _tempattr !== <span class="string">' '</span> &amp;&amp; _tempattr !== <span class="string">''</span>) &#123;</span><br><span class="line">                            targetli.attr(<span class="string">'matched'</span>, <span class="string">'matched'</span>);</span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">var</span> subulcontainer = targetli.find(<span class="string">'&gt;.tree-sub-body'</span>);</span><br><span class="line"></span><br><span class="line">                        <span class="keyword">if</span> (subulcontainer.length &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                            <span class="keyword">var</span> _tempul = subulcontainer.find(<span class="string">'&gt;ul'</span>);</span><br><span class="line">                            getChildren(_tempul);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            getChildren(_this.selectul);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (val.trim() !== <span class="string">''</span>) &#123;</span><br><span class="line">                <span class="keyword">var</span> lis1 = _this.selectul.find(<span class="string">'li'</span>);</span><br><span class="line">                lis1.each(<span class="function"><span class="keyword">function</span> (<span class="params">index, item</span>) </span>&#123;</span><br><span class="line">                    <span class="keyword">var</span> _item = $(item);</span><br><span class="line">                    <span class="keyword">var</span> matched = _item.find(<span class="string">'li[matched="matched"]'</span>);</span><br><span class="line">                    <span class="keyword">if</span> (_item.length === <span class="number">0</span>) &#123;</span><br><span class="line">                        <span class="keyword">return</span> <span class="literal">true</span>; <span class="comment">//相当于continue</span></span><br><span class="line">                    &#125;</span><br><span class="line">                    <span class="keyword">if</span> (matched.length === <span class="number">0</span>) &#123;</span><br><span class="line">                        <span class="keyword">if</span> (_item.attr(<span class="string">'matched'</span>) === <span class="string">'matched'</span>) &#123; <span class="comment">//如果当前元素匹配，则保留当前的删除它后面的所有元素</span></span><br><span class="line"></span><br><span class="line">                            <span class="keyword">var</span> _matcheditem = _item.find(<span class="string">'&gt;div.tree-sub-body'</span>);</span><br><span class="line">                            _matcheditem.each(<span class="function"><span class="keyword">function</span> (<span class="params">index, item</span>) </span>&#123;</span><br><span class="line">                                $(item).addClass(<span class="string">'hide'</span>);</span><br><span class="line">                            &#125;);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            _item.addClass(<span class="string">'hide'</span>);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">var</span> children = _this.comboxulcontainer.find(<span class="string">'li[matched=matched]'</span>);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">if</span> (children.length === <span class="number">0</span>) &#123;</span><br><span class="line">                    _this.selectul.hide();</span><br><span class="line">                    _this.noresults.show();</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    _this.noresults.hide();</span><br><span class="line">                    _this.selectul.show();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                _this.selectul.show();</span><br><span class="line">                _this.selectul.find(<span class="string">'.hide'</span>).removeClass(<span class="string">'hide'</span>);</span><br><span class="line">                _this.noresults.hide();</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//点击任意地方隐藏下拉</span></span><br><span class="line">        $(<span class="built_in">document</span>).click(<span class="function"><span class="keyword">function</span> (<span class="params">event</span>) </span>&#123;</span><br><span class="line">            _this.hideul();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    xiaobuComboTree.prototype.createitem = <span class="function"><span class="keyword">function</span> (<span class="params">SampleJSONData, container,parentName,parentId</span>) </span>&#123;</span><br><span class="line">        parentName = parentName || <span class="string">''</span>;</span><br><span class="line">        parentId = parentId || <span class="string">''</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>; j &lt; SampleJSONData.length; j++) &#123;</span><br><span class="line">            <span class="keyword">var</span> oliName = SampleJSONData[j].title;</span><br><span class="line">            <span class="keyword">var</span> oliId = SampleJSONData[j].id;</span><br><span class="line">            <span class="comment">// li容器</span></span><br><span class="line">            <span class="keyword">var</span> item = $(<span class="string">'&lt;li data-parentId = "'</span> + parentId + <span class="string">'" data-parentName="'</span> + parentName + <span class="string">'" data-name="'</span> + oliName + <span class="string">'" data-id="'</span> + oliId + <span class="string">'"&gt;&lt;/li&gt;'</span>),</span><br><span class="line">                divitem = $(<span class="string">'&lt;div data-name="'</span> + oliName + <span class="string">'" data-id="'</span> + oliId + <span class="string">'" class="title-containers"&gt;&lt;/div&gt;'</span>);</span><br><span class="line">            spanitem = $(<span class="string">'&lt;span tag="closeitem" class="handle-left-icons"&gt;&lt;/span&gt;'</span>);</span><br><span class="line"></span><br><span class="line">            divitem.append(spanitem);</span><br><span class="line"></span><br><span class="line">             <span class="comment">//如果存在子选项 添加左边按钮和 role属性为 parent</span></span><br><span class="line">             <span class="keyword">if</span> (SampleJSONData[j][<span class="string">'subs'</span>]) &#123;</span><br><span class="line">                 <span class="keyword">if</span>(!<span class="keyword">this</span>.options.folderSelect)&#123;</span><br><span class="line">                     spanitem.append(<span class="string">'&lt;i class="fa fa-caret-right"&gt;&lt;/i&gt;'</span>);</span><br><span class="line">                 &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                     spanitem.append(<span class="string">'&lt;i class="fa fa-caret-down"&gt;&lt;/i&gt;'</span>);</span><br><span class="line">                 &#125;</span><br><span class="line"></span><br><span class="line">                divitem.append(spanitem);</span><br><span class="line">                divitem.attr(<span class="string">'role'</span>, <span class="string">'parent'</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//如果是父选项</span></span><br><span class="line">            <span class="keyword">if</span> (SampleJSONData[j][<span class="string">'subs'</span>] != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.options.isFirstClassSelectable) &#123;</span><br><span class="line">                    appendcheckbox(divitem, oliId);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                appendcheckbox(divitem, oliId);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 放入名称</span></span><br><span class="line">            divitem.append(<span class="string">'&lt;span class="title-group-name"&gt;'</span> + oliName + <span class="string">'&lt;/span&gt;'</span>);</span><br><span class="line">            item.append(divitem);</span><br><span class="line">            container.append(item);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span> (SampleJSONData[j][<span class="string">'subs'</span>]) &#123;</span><br><span class="line">                <span class="keyword">var</span> titlediv = $(<span class="string">'&lt;div class="tree-sub-body"&gt;&lt;/div&gt;'</span>);</span><br><span class="line">                item.append(titlediv);</span><br><span class="line">                <span class="keyword">var</span> subul = $(<span class="string">'&lt;ul&gt;&lt;/ul&gt;'</span>);</span><br><span class="line"></span><br><span class="line">                <span class="comment">//如果不可展开则  收起 子选项</span></span><br><span class="line">                <span class="keyword">if</span>(!<span class="keyword">this</span>.options.folderSelect)&#123;</span><br><span class="line">                    titlediv.hide();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                titlediv.append(subul);</span><br><span class="line"></span><br><span class="line">                <span class="keyword">this</span>.createitem(SampleJSONData[j][<span class="string">'subs'</span>], subul,SampleJSONData[j][<span class="string">'title'</span>],SampleJSONData[j][<span class="string">'id'</span>]);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//取消方法</span></span><br><span class="line">    xiaobuComboTree.prototype.uncheckrow = <span class="function"><span class="keyword">function</span> (<span class="params">oliId, ida</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> _this = <span class="keyword">this</span>,</span><br><span class="line">            icon = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">var</span> id = <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">var</span> childInput = $(<span class="keyword">this</span>).siblings().find(<span class="string">'input'</span>);</span><br><span class="line">        <span class="keyword">if</span>(!_this.options.isMultiple)&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"单选时取消选中"</span>)</span><br><span class="line">            <span class="comment">//单选时</span></span><br><span class="line">            <span class="comment">//将数值置为空</span></span><br><span class="line">            _this.oliIdArray = [];</span><br><span class="line">            _this.roleSelects.attr(<span class="string">"data-id"</span>, _this.oliIdArray);</span><br><span class="line">            <span class="comment">//将所有选项设置为  未选</span></span><br><span class="line">            $(_this.element).find(<span class="string">'.title-containers'</span>).each(<span class="function"><span class="keyword">function</span>(<span class="params">index,item</span>)</span>&#123;</span><br><span class="line">                <span class="keyword">if</span> ($(item).attr(<span class="string">'data-id'</span>) == oliId) &#123;</span><br><span class="line">                    $(item).find(<span class="string">'input'</span>).prop(<span class="string">'checked'</span>, <span class="literal">false</span>);</span><br><span class="line">                    $(item).removeClass(<span class="string">"actived_li"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; _this.oliIdArray.length; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> (_this.oliIdArray[i] == oliId) &#123; <span class="comment">//表示数组里面有这个元素</span></span><br><span class="line">                    id = i; <span class="comment">//元素位置</span></span><br><span class="line">                    _this.oliIdArray.splice(i, <span class="number">1</span>);</span><br><span class="line">                    <span class="comment">//把当前点击的oliId赋值到显示的input的oliId里面</span></span><br><span class="line">                    _this.roleSelects.attr(<span class="string">"data-id"</span>, _this.oliIdArray);</span><br><span class="line">                    <span class="built_in">console</span>.log(<span class="string">'parent删除当前的序号'</span> + oliId + <span class="string">';'</span> + <span class="string">'剩下数组'</span> + _this.oliIdArray)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> j = <span class="number">0</span>, len = childInput.length; j &lt; len; j++) &#123;</span><br><span class="line">                <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; _this.oliIdArray.length; i++) &#123;</span><br><span class="line">                    <span class="keyword">if</span> (_this.oliIdArray[i] == $(childInput[j]).attr(<span class="string">'data-id'</span>)) &#123; <span class="comment">//表示数组里面有这个元素</span></span><br><span class="line">                        id = i; <span class="comment">//元素位置</span></span><br><span class="line">                        _this.oliIdArray.splice(i, <span class="number">1</span>);</span><br><span class="line">                        <span class="comment">//把当前点击的oliId赋值到显示的input的oliId里面</span></span><br><span class="line">                        _this.roleSelects.attr(<span class="string">"data-id"</span>, _this.oliIdArray);</span><br><span class="line">                        <span class="built_in">console</span>.log(<span class="string">'child删除当前的序号'</span> + oliId + <span class="string">';'</span> + <span class="string">'剩下数组'</span> + _this.oliIdArray)</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            $(_this.element).find(<span class="string">'.title-containers'</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params">index, item</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> ($(item).attr(<span class="string">'data-id'</span>) == oliId) &#123;</span><br><span class="line">                    $(item).removeClass(<span class="string">'actived_li'</span>);</span><br><span class="line">                    <span class="keyword">var</span> $checkbox = $(item).find(<span class="string">'input'</span>);</span><br><span class="line">                    $checkbox.prop(<span class="string">'checked'</span>, <span class="literal">false</span>);</span><br><span class="line">                    $(item).parents(<span class="string">'.tree-sub-body'</span>).siblings(<span class="string">'.title-containers'</span>).removeClass(<span class="string">'actived_li'</span>);</span><br><span class="line">                    $(item).parents(<span class="string">'.tree-sub-body'</span>).siblings(<span class="string">'.title-containers'</span>).find(<span class="string">'input'</span>).prop(<span class="string">'checked'</span>, <span class="literal">false</span>);</span><br><span class="line">                    $(item).siblings().find(<span class="string">".title-containers"</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params">index, itemz</span>) </span>&#123;</span><br><span class="line">                        $(itemz).removeClass(<span class="string">'actived_li'</span>);</span><br><span class="line">                        <span class="keyword">var</span> $checkboxz = $(itemz).find(<span class="string">'input'</span>);</span><br><span class="line">                        $checkboxz.prop(<span class="string">'checked'</span>, <span class="literal">false</span>);</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//点击已选择的checked 进行删除</span></span><br><span class="line">            _this.roleSelects.find(<span class="string">'&gt;span'</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params">index, item</span>) </span>&#123;</span><br><span class="line">                <span class="keyword">if</span> ($(item).attr(<span class="string">'data-id'</span>) == oliId) &#123;</span><br><span class="line">                    item.remove();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span> ($(item).attr(<span class="string">'data-id'</span>) == ida) &#123;</span><br><span class="line">                    item.remove();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        $(_this.roleSelects).empty();</span><br><span class="line">        <span class="keyword">var</span> totalDom = <span class="keyword">this</span>.element.find(<span class="string">'.select-tree'</span>).find(<span class="string">'.title-containers.actived_li'</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = totalDom.length; i &lt; len; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> ($(totalDom[i]).parent().parent().parent().siblings(<span class="string">'.title-containers'</span>).hasClass(<span class="string">'actived_li'</span>)) &#123;</span><br><span class="line"></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">var</span> id = $(totalDom[i]).attr(<span class="string">'data-id'</span>);</span><br><span class="line">                <span class="keyword">var</span> name = $(totalDom[i]).attr(<span class="string">'data-name'</span>)</span><br><span class="line">                <span class="keyword">var</span> item = $(<span class="string">"&lt;span data-id='"</span> + id + <span class="string">"' class='input-keyword-item'&gt;&lt;/span&gt;"</span>),</span><br><span class="line">                    namespan = $(<span class="string">"&lt;span&gt;"</span> + name + <span class="string">"&lt;/span&gt;"</span>),</span><br><span class="line">                    checkicon = $(<span class="string">"&lt;i class='close' data-id='"</span> + id + <span class="string">"' &gt;x&lt;/i&gt;"</span>);</span><br><span class="line">                item.append(namespan);</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.options.isMultiple) &#123;</span><br><span class="line">                    item.append(checkicon);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    item.addClass(<span class="string">'single-keyword'</span>)</span><br><span class="line">                &#125;</span><br><span class="line">                _this.roleSelects.append(item);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">var</span> abc = _this.roleSelects.find(<span class="string">'.input-keyword-item'</span>).length;</span><br><span class="line">        <span class="keyword">if</span> (abc == <span class="number">0</span>) &#123;</span><br><span class="line">            $(_this.roleSelects).remove(<span class="string">'data-id'</span>);</span><br><span class="line">            _this.roleSelects.append(_this.myplaceholder);</span><br><span class="line">            _this.myplaceholder.show();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">console</span>.log(_this.oliIdArray.length);</span><br><span class="line">        _this.callback &amp;&amp; _this.callback(_this.getDatas());</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//选中方法</span></span><br><span class="line">    xiaobuComboTree.prototype.checkrow = <span class="function"><span class="keyword">function</span> (<span class="params">target, oliId, ischeckbox</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> _this = <span class="keyword">this</span>;</span><br><span class="line">        target.addClass(<span class="string">"actived_li"</span>); <span class="comment">//点击当前的添加   actived_li这个类；</span></span><br><span class="line">        <span class="comment">// 判断当前元素前面是否有checkbox，如果有且点击的不是单选框就选中</span></span><br><span class="line">        <span class="keyword">var</span> inputcheckbox = target.find(<span class="string">'input'</span>);</span><br><span class="line">        <span class="keyword">if</span> (inputcheckbox.length &gt; <span class="number">0</span> &amp;&amp; !ischeckbox) &#123;</span><br><span class="line">            inputcheckbox.prop(<span class="string">'checked'</span>, <span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        _this.oliIdArray.push(oliId);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">if</span>(!_this.options.isMultiple)&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">"单选 选中时打印的"</span>)</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> childInput = target.siblings().find(<span class="string">'input'</span>);</span><br><span class="line">            <span class="keyword">var</span> childAcitve = target.siblings().find(<span class="string">'.title-containers'</span>);</span><br><span class="line">            <span class="comment">//如果是多选的话 选中父选项 将子选项也全选中</span></span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, leng1 = childAcitve.length; i &lt; leng1; i++) &#123;</span><br><span class="line">                $(childAcitve[i]).addClass(<span class="string">"actived_li"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = childInput.length; i &lt; len; i++) &#123;</span><br><span class="line">                $(childInput[i]).prop(<span class="string">'checked'</span>, <span class="literal">true</span>);</span><br><span class="line">                _this.oliIdArray.push($(childInput[i]).attr(<span class="string">'data-id'</span>));</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            _this.roleSelects.attr(<span class="string">"data-id"</span>, _this.oliIdArray); <span class="comment">//把当前点击的oliId赋值到显示的input的oliId里面</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">//子选项全选中时  父选项也勾起来</span></span><br><span class="line">            <span class="keyword">var</span> checkInput = inputcheckbox.parent().parent().parent().siblings(<span class="string">'li'</span>).find(<span class="string">'input'</span>);</span><br><span class="line">            <span class="keyword">var</span> a = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = checkInput.length; i &lt; len; i++) &#123;</span><br><span class="line">                <span class="keyword">if</span> ($(checkInput[i]).prop(<span class="string">'checked'</span>)) &#123;</span><br><span class="line">                    a++;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (a == checkInput.length) &#123;</span><br><span class="line">                inputcheckbox.parent().parent().parent().parent().parent(<span class="string">'.tree-sub-body'</span>).siblings(<span class="string">'.title-containers'</span>).find(<span class="string">'input'</span>).prop(<span class="string">'checked'</span>, <span class="literal">true</span>)</span><br><span class="line">                inputcheckbox.parent().parent().parent().parent().parent(<span class="string">'.tree-sub-body'</span>).siblings(<span class="string">'.title-containers'</span>).addClass(<span class="string">"actived_li"</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">var</span> checkInputs = inputcheckbox.parents(<span class="string">'.tree-sub-body'</span>);</span><br><span class="line">            <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = checkInputs.length; i &lt; len; i++) &#123;</span><br><span class="line">                <span class="keyword">var</span> selectLength = $(checkInputs[i]).children().children().children(<span class="string">'.title-containers.actived_li'</span>).length;</span><br><span class="line">                <span class="keyword">var</span> childrenLength = $(checkInputs[i]).children().children().children(<span class="string">'.title-containers'</span>).length;</span><br><span class="line">                <span class="keyword">if</span> (selectLength == childrenLength) &#123;</span><br><span class="line">                    $(checkInputs[i]).siblings(<span class="string">'.title-containers'</span>).addClass(<span class="string">'actived_li'</span>);</span><br><span class="line">                    $(checkInputs[i]).siblings(<span class="string">'.title-containers'</span>).find(<span class="string">'input'</span>).prop(<span class="string">'checked'</span>, <span class="literal">true</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        $(_this.roleSelects).empty();</span><br><span class="line">        <span class="keyword">var</span> totalDom = <span class="keyword">this</span>.element.find(<span class="string">'.select-tree'</span>).find(<span class="string">'.title-containers.actived_li'</span>);</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>, len = totalDom.length; i &lt; len; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> ($(totalDom[i]).parent().parent().parent().siblings(<span class="string">'.title-containers'</span>).hasClass(<span class="string">'actived_li'</span>)) &#123;</span><br><span class="line"></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">var</span> id = $(totalDom[i]).attr(<span class="string">'data-id'</span>);</span><br><span class="line">                <span class="keyword">var</span> name = $(totalDom[i]).attr(<span class="string">'data-name'</span>);</span><br><span class="line">                <span class="keyword">if</span>(_this.options.isShowParent)&#123;</span><br><span class="line">                    <span class="keyword">var</span> parentName = $(totalDom[i]).closest(<span class="string">"li"</span>).attr(<span class="string">"data-parentName"</span>);</span><br><span class="line">                    <span class="built_in">console</span>.log(parentName)</span><br><span class="line">                    <span class="keyword">if</span>(parentName.indexOf(<span class="string">"市"</span>) &gt; <span class="number">-1</span>)&#123;</span><br><span class="line">                        parentName = <span class="string">""</span>;</span><br><span class="line">                    &#125;</span><br><span class="line">                    name = parentName + name;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">// var id = $(totalDom[i]).attr('data-id');</span></span><br><span class="line">                <span class="keyword">var</span> item = $(<span class="string">"&lt;span data-id='"</span> + id + <span class="string">"' class='input-keyword-item'&gt;&lt;/span&gt;"</span>),</span><br><span class="line">                    namespan = $(<span class="string">"&lt;span&gt;"</span> + name + <span class="string">"&lt;/span&gt;"</span>),</span><br><span class="line">                    checkicon = $(<span class="string">"&lt;i class='close' data-id='"</span> + id + <span class="string">"' &gt;x&lt;/i&gt;"</span>);</span><br><span class="line">                item.append(namespan);</span><br><span class="line">                <span class="keyword">if</span> (<span class="keyword">this</span>.options.isMultiple) &#123;</span><br><span class="line">                    item.append(checkicon);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    item.addClass(<span class="string">'single-keyword'</span>)</span><br><span class="line">                &#125;</span><br><span class="line">                _this.roleSelects.append(item);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (_this.oliIdArray.length === <span class="number">0</span>) &#123;</span><br><span class="line">            _this.myplaceholder.show();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="built_in">console</span>.log(_this.oliIdArray.length);</span><br><span class="line">        _this.callback &amp;&amp; _this.callback(_this.getDatas());</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//隐藏选项</span></span><br><span class="line">    xiaobuComboTree.prototype.hideul = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="comment">// event=event||window.event;</span></span><br><span class="line">        $(<span class="keyword">this</span>.element).find(<span class="string">'.input-keyword-wrap .fa'</span>).removeClass(<span class="string">"fa-caret-up"</span>).addClass(<span class="string">"fa-caret-down"</span>); <span class="comment">//当点隐藏ul弹窗时候，把小图标恢复原状</span></span><br><span class="line">        $(<span class="keyword">this</span>.element).find(<span class="string">'.drop-down-wrap'</span>).hide(); <span class="comment">//当点击空白处，隐藏ul弹窗</span></span><br><span class="line">        <span class="comment">//清除搜素框</span></span><br><span class="line">        <span class="keyword">this</span>.clearSearchValue();</span><br><span class="line">        $(<span class="keyword">this</span>.element).css(<span class="string">'position'</span>, <span class="string">''</span>);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    xiaobuComboTree.prototype.clearSearchValue = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">"清除搜索框内容"</span>);</span><br><span class="line">        <span class="keyword">this</span>.comboxinput.val(<span class="string">''</span>);</span><br><span class="line">        <span class="keyword">this</span>.comboxinput.trigger(<span class="string">'keyup'</span>);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//获取已选择数据 数组的形式</span></span><br><span class="line">    xiaobuComboTree.prototype.getDatas = <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> arr = [];</span><br><span class="line">        $(<span class="keyword">this</span>.element).find(<span class="string">'.input-keyword-item'</span>).each(<span class="function"><span class="keyword">function</span> (<span class="params">index, item</span>) </span>&#123;</span><br><span class="line">            arr.push(&#123;</span><br><span class="line">                id: $(item).attr(<span class="string">'data-id'</span>),</span><br><span class="line">                val: $(item).find(<span class="string">'span'</span>).html()</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;);</span><br><span class="line">        <span class="keyword">return</span> arr;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//清空选项</span></span><br><span class="line">    xiaobuComboTree.prototype.clearSelect = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">        <span class="comment">//清空选项中的内容</span></span><br><span class="line">        <span class="keyword">this</span>.roleSelects.attr(<span class="string">"data-id"</span>,<span class="keyword">this</span>.oliIdArray);</span><br><span class="line">        <span class="keyword">this</span>.roleSelects.html(<span class="string">'&lt;span _id="myplaceholder" class="input-tips"&gt;'</span> + <span class="keyword">this</span>.options.placeholder + <span class="string">'&lt;/span&gt;'</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//清空选择框的内容</span></span><br><span class="line">        <span class="keyword">var</span> li = <span class="keyword">this</span>.element.find(<span class="string">".select-tree-list .title-containers.actived_li"</span>);</span><br><span class="line">        <span class="keyword">var</span> checkBox = <span class="keyword">this</span>.element.find(<span class="string">".select-tree-list .title-containers.actived_li"</span>).find(<span class="string">'input'</span>);</span><br><span class="line">        li.removeClass(<span class="string">'actived_li'</span>);</span><br><span class="line">        checkBox.prop(<span class="string">"checked"</span>,<span class="literal">false</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//显示提示框</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//数组形式传值</span></span><br><span class="line">    xiaobuComboTree.prototype.setDatas = <span class="function"><span class="keyword">function</span> (<span class="params">list</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> _this = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">var</span> arr = [];  <span class="comment">//值</span></span><br><span class="line">        <span class="keyword">if</span>(list.length == <span class="number">0</span>)&#123;</span><br><span class="line">            <span class="keyword">this</span>.clearSelect();</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.roleSelects.html(<span class="string">""</span>);</span><br><span class="line">        <span class="keyword">if</span>(!_this.options.isMultiple)&#123;</span><br><span class="line">            list = list.slice(<span class="number">0</span>,<span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; list.length; i++) &#123;</span><br><span class="line">            arr.push(list[i].id);</span><br><span class="line">            <span class="keyword">var</span> item = $(<span class="string">"&lt;span data-id='"</span> + list[i].id + <span class="string">"' class='input-keyword-item'&gt;&lt;/span&gt;"</span>),</span><br><span class="line">                namespan = $(<span class="string">"&lt;span&gt;"</span> + list[i].name + <span class="string">"&lt;/span&gt;"</span>),</span><br><span class="line">                checkicon = $(<span class="string">"&lt;i class='close' data-id='"</span> + list[i].id + <span class="string">"' &gt;x&lt;/i&gt;"</span>);</span><br><span class="line">            item.append(namespan);</span><br><span class="line">            <span class="keyword">if</span> (_this.options.isMultiple) &#123;</span><br><span class="line">                item.append(checkicon);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                item.addClass(<span class="string">'single-keyword'</span>)</span><br><span class="line">            &#125;</span><br><span class="line">            _this.roleSelects.append(item);</span><br><span class="line">            _this.myplaceholder.hide();</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">            <span class="comment">//勾选选择项</span></span><br><span class="line">            <span class="keyword">var</span> selectCheckBoxs = <span class="keyword">this</span>.element.find($.parseHTML(<span class="string">".title-containers[data-id="</span> + list[i].id + <span class="string">"]"</span>));</span><br><span class="line">            <span class="keyword">var</span> childCheckBox = <span class="keyword">this</span>.element.find($.parseHTML(<span class="string">".title-containers[data-id="</span> + list[i].id + <span class="string">"]"</span>)).siblings(<span class="string">".tree-sub-body"</span>).find(<span class="string">".title-containers"</span>);</span><br><span class="line">            selectCheckBoxs.addClass(<span class="string">"actived_li"</span>);</span><br><span class="line">            childCheckBox.addClass(<span class="string">"actived_li"</span>);</span><br><span class="line">            selectCheckBoxs.find(<span class="string">'input'</span>).prop(<span class="string">"checked"</span>, <span class="literal">true</span>);</span><br><span class="line">            childCheckBox.find(<span class="string">'input'</span>).prop(<span class="string">"checked"</span>, <span class="literal">true</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">this</span>.oliIdArray = arr;</span><br><span class="line">        <span class="keyword">this</span>.roleSelects.attr(<span class="string">"data-id"</span>,<span class="keyword">this</span>.oliIdArray);</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="keyword">this</span>.oliIdArray)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">appendcheckbox</span>(<span class="params">divitem, oliId</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> $checkboxspan = $(<span class="string">'&lt;span class="handle-checkbox"&gt;&lt;/span&gt;'</span>),</span><br><span class="line">            $checkbox = $(<span class="string">'&lt;input data-id="'</span> + oliId + <span class="string">'" type="checkbox"&gt;'</span>);</span><br><span class="line">        $checkboxspan.append($checkbox);</span><br><span class="line">        divitem.append($checkboxspan);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建调用方法</span></span><br><span class="line">    $.fn[comboTreePlugins] = <span class="function"><span class="keyword">function</span> (<span class="params">options,callback</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> xiaobuComboTree(<span class="keyword">this</span>,options,callback);</span><br><span class="line">        <span class="comment">//链式调用</span></span><br><span class="line">        <span class="comment">// return this.each(function()&#123;</span></span><br><span class="line">        <span class="comment">//     console.log($(this));</span></span><br><span class="line">        <span class="comment">//     // 单例模式</span></span><br><span class="line">        <span class="comment">//     var me = $(this),</span></span><br><span class="line">        <span class="comment">//         instance = me.data('plugin_' + comboTreePlugins);</span></span><br><span class="line">        <span class="comment">//     if (!instance) &#123;</span></span><br><span class="line">        <span class="comment">//         instance = new xiaobuComboTree(me,options);</span></span><br><span class="line">        <span class="comment">//         me.data('plugin_' + comboTreePlugins,instance);</span></span><br><span class="line">        <span class="comment">//     &#125;</span></span><br><span class="line">        <span class="comment">//     if ($.type(options) === "string") return instance[options]();</span></span><br><span class="line">        <span class="comment">// &#125;);</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;)(jQuery, <span class="built_in">window</span>, <span class="built_in">document</span>);</span><br></pre></td></tr></table></figure><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*tree.css*/</span></span><br><span class="line"></span><br><span class="line"><span class="selector-tag">html</span>,<span class="selector-tag">body</span>&#123;</span><br><span class="line"><span class="attribute">height</span>:<span class="number">100%</span>;</span><br><span class="line"><span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line"><span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line"><span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">body</span>&#123;</span><br><span class="line"><span class="attribute">overflow</span>: hidden;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.hide</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.show</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.wrapper</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">1024px</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">50px</span> auto <span class="number">0</span> auto;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.wrapper</span>&gt;<span class="selector-tag">div</span>&#123;</span><br><span class="line">  <span class="attribute">float</span>: left;</span><br><span class="line">  <span class="attribute">margin-right</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.wrapper</span><span class="selector-pseudo">::after</span>&#123;</span><br><span class="line">  <span class="attribute">visibility</span>: hidden;</span><br><span class="line">  <span class="attribute">display</span>: block;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">content</span>: <span class="string">" "</span>;</span><br><span class="line">  <span class="attribute">clear</span>: both;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.select-tree-wrap</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>:auto;</span><br><span class="line">  <span class="attribute">min-height</span>:<span class="number">34px</span>;</span><br><span class="line">  <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#e5e6e7</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.input-keyword-wrap</span>&#123;</span><br><span class="line">  <span class="attribute">min-height</span>: <span class="number">34px</span>;</span><br><span class="line">  <span class="attribute">position</span>:relative;</span><br><span class="line">  <span class="attribute">padding</span>:<span class="number">0</span> <span class="number">20px</span> <span class="number">0</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.input-keyword-wrap</span> <span class="selector-class">.handle-arrow</span>&#123;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">top</span>: <span class="number">10px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.input-keyword-wrap</span> <span class="selector-class">.select-menu-input</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">overflow</span>: hidden;</span><br><span class="line">  <span class="comment">/*margin-bottom:4px;*/</span></span><br><span class="line">  <span class="comment">/*min-height:36px;*/</span></span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.input-keyword-wrap</span> <span class="selector-class">.input-tips</span>&#123;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">14px</span>;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">34px</span>;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">color</span>: <span class="number">#B4B4B4</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.input-keyword-wrap</span> <span class="selector-class">.single-keyword</span>&#123;</span><br><span class="line">  <span class="attribute">border</span>:<span class="number">0px</span> <span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.input-keyword-wrap</span> <span class="selector-class">.input-keyword-item</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: auto;</span><br><span class="line">    <span class="attribute">margin-top</span>: <span class="number">4px</span>;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#0095e7</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#0095e7</span>;</span><br><span class="line">    <span class="attribute">border-radius</span>: <span class="number">3px</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.input-keyword-wrap</span> <span class="selector-class">.input-keyword-item</span> <span class="selector-tag">span</span><span class="selector-pseudo">:nth-child(1)</span> &#123;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">26px</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">width</span>: auto;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">26px</span>;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">margin-left</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">margin-right</span>: <span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">border</span>: <span class="number">0</span> none;</span><br><span class="line">    <span class="attribute">padding-right</span>: <span class="number">5px</span>;</span><br><span class="line">    <span class="attribute">color</span>: <span class="number">#323232</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.input-keyword-wrap</span> <span class="selector-class">.input-keyword-item</span> <span class="selector-tag">i</span> &#123;</span><br><span class="line">    <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">display</span>: block;</span><br><span class="line">    <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">    <span class="attribute">margin</span>: <span class="number">3px</span> <span class="number">8px</span> <span class="number">0px</span> <span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">float</span>: left;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">20px</span>;</span><br><span class="line">    <span class="attribute">text-align</span>: center;</span><br><span class="line">    <span class="attribute">font-style</span>: normal;</span><br><span class="line">    <span class="attribute">text-indent</span>: <span class="number">0px</span>;</span><br><span class="line">    <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.drop-down-wrap</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.drop-down-wrap</span> <span class="selector-class">.noresults</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>:none;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">font-size</span>: <span class="number">12px</span>;</span><br><span class="line">  <span class="attribute">color</span>:<span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.drop-down-wrap</span> <span class="selector-class">.handle-left-icons</span>&#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.drop-down-wrap</span> <span class="selector-class">.title-group-name</span>&#123;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.drop-down-wrap</span> <span class="selector-class">.handle-checkbox</span>&#123;</span><br><span class="line">  <span class="attribute">text-align</span>: center;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">30px</span>;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.drop-down-wrap</span> <span class="selector-class">.keyword-search</span>&#123;</span><br><span class="line">  <span class="attribute">padding</span>:<span class="number">10px</span>;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span>;</span><br><span class="line">  <span class="attribute">border-top</span>:<span class="number">1px</span> solid <span class="number">#ccc</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box;</span><br><span class="line">  <span class="attribute">position</span>: relative;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.drop-down-wrap</span> <span class="selector-class">.keyword-search</span> <span class="selector-tag">input</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">100%</span><span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">outline</span>: <span class="number">0</span><span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">30px</span> <span class="number">0</span> <span class="number">10px</span><span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">height</span>:<span class="number">34px</span><span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">border</span>:<span class="number">1px</span> solid <span class="number">#ccc</span><span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">box-sizing</span>: border-box<span class="meta">!important</span>;</span><br><span class="line">  <span class="attribute">border-radius</span>: <span class="number">5px</span><span class="meta">!important</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.drop-down-wrap</span> <span class="selector-class">.keyword-search</span> <span class="selector-class">.search-icons</span>&#123;</span><br><span class="line">  <span class="attribute">width</span>:<span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">display</span>: inline-block;</span><br><span class="line">  <span class="attribute">position</span>: absolute;</span><br><span class="line">  <span class="attribute">right</span>: <span class="number">15px</span>;</span><br><span class="line">  <span class="attribute">top</span>:<span class="number">16px</span>;</span><br><span class="line">  <span class="attribute">color</span>:<span class="number">#ccc</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.drop-down-wrap</span> <span class="selector-class">.select-tree-list</span>&#123;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">margin</span>: <span class="number">0</span>;</span><br><span class="line">  <span class="attribute">max-height</span>: <span class="number">400px</span>;</span><br><span class="line">  <span class="attribute">overflow-x</span>: scroll;</span><br><span class="line">  <span class="attribute">text-align</span>: left;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.drop-down-wrap</span> <span class="selector-class">.select-tree-list</span> <span class="selector-tag">li</span>&#123;</span><br><span class="line">  <span class="attribute">list-style-type</span>: none;</span><br><span class="line">  <span class="attribute">cursor</span>: pointer;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.drop-down-wrap</span> <span class="selector-class">.title-container</span>&#123;</span><br><span class="line">  <span class="attribute">line-height</span>: <span class="number">34px</span>;</span><br><span class="line">  <span class="attribute">padding</span>: <span class="number">0</span> <span class="number">20px</span>;</span><br><span class="line">  <span class="attribute">display</span>: flex;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.drop-down-wrap</span> <span class="selector-class">.title-container</span><span class="selector-pseudo">:hover</span>,<span class="selector-class">.drop-down-wrap</span> <span class="selector-class">.title-containers</span><span class="selector-pseudo">:hover</span>&#123;</span><br><span class="line">  <span class="attribute">background</span>:<span class="number">#f2f2f2</span>;</span><br><span class="line">  <span class="attribute">color</span>:<span class="number">#0079fe</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.drop-down-wrap</span> <span class="selector-class">.select-tree-list</span> <span class="selector-tag">li</span> <span class="selector-class">.tree-sub-body</span> <span class="selector-tag">ul</span>&#123;</span><br><span class="line">  <span class="attribute">padding</span>:<span class="number">0</span>;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">20px</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.drop-down-wrap</span> <span class="selector-class">.select-tree-list</span> <span class="selector-tag">li</span> <span class="selector-class">.tree-sub-body</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span>&#123;</span><br><span class="line">  <span class="attribute">line-height</span>:<span class="number">34px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.drop-down-wrap</span> <span class="selector-class">.select-tree-list</span> <span class="selector-tag">li</span> <span class="selector-class">.tree-sub-body</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-class">.title-container</span>&#123;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">30px</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.drop-down-wrap</span> <span class="selector-class">.select-tree-list</span> <span class="selector-tag">li</span> <span class="selector-class">.tree-sub-body</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-class">.tree-sub-body</span> <span class="selector-tag">ul</span> <span class="selector-tag">li</span> <span class="selector-class">.title-container</span>&#123;</span><br><span class="line">  <span class="attribute">padding-left</span>: <span class="number">45px</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="selector-class">.actived_li</span>&#123;</span><br><span class="line"><span class="attribute">color</span>: <span class="number">#0095e7</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.title-containers</span> &#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">line-height</span>: <span class="number">34px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>树选项插件的使用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> SampleJSONData = [];   <span class="comment">//树选项数组</span></span><br><span class="line"><span class="keyword">var</span> productService;   <span class="comment">//产品服务类型</span></span><br><span class="line">SampleJSONData = xiaobuGetNodes(list);</span><br><span class="line"><span class="comment">//初始化产品/服务类型树图</span></span><br><span class="line">productService = $(<span class="string">'#justAnInputBox2'</span>).xiaobuComboTree(&#123;</span><br><span class="line">        source: SampleJSONData,</span><br><span class="line">        isMultiple: <span class="literal">true</span>,</span><br><span class="line">        isFirstClassSelectable: <span class="literal">true</span>, <span class="comment">//第一级是否可选</span></span><br><span class="line">        cascadeSelect: <span class="literal">true</span>,</span><br><span class="line">        selectedlength: <span class="number">100</span>, <span class="comment">//最多可选</span></span><br><span class="line">        placeholder: <span class="string">'请选择产品/服务类型'</span>,</span><br><span class="line">    &#125;,<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;           <span class="comment">//选项变化回调函数</span></span><br><span class="line">        <span class="keyword">var</span> showType = <span class="literal">false</span>;</span><br><span class="line">        <span class="keyword">var</span> len = data.length;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; len; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span> (data[i].val == <span class="string">"工业互联网平台"</span>) &#123;</span><br><span class="line">                showType = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (showType) &#123;</span><br><span class="line">            validateCompanyType = <span class="literal">true</span>;</span><br><span class="line">            $(<span class="string">"#companyType"</span>).show();</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            validateCompanyType = <span class="literal">false</span>;</span><br><span class="line">            $(<span class="string">"#companyType"</span>).hide();</span><br><span class="line">            <span class="comment">//将企业类别的值置空</span></span><br><span class="line">            $(<span class="string">"#companyType select"</span>).val(<span class="number">0</span>);</span><br><span class="line">            xiaobuSelectInit();</span><br><span class="line">        &#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> productService.setDatas(arr);   <span class="comment">//设置选项的值</span></span><br><span class="line"></span><br><span class="line"> <span class="keyword">var</span> serviceData = productService.getDatas();   <span class="comment">//获取选中的值（id）</span></span><br></pre></td></tr></table></figure><p>获取树选项的内容</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取树选项的值</span></span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">getTreeJsonVal</span>(<span class="params">selectedList,selectList</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">var</span> list = [];</span><br><span class="line">         <span class="keyword">var</span> map = &#123;&#125;;</span><br><span class="line">         <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> selectedList)&#123;</span><br><span class="line">             map[selectedList[key]] = selectedList[key];</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">for</span> (<span class="keyword">var</span> key <span class="keyword">in</span> selectList)&#123;</span><br><span class="line">             <span class="keyword">var</span> obj = selectList[key];</span><br><span class="line">             <span class="keyword">var</span> tempArr = obj.list || obj.subs;</span><br><span class="line">             <span class="keyword">if</span> (map[obj.id])&#123;</span><br><span class="line">                 list.push(&#123;<span class="attr">id</span>:obj.id,<span class="attr">name</span>: obj.title || obj.name&#125;);</span><br><span class="line">             &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                 <span class="keyword">if</span> (tempArr &amp;&amp; tempArr.length)&#123;</span><br><span class="line">                     list = list.concat(getTreeJsonVal(selectedList, tempArr));</span><br><span class="line">                 &#125;</span><br><span class="line">             &#125;</span><br><span class="line">         &#125;</span><br><span class="line">         <span class="keyword">return</span> list;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p>5 lay-ui 插件的日历调用</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//add by shenyanxiang</span></span><br><span class="line">  <span class="comment">// 调用 &lt;input type="text" readonly placeholder="请选择时间"  id="不要重复的id即可" class="laydate"&gt;</span></span><br><span class="line">  <span class="function"><span class="keyword">function</span> <span class="title">loadDate</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">      <span class="comment">//日历插件调用</span></span><br><span class="line">      $(<span class="string">"body"</span>).on(<span class="string">"click"</span>,<span class="string">"input.laydate"</span>,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">          <span class="keyword">var</span> elem = <span class="string">"#"</span> + $(<span class="keyword">this</span>).attr(<span class="string">"id"</span>);</span><br><span class="line">          <span class="built_in">console</span>.log(<span class="string">"触发小布日历插件"</span> + elem);</span><br><span class="line">          laydate(&#123;</span><br><span class="line">              elem: elem,</span><br><span class="line">              format: <span class="string">'YYYY-MM-DD'</span>,</span><br><span class="line">              min: <span class="string">'1900-01-01'</span>, <span class="comment">//</span></span><br><span class="line">              max: laydate.now(<span class="number">0</span>, <span class="string">"YYYY-MM-DD"</span>), <span class="comment">//最大日期</span></span><br><span class="line">              istime: <span class="literal">false</span>,</span><br><span class="line">              istoday: <span class="literal">true</span>,</span><br><span class="line">              ready: <span class="function"><span class="keyword">function</span> (<span class="params">date</span>) </span>&#123;</span><br><span class="line">                  $(_this).val(DateJsonFormat(date, <span class="keyword">this</span>.format));   <span class="comment">//初次点击时自动显示当前时间</span></span><br><span class="line">              &#125;</span><br><span class="line">          &#125;);</span><br><span class="line">      &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>6 只允许数值的输入框</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   * add by shenyanxiang</span></span><br><span class="line"><span class="comment">   * canFu : true表示允许负数 false表示不允许</span></span><br><span class="line"><span class="comment">   * canDot : true  表示允许小数点  false表示不允许</span></span><br><span class="line"><span class="comment">   * num ：表示保留小数点后 几位</span></span><br><span class="line"><span class="comment">   * max : 表示小数点左边最大几位数</span></span><br><span class="line"><span class="comment">   * 调用   onkeyup = "xiaobuClearNum(event,this,true,true,2)"  onblur="checkNum(this)"  onpaste="return false"</span></span><br><span class="line"><span class="comment">   * */</span></span><br><span class="line">   <span class="comment">//可正数可负数 浮点类型</span></span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">xiaobuClearNum</span>(<span class="params">event,obj,canFu,canDot,num,max</span>)</span>&#123;</span><br><span class="line">       max = max || <span class="number">9</span>;</span><br><span class="line">       canFu = canFu || <span class="literal">false</span>;</span><br><span class="line">       canDot = canDot || <span class="literal">false</span>;</span><br><span class="line">       num = num || <span class="number">2</span>;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">"执行了clearNoNum"</span>)</span><br><span class="line">    event = <span class="built_in">window</span>.event||event;</span><br><span class="line">    <span class="keyword">if</span>(event.keyCode == <span class="number">37</span> | event.keyCode == <span class="number">39</span>)&#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">       &#125;</span><br><span class="line">       <span class="keyword">var</span> t = obj.value.charAt(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(canDot)&#123;</span><br><span class="line">           <span class="comment">//去除非数字或不是‘.’的其他字符</span></span><br><span class="line">           obj.value = obj.value.replace(<span class="regexp">/[^\d.]/g</span>,<span class="string">''</span>);</span><br><span class="line">       &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">           obj.value = obj.value.replace(<span class="regexp">/[^\d]/g</span>,<span class="string">''</span>);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="keyword">if</span>(canDot)&#123;</span><br><span class="line">           <span class="comment">//去除开头连续的 0</span></span><br><span class="line">           obj.value = obj.value.replace(<span class="regexp">/^0&#123;2,&#125;/g</span>,<span class="string">''</span>);</span><br><span class="line">       &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">           <span class="comment">//去除开头的 0</span></span><br><span class="line">           obj.value = obj.value.replace(<span class="regexp">/^0&#123;1,&#125;/g</span>,<span class="string">''</span>);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">       <span class="comment">//保证第一个数值为 数字而不是 小数点</span></span><br><span class="line">       obj.value = obj.value.replace(<span class="regexp">/^\.(\d&#123;1,&#125;)/g</span>,<span class="string">''</span>);</span><br><span class="line"></span><br><span class="line">       <span class="comment">//保证只有出现一个.  而没有多个</span></span><br><span class="line">       obj.value = obj.value.replace(<span class="regexp">/\.&#123;2,&#125;/g</span>,<span class="string">''</span>);</span><br><span class="line"></span><br><span class="line">       <span class="comment">//保证 .只能出现一次，而不能出现2次或2次以上,把第一个.换成$#$,把后面的.去掉,再把 $#$ 换回来</span></span><br><span class="line">       obj.value = obj.value.replace(<span class="string">"."</span>,<span class="string">"$#$"</span>).replace(<span class="regexp">/\./g</span>,<span class="string">""</span>).replace(<span class="string">"$#$"</span>,<span class="string">"."</span>);</span><br><span class="line"></span><br><span class="line">       <span class="keyword">var</span> len = obj.value.length;</span><br><span class="line">       <span class="keyword">if</span>(canDot)&#123;</span><br><span class="line">           <span class="comment">//保留小数点后num位</span></span><br><span class="line">           <span class="keyword">var</span> dotIndex = obj.value.indexOf(<span class="string">"."</span>);</span><br><span class="line">           <span class="comment">//如果存在小数点且 小数点不在最后一个</span></span><br><span class="line">           <span class="keyword">if</span>(dotIndex &gt; <span class="number">-1</span>)&#123;</span><br><span class="line">               <span class="keyword">var</span> str1 = obj.value.split(<span class="string">'.'</span>)[<span class="number">0</span>];</span><br><span class="line">               <span class="keyword">var</span> str2 = obj.value.split(<span class="string">'.'</span>)[<span class="number">1</span>];</span><br><span class="line">               obj.value = str1.substring(<span class="number">0</span>,max) + <span class="string">'.'</span> + str2.substring(<span class="number">0</span>,num);</span><br><span class="line">           &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">               obj.value = obj.value.substring(<span class="number">0</span>,max);</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">           obj.value = obj.value.substring(<span class="number">0</span>,max);</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">       <span class="comment">//如果第一位是负号，将负号补回去，不允许为负值 则注释</span></span><br><span class="line">       <span class="keyword">if</span>(t == <span class="string">'-'</span> &amp;&amp; canFu)&#123;</span><br><span class="line">           obj.value = <span class="string">"-"</span> + obj.value;</span><br><span class="line">       &#125;</span><br><span class="line"></span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line">   <span class="comment">//add by shenyanxiang</span></span><br><span class="line">   <span class="comment">//onkeyup = "xiaobuClearNum(event,this,true,true,2)"  onblur="checkNum(this)"  onpaste="return false"</span></span><br><span class="line">   <span class="function"><span class="keyword">function</span> <span class="title">checkNum</span>(<span class="params">obj</span>)</span>&#123;</span><br><span class="line">       maxNum = maxNum || <span class="number">1000000000</span>;</span><br><span class="line">       canFu = canFu || <span class="literal">false</span>;</span><br><span class="line">       <span class="comment">//清除最后一个字符为  小数点</span></span><br><span class="line">    obj.value = obj.value.replace(<span class="regexp">/\.$/</span>,<span class="string">""</span>);</span><br><span class="line"></span><br><span class="line">       <span class="comment">//如果字符串长度大于1且第一位是0且第二位不是 小数点 则把 0去掉</span></span><br><span class="line">       <span class="keyword">if</span>(obj.value.length &gt; <span class="number">1</span> &amp;&amp; obj.value.charAt(<span class="number">0</span>) == <span class="string">"0"</span> &amp;&amp; obj.value.charAt(<span class="number">1</span>) != <span class="string">"."</span>)&#123;</span><br><span class="line">           obj.value = obj.value.substr(<span class="number">1</span>,obj.value.length);</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;产业监测系统汇总&quot;&gt;&lt;a href=&quot;#产业监测系统汇总&quot; class=&quot;headerlink&quot; title=&quot;产业监测系统汇总&quot;&gt;&lt;/a&gt;产业监测系统汇总&lt;/h3&gt;&lt;p&gt;1 下拉选项样式初始化&lt;/p&gt;
&lt;figure class=&quot;highlight js&quot;&gt;&lt;
      
    
    </summary>
    
    
      <category term="-jsp" scheme="https://shenxiaobu.github.io/tags/jsp/"/>
    
  </entry>
  
  <entry>
    <title>有课开发经验汇总</title>
    <link href="https://shenxiaobu.github.io/2020/02/10/%E6%9C%89%E8%AF%BE%E5%BC%80%E5%8F%91%E7%BB%8F%E9%AA%8C%E6%B1%87%E6%80%BB/"/>
    <id>https://shenxiaobu.github.io/2020/02/10/有课开发经验汇总/</id>
    <published>2020-02-10T11:20:24.000Z</published>
    <updated>2020-03-22T13:49:33.142Z</updated>
    
    <content type="html"><![CDATA[<h3 id="有课开发经验汇总"><a href="#有课开发经验汇总" class="headerlink" title="有课开发经验汇总"></a>有课开发经验汇总</h3><p>随便汇总想到哪写到哪，有些可能是简单的东西，但还是写一下</p><ol><li>实现自定义遮盖符号的密码框</li></ol><p><img src="/2020/02/10/有课开发经验汇总/" alt="1581334230361.png"></p><p>解决： </p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">    &lt;div class=&quot;currentPwd_box input_box&quot;&gt;</span><br><span class="line">            &lt;span&gt;原始密码&lt;/span&gt;&lt;input class=&quot;show&quot; type=&quot;text&quot; spellcheck=&quot;false&quot;   readonly=&quot;readonly&quot; unselectable=&quot;on&quot; onfocus=&quot;this.blur()&quot;  v-model=&apos;oldPwd&apos; name=&apos;oldPwd&apos; :placeholder=&quot;请输入原始密码&quot;&gt;</span><br><span class="line">            &lt;input type=&quot;url&quot; class=&quot;really&quot; spellcheck=&quot;false&quot;  @keyup=&quot;validate(0,reallyOldPwd)&quot; autocorrect=&quot;off&quot; v-model=&apos;reallyOldPwd&apos; name=&apos;reallyOldPwd&apos; :placeholder=&quot;$t(&apos;l.s.user.modifyPwd.inputOldPwd&apos;)&quot;&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">   .currentPwd_box input.show,</span><br><span class="line">    .currentPwd_box input.really&#123;</span><br><span class="line">        font-family: &apos;Cour&apos;;   /*等宽字体*/</span><br><span class="line">        width: 4.8rem;</span><br><span class="line">        height: 100%;</span><br><span class="line">        border: none;</span><br><span class="line">        outline: none;</span><br><span class="line">        text-align: right;</span><br><span class="line">        padding: 0 0.54rem 0 0.4rem;</span><br><span class="line">        font-size: 0.32rem;</span><br><span class="line">    &#125;</span><br><span class="line"> </span><br><span class="line">    .currentPwd_box input.really&#123;</span><br><span class="line">        position: absolute;</span><br><span class="line">        top: 0;</span><br><span class="line">        right: 0;</span><br><span class="line">        color: transparent;</span><br><span class="line">        caret-color: rgb(91, 186, 180);</span><br><span class="line">        /* caret-color: transparent; */</span><br><span class="line">        background: transparent;</span><br><span class="line">        /* opacity: 0; */</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>真正的输入框覆盖一层显示 替代符的输入框，将真正的输入框背景和文字都设置成透明。</p><p>遇到问题：由于字体宽度不一样，导致光标有时不对，所以需要这些输入框需要使用等宽字体。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">@font-face &#123;</span><br><span class="line">    font-family: &apos;Cour&apos;;</span><br><span class="line">    src: url(&apos;../font/cour.ttf&apos;);</span><br><span class="line">    font-weight: normal;</span><br><span class="line">    font-style: normal;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后监听onkeyup，每当输入时将内容改为 替代符号</p><ol start="2"><li>输入框在ios上特殊的问题。</li></ol><p><img src="/2020/02/10/有课开发经验汇总/1581335169058.png" alt="1581335169058"></p><p>输入框type类型为 password 且键盘大写锁定且为最新ios系统，在输入框右边会有 大写锁定浮标</p><p><img src="/2020/02/10/有课开发经验汇总/1581335326983.png" alt="1581335326983"></p><p>当type类型不管是啥，在ios系统上输入不是英文单词的字符串时就会出现这个，解决方法就是</p><p>spellcheck=”false”    检查拼写错误关闭掉</p><ol start="3"><li>ios上顺畅滚动</li></ol><p>解决办法： -webkit-overflow-scrolling: touch;</p><ol start="4"><li>禁止非文本框或输入框文本复制</li></ol><p>解决办法</p><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">*&#123;</span><br><span class="line">     <span class="comment">/* //系统默认菜单被禁用 */</span></span><br><span class="line">    <span class="attribute">-webkit-touch-callout</span>:none;</span><br><span class="line">    <span class="comment">/* /webkit浏览器/ */</span></span><br><span class="line">    <span class="attribute">-webkit-user-select</span>:none;</span><br><span class="line">    <span class="comment">/* /早期浏览器/ */</span></span><br><span class="line">    <span class="attribute">-khtml-user-select</span>:none; </span><br><span class="line">    <span class="comment">/* /火狐/ */</span></span><br><span class="line">    <span class="attribute">-moz-user-select</span>:none;</span><br><span class="line">    <span class="comment">/* /IE10/ */</span></span><br><span class="line">    <span class="attribute">-ms-user-select</span>:none;</span><br><span class="line">    <span class="attribute">user-select</span>:none;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-tag">textarea</span>,<span class="selector-tag">input</span>&#123;</span><br><span class="line">    <span class="attribute">-webkit-user-select</span>:auto;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="5"><li>flex相关样式</li></ol><figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/* flex相关开始 */</span></span><br><span class="line"><span class="selector-class">.flex</span>&#123;</span><br><span class="line">    <span class="attribute">display</span>: flex;</span><br><span class="line">    <span class="attribute">justify-content</span>: flex-start;</span><br><span class="line">    <span class="attribute">align-items</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.flex-center</span>&#123;</span><br><span class="line">    <span class="attribute">justify-content</span>: center;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.flex-between</span>&#123;</span><br><span class="line">    <span class="attribute">justify-content</span>: space-between;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.flex-around</span>&#123;</span><br><span class="line">    <span class="attribute">justify-content</span>: space-around;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.flex-end</span>&#123;</span><br><span class="line">    <span class="attribute">justify-content</span>: flex-end;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.flex-col</span>&#123;</span><br><span class="line">    <span class="attribute">flex-direction</span>: column;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.flex-wrap</span>&#123;</span><br><span class="line">    <span class="attribute">flex-wrap</span>: wrap;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.flex-grow</span>&#123;</span><br><span class="line">    <span class="attribute">flex-grow</span>: <span class="number">1</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="selector-class">.flex-shrink</span>&#123;</span><br><span class="line">    <span class="attribute">flex-shrink</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/* flex相关结束 */</span></span><br></pre></td></tr></table></figure><ol start="6"><li>防止图片图裂</li></ol><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">img</span> <span class="attr">:src</span>=<span class="string">"headPhoto"</span> <span class="attr">v-show</span>=<span class="string">"headPhoto"</span> @<span class="attr">error</span>=<span class="string">"setDefault"</span>&gt;</span></span><br><span class="line">setDefault 为设置图列时怎么做的方法</span><br></pre></td></tr></table></figure><p>也可以全局替换图列 图标</p><ol start="7"><li>上拉加载,以及安卓手机在也页面滚动时点击屏幕停止滚动会触发div的点击事件的解决方法。</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br></pre></td><td class="code"><pre><span class="line">    &lt;div @scroll=&quot;onScroll&quot; @click=&quot;stopScroll&quot; :class=&quot;[&apos;msg-list&apos;,&apos;pull-container&apos;,&#123;pc:isPC&#125;]&quot;&gt;</span><br><span class="line">                &lt;div :class=&quot;[&apos;scroll-box&apos;,&#123;on:show&#125;]&quot; v-infinite-scroll=&quot;loadMore&quot; infinite-scroll-disabled=&quot;busy&quot; infinite-scroll-distance=&quot;10&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;top&quot; v-show=&quot;!show&quot;&gt;</span><br><span class="line">                        &lt;span v-cloak&gt;&#123;&#123;unRead&#125;&#125;&#123;&#123;$t(&apos;l.s.msg.list.unreadMessage&apos;)&#125;&#125;&lt;/span&gt;</span><br><span class="line">                        &lt;button @click=&quot;onAllRead&quot;&gt;&#123;&#123;$t(&apos;l.s.msg.list.allRead&apos;)&#125;&#125;&lt;/button&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;menu flex flex-center&quot; v-show=&quot;!show&quot;&gt;</span><br><span class="line">                        &lt;div v-for=&quot;(item,index) in menuList&quot; @click=&quot;type = index&quot; :key=&quot;index&quot; :class=&quot;[&#123;on:index === type&#125;,&apos;flex&apos;,&apos;flex-center&apos;,&apos;flex-col&apos;]&quot;&gt;</span><br><span class="line">                            &lt;s :class=&quot;[&apos;icon&apos;,item.icon_class]&quot;&gt;&lt;/s&gt;</span><br><span class="line">                            &lt;span&gt;&#123;&#123;item.name&#125;&#125;&lt;/span&gt;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                    &lt;div class=&quot;list-box&quot; &gt;</span><br><span class="line">                        &lt;div class=&quot;list-box-item&quot;&gt; </span><br><span class="line">                            &lt;div class=&quot;empty-msg&quot; v-if=&quot;sysMsg.length == 0&quot;&gt;&#123;&#123;$t(&apos;l.s.msg.list.noMsg&apos;)&#125;&#125;&lt;/div&gt;</span><br><span class="line">                            &lt;ul class=&quot;wx-list&quot; v-if=&quot;sysMsg.length &gt; 0&quot;&gt;</span><br><span class="line">                                &lt;li class=&quot;items wx-link&quot; v-for=&quot;msg in sysMsg&quot;  @click=&quot;goDetail(msg)&quot; :key=&quot;msg.id&quot;&gt;</span><br><span class="line">                                    &lt;div :class=&quot;[&apos;pic&apos;,msg.status == 0?&apos;unread&apos;:&apos;&apos;]&quot;&gt;</span><br><span class="line">                                        &lt;span&gt;&#123;&#123;name(msg.type)&#125;&#125;&lt;/span&gt;</span><br><span class="line">                                    &lt;/div&gt;</span><br><span class="line">                                    &lt;div class=&quot;content&quot;&gt;</span><br><span class="line">                                        &lt;div class=&quot;title ellipsis&quot;&gt;&#123;&#123;msg.title&#125;&#125;&lt;/div&gt;</span><br><span class="line">                                        &lt;div class=&quot;desc ellipsis&quot;&gt;&#123;&#123;msg.content&#125;&#125;&lt;/div&gt;</span><br><span class="line">                                    &lt;/div&gt;</span><br><span class="line">                                    &lt;span class=&quot;msg-time&quot;&gt;&#123;&#123;msg.createTimeString&#125;&#125;&lt;/span&gt;</span><br><span class="line">                                &lt;/li&gt;</span><br><span class="line">                            &lt;/ul&gt;</span><br><span class="line">                            &lt;template v-if=&quot;sysMsg.length == 0&quot;&gt;&lt;/template&gt;</span><br><span class="line">                            &lt;div v-else-if=&quot;!haveNextPage&quot; class=&quot;noMore&quot;&gt;没有更多了&lt;/div&gt;</span><br><span class="line">                            &lt;div v-else class=&quot;loading&quot;&gt;&lt;i class=&quot;weui-loading&quot;/&gt; 正在加载&lt;/div&gt;</span><br><span class="line">                        &lt;/div&gt;</span><br><span class="line">                    &lt;/div&gt; </span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    data()&#123;</span><br><span class="line">        return &#123;</span><br><span class="line">            isScrolling: false,</span><br><span class="line">            busy: true,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">        onScroll(e)&#123;</span><br><span class="line">                console.log(e.target.scrollTop);</span><br><span class="line">                if(this.get_GL_OS_NAME() == &quot;android&quot;)&#123;</span><br><span class="line">                    this.isScrolling = true;</span><br><span class="line">                    var t1 = e.target.scrollTop;</span><br><span class="line">                    clearTimeout(this.timer);</span><br><span class="line">                    this.timer = setTimeout(() =&gt; &#123;</span><br><span class="line">                        var t2 = e.target.scrollTop;</span><br><span class="line">                        console.log(t2 == t1);</span><br><span class="line">                        if(t2 == t1)&#123;</span><br><span class="line">                             this.isScrolling = false;</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;, 1000);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            stopScroll(e)&#123;</span><br><span class="line">                console.log(e);</span><br><span class="line">                if(this.get_GL_OS_NAME() == &quot;android&quot;)&#123;</span><br><span class="line">                    this.isScrolling = false;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            loadMore:function()&#123;</span><br><span class="line">                if(this.busy || !this.haveNextPage)&#123;</span><br><span class="line">                    return;</span><br><span class="line">                &#125;</span><br><span class="line">                this.loadData();</span><br><span class="line">        &#125;,</span><br><span class="line">            loadData()&#123;</span><br><span class="line">                var _this = this;</span><br><span class="line">                _this.busy = true;</span><br><span class="line">                let pageNo = _this.pageNo + 1;</span><br><span class="line">            let pageSize = _this.pageSize;</span><br><span class="line">                _this.loading = weui.loading(_this.$t(&apos;l.s.msg.list.loading&apos;));</span><br><span class="line">            _this.$axios.post(_this.stuApiUrl + &quot;/sys/msg/search&quot;, </span><br><span class="line">            _this.$qs.stringify(&#123;</span><br><span class="line">            &#125;)).then(function(res)&#123;</span><br><span class="line">                _this.loading.hide();</span><br><span class="line">                _this.busy = false;</span><br><span class="line">                _this.pageNo = pageNo;</span><br><span class="line">                _this.haveNextPage = res.data.haveNextPage;</span><br><span class="line">            &#125;).catch(function()&#123;</span><br><span class="line">                _this.loading.hide();</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;,</span><br><span class="line">        goDetail : function(msg)&#123;</span><br><span class="line">            if(this.isScrolling)&#123;</span><br><span class="line">                return;</span><br><span class="line">            &#125;</span><br><span class="line">            if(msg.status == 0)&#123;</span><br><span class="line">                msg.status = 1;</span><br><span class="line">                if(this.unRead &gt; 0)&#123;</span><br><span class="line">                    this.unRead--;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            this.$router.push(&apos;/student/msg/detail/&apos; + msg.id);</span><br><span class="line">        &#125;,</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>关键点   v-infinite-scroll</p><p>安卓监听滚动停止</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">onScroll(e)&#123;</span><br><span class="line">      <span class="built_in">console</span>.log(e.target.scrollTop);</span><br><span class="line">      <span class="keyword">if</span>(<span class="keyword">this</span>.get_GL_OS_NAME() == <span class="string">"android"</span>)&#123;</span><br><span class="line">          <span class="keyword">this</span>.isScrolling = <span class="literal">true</span>;</span><br><span class="line">          <span class="keyword">var</span> t1 = e.target.scrollTop;</span><br><span class="line">          clearTimeout(<span class="keyword">this</span>.timer);</span><br><span class="line">          <span class="keyword">this</span>.timer = setTimeout(<span class="function"><span class="params">()</span> =&gt;</span> &#123;</span><br><span class="line">              <span class="keyword">var</span> t2 = e.target.scrollTop;</span><br><span class="line">              <span class="built_in">console</span>.log(t2 == t1);</span><br><span class="line">              <span class="keyword">if</span>(t2 == t1)&#123;</span><br><span class="line">                   <span class="keyword">this</span>.isScrolling = <span class="literal">false</span>;</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;, <span class="number">1000</span>);</span><br><span class="line">      &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  goDetail : <span class="function"><span class="keyword">function</span>(<span class="params">msg</span>)</span>&#123;</span><br><span class="line">      <span class="keyword">if</span>(<span class="keyword">this</span>.isScrolling)&#123;</span><br><span class="line">          <span class="keyword">return</span>;</span><br><span class="line">      &#125;</span><br><span class="line">     dosomething();</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure><ol start="8"><li>判断移动端设备全局方法</li></ol><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> GL_OS_NAME;    <span class="comment">//记录设备类型</span></span><br><span class="line"><span class="keyword">const</span> ua = <span class="built_in">window</span>.navigator.userAgent.toLocaleLowerCase();</span><br><span class="line">GL_OS_NAME = <span class="regexp">/iphone|ipad|ipod/</span>.test(ua) ? <span class="string">"ios"</span> : <span class="regexp">/android/</span>.test(ua) ? <span class="string">"android"</span> : <span class="string">"pc"</span>;</span><br><span class="line">Vue.prototype.get_GL_OS_NAME = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> GL_OS_NAME;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><ol start="9"><li>new Date() 在ios上的坑</li></ol><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">要创建一个指定时间的new Date对象时，通常的做法是：</span><br><span class="line"></span><br><span class="line">new Date("2018-04-27 11:11");然后就可以根据这个获取年月日等信息</span><br><span class="line"></span><br><span class="line">这种格式在chrome,firefox,Android中都没有问题。。。。。。但是，但是，但是在IOS中就出问题了，该对象返回的是valid Date??????为什么会返回这个值，这不是有效的意思吗。。。。</span><br><span class="line"></span><br><span class="line">结果发现。。。在IOS中，new Date中指定的字符串还有格式。。。</span><br><span class="line"></span><br><span class="line">new Date("2018/04/27 11:11")，这样才能正确返回结果。。。。。。。。。。。</span><br><span class="line"></span><br><span class="line">Safari和IE没有测试过，不知道是否也会出现这种问题，如果有类似情况出现，那么可以用下面的方法来解决</span><br><span class="line"></span><br><span class="line">var obj=new Date("2018-04-27 11:11").replace(/-/g, "/");</span><br><span class="line"></span><br><span class="line">毕竟 在new Date里面的2018/04/27 这种格式在其它浏览器中也支持。。。。。。</span><br><span class="line"></span><br><span class="line"> </span><br><span class="line"></span><br><span class="line">还有，在安卓和IOS上的微信中的浏览器内核是不一样的，这也会导致上面的安卓和IOS中new Date的差别：</span><br><span class="line">　　安卓6.1版本以上都是使用QQ浏览器的X5内核，5.4-6.1之间的版本如果安装了QQ浏览器的话就是使用X5内核，如果没安装，就是使用的系统内核</span><br><span class="line"></span><br><span class="line">　　IOS有两种，一种是WKWebview，一种是UIWebview，从IOS8版本开始支持WKWebview</span><br></pre></td></tr></table></figure><ol start="10"><li>vue中路由参数不一样时页面没有刷新</li></ol><p>解决： 使用 ：:key=”this.$route.path”  解决。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;main-box&quot; &gt;</span><br><span class="line">        &lt;keep-alive&gt;</span><br><span class="line">            &lt;router-view :key=&quot;this.$route.path&quot; v-if=&quot;$route.meta.keepAlive&quot;&gt;&lt;/router-view&gt;</span><br><span class="line">        &lt;/keep-alive&gt;</span><br><span class="line">        &lt;router-view :key=&quot;this.$route.path&quot; v-if=&quot;!$route.meta.keepAlive&quot;&gt;&lt;/router-view&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure><ol start="11"><li>简单音频播放</li></ol><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--audio.vue--&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div :class=&quot;[&apos;btn-music&apos;,&apos;audio-box&apos;,rotate?&apos;rotate&apos;:&apos;&apos;]&quot; v-show=&quot;showPic&quot;  id=&quot;audio_ctrl&quot;&gt;</span><br><span class="line">&lt;audio :id=&quot;key&quot; style=&quot;display:none&quot;&gt;&lt;/audio&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">data() &#123;</span><br><span class="line">return &#123;</span><br><span class="line">                audio : null,</span><br><span class="line">                key : &apos;audio_tpl_&apos; + new Date().getTime(),</span><br><span class="line">                src : null, //当前播放的音频</span><br><span class="line">                status : 3, // 0:stop,1:play,2:pause 3：未加载</span><br><span class="line">                canPlay: false,</span><br><span class="line">                failed: false,    //曾经提示失败过</span><br><span class="line">                rotate: false,   //是否旋转图标</span><br><span class="line">                showPic: false,   //是否展示图标</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">methods: &#123;</span><br><span class="line">            pause : function()&#123;</span><br><span class="line">                this.status = 2;</span><br><span class="line">                this.rotate = false;</span><br><span class="line">                this.audio.pause();</span><br><span class="line">                // $(&quot;#audio_ctrl&quot;).removeClass(&apos;rotate&apos;);</span><br><span class="line">            &#125;,</span><br><span class="line">            play : function()&#123;</span><br><span class="line">                var _this = this;</span><br><span class="line">                if(this.src != this.audio.src)&#123;</span><br><span class="line">                    this.audio.src = this.src;</span><br><span class="line">                &#125;</span><br><span class="line">                _this.audio.play();</span><br><span class="line">                if(_this.audio.readyState != 4 )&#123;</span><br><span class="line">                    _this.loading = weui.loading(this.$t(&apos;l.i.audio.loadingAudio&apos;));</span><br><span class="line">                    setTimeout(()=&gt;&#123;</span><br><span class="line">                        if(!_this.canPlay)&#123;</span><br><span class="line">                            _this.stop();</span><br><span class="line">                            _this.audio.pause(); </span><br><span class="line">                            console.log(&quot;10秒内还不可播放&quot;)</span><br><span class="line">                            _this.loading.hide();</span><br><span class="line">                            weui.toast(_this.$t(&apos;l.i.audio.tips&apos;),1000);</span><br><span class="line">                            _this.canPlay = false;</span><br><span class="line">                            _this.failed = true;   //曾经提示失败</span><br><span class="line">                        &#125;</span><br><span class="line">                        console.log(&quot;10秒内可播放&quot;)</span><br><span class="line">                    &#125;,10000);</span><br><span class="line">                    return;</span><br><span class="line">                &#125;</span><br><span class="line">                console.log(&quot;我要播放&quot;)</span><br><span class="line">                _this.canPlay = true;</span><br><span class="line">                this.loading.hide();</span><br><span class="line">                // $(&quot;#audio_ctrl&quot;).addClass(&apos;rotate&apos;);</span><br><span class="line">                this.rotate = true;</span><br><span class="line">                this.status = 1;</span><br><span class="line">            &#125;,</span><br><span class="line">            stop : function()&#123;</span><br><span class="line">                this.status = 0;</span><br><span class="line">                // $(&quot;#audio_ctrl&quot;).removeClass(&apos;rotate&apos;);</span><br><span class="line">                this.rotate = false;</span><br><span class="line">                // $(&quot;#audio_ctrl&quot;).hide();</span><br><span class="line">                this.showPic = false;</span><br><span class="line">            &#125;,</span><br><span class="line">playAudio: function(url)&#123;</span><br><span class="line">                var _this= this;</span><br><span class="line">                _this.failed = false;      //只要一点击就将 提示过失败重置</span><br><span class="line">                if(!url)&#123;</span><br><span class="line">                    return;</span><br><span class="line">                &#125;</span><br><span class="line">                // $(&apos;#audio_ctrl&apos;).show();</span><br><span class="line">                 this.showPic = true;</span><br><span class="line">                var audio = this.audio;</span><br><span class="line">               </span><br><span class="line">                if(this.status == 0 || this.status == 3)&#123;//直接播放</span><br><span class="line">                    this.src = url;</span><br><span class="line">                    return this.play();</span><br><span class="line">                &#125;</span><br><span class="line">                if(this.src &amp;&amp; this.src == url)&#123;//同一音频</span><br><span class="line">                    if(this.status == 1)&#123;</span><br><span class="line">                        return this.pause();</span><br><span class="line">                    &#125;</span><br><span class="line">                    return this.play();</span><br><span class="line">                &#125;</span><br><span class="line">                //不同音频，直接播放</span><br><span class="line">                if(this.src)&#123;</span><br><span class="line">                    this.src = url;</span><br><span class="line">                    this.status = 3;       //不同音频，将音频状态改为 未加载</span><br><span class="line">                    // if($(&quot;#audio_ctrl&quot;).hasClass(&apos;rotate&apos;))&#123;</span><br><span class="line">                    //     $(&quot;#audio_ctrl&quot;).removeClass(&apos;rotate&apos;);</span><br><span class="line">                    // &#125;</span><br><span class="line">                    if(this.rotate)&#123;</span><br><span class="line">                        this.rotate = false;</span><br><span class="line">                    &#125;</span><br><span class="line">                    this.play();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            toggleStatus()&#123;</span><br><span class="line">                var _this = this;</span><br><span class="line">                if(_this.rotate)&#123;//正在播放</span><br><span class="line">                    _this.pause();</span><br><span class="line">                &#125;else&#123;</span><br><span class="line">                    _this.play();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">initEvent: function()&#123;</span><br><span class="line">                var _this = this;             </span><br><span class="line">                _this.audio.addEventListener(&apos;ended&apos;, function () &#123;  </span><br><span class="line">                    _this.stop();</span><br><span class="line">                &#125;, false);</span><br><span class="line"></span><br><span class="line">                _this.audio.addEventListener(&quot;canplaythrough&quot;, function () &#123;   //当浏览器预计能够在不停下来进行缓冲的情况下持续播放指定的音频/视频时，会发生 canplaythrough 事件</span><br><span class="line">                    if(!_this.failed)&#123;   //提示过失败后即使可以播放了，也不播放</span><br><span class="line">                        _this.play();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line"></span><br><span class="line">                // 拖动图标</span><br><span class="line">                var startX = 0;</span><br><span class="line">                var startY = 0;</span><br><span class="line">                var xPos = 0;</span><br><span class="line">                var yPos = 0;</span><br><span class="line">                var oldXPos = 12;</span><br><span class="line">                var oldYPos = 12;</span><br><span class="line">                var width = window.innerWidth || document.documentElement.clientWidth || document.body.clientWidth;</span><br><span class="line">                var height = window.innerHeight || document.documentElement.clientHeight || document.body.clientHeight;</span><br><span class="line">                var timeOutEvent;</span><br><span class="line">                var isClick = true;</span><br><span class="line">                $(&quot;#audio_ctrl&quot;).on(&quot;touchstart&quot;,(e)=&gt;&#123;</span><br><span class="line">                    var touchPos = e.touches[0];</span><br><span class="line">                    startX = touchPos.clientX;</span><br><span class="line">                    startY = touchPos.clientY;</span><br><span class="line">                    timeOutEvent = setTimeout(function()&#123;</span><br><span class="line">                        //此处为长按事件</span><br><span class="line">                         _this.stop();</span><br><span class="line">                         _this.audio.pause();</span><br><span class="line">                         isClick = false;</span><br><span class="line">                    &#125;,1000);</span><br><span class="line">                &#125;);</span><br><span class="line">                $(&quot;#audio_ctrl&quot;).on(&quot;touchmove&quot;,(e)=&gt;&#123;</span><br><span class="line">                    clearTimeout(timeOutEvent);</span><br><span class="line">                    isClick = false;</span><br><span class="line">                    e.preventDefault();</span><br><span class="line">                    var touchPos = e.touches[0];</span><br><span class="line">                    xPos = startX - touchPos.clientX + oldXPos;</span><br><span class="line">                    yPos = touchPos.clientY - startY + oldYPos;</span><br><span class="line">                    xPos = xPos &lt; 0 ? 12 : xPos &gt; (width - 52) ? (width - 52) : xPos;</span><br><span class="line">                    yPos = yPos &lt; 0 ? 12 : yPos &gt; (height - 52) ? (height - 52) : yPos;</span><br><span class="line">                    $(&quot;#audio_ctrl&quot;).css(&#123;top:yPos,right:xPos&#125;);</span><br><span class="line">                &#125;);</span><br><span class="line">                $(&quot;#audio_ctrl&quot;).on(&quot;touchend&quot;,(e)=&gt;&#123;</span><br><span class="line">                    oldXPos = xPos;</span><br><span class="line">                    oldYPos = yPos;</span><br><span class="line">                    clearTimeout(timeOutEvent);</span><br><span class="line">                    if(isClick)&#123;//点击</span><br><span class="line">                        //此处为点击事件</span><br><span class="line">                        _this.toggleStatus();</span><br><span class="line">                    &#125;</span><br><span class="line">                    isClick = true;</span><br><span class="line">                &#125;);</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">mounted() &#123;</span><br><span class="line">            this.audio = $(&apos;#&apos; + this.key)[0];</span><br><span class="line">            this.initEvent();</span><br><span class="line">        &#125;,</span><br><span class="line">        beforeDestroy()&#123;</span><br><span class="line">            if(this.status == 1)&#123;</span><br><span class="line">                return this.pause();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        destroyed()&#123;</span><br><span class="line">            $(&quot;#audio_ctrl&quot;).css(&#123;top:12,right:12&#125;);</span><br><span class="line">            // $(&apos;#audio_ctrl&apos;).hide();</span><br><span class="line">            this.showPic = false;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"> </span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><p>调用</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--app.vue--&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot; :class=&quot;&#123;&apos;hide-bar&apos;:hidebar&#125;&quot;&gt;</span><br><span class="line">      &lt;v-audio ref=&quot;staudio&quot;&gt;&lt;/v-audio&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import audio from &apos;@/components/include/audio.vue&apos;;</span><br><span class="line">export default &#123;</span><br><span class="line">    components:&#123;</span><br><span class="line">     &quot;v-audio&quot;: audio,</span><br><span class="line">  &#125;,</span><br><span class="line">    mouted()&#123;</span><br><span class="line">        _this.$nextTick(function()&#123;</span><br><span class="line">             _this.$bus.$on(&apos;playMusic&apos;,value =&gt; &#123;</span><br><span class="line">                _this.play(value);</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;   </span><br><span class="line">    </span><br><span class="line"> &lt;!--调用界面--&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">this.$bus.$emit(&apos;playMusic&apos;,url);</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;有课开发经验汇总&quot;&gt;&lt;a href=&quot;#有课开发经验汇总&quot; class=&quot;headerlink&quot; title=&quot;有课开发经验汇总&quot;&gt;&lt;/a&gt;有课开发经验汇总&lt;/h3&gt;&lt;p&gt;随便汇总想到哪写到哪，有些可能是简单的东西，但还是写一下&lt;/p&gt;
&lt;ol&gt;
&lt;li&gt;实现自定
      
    
    </summary>
    
    
      <category term="-vue" scheme="https://shenxiaobu.github.io/tags/vue/"/>
    
  </entry>
  
  <entry>
    <title>h5+开发汇总</title>
    <link href="https://shenxiaobu.github.io/2019/12/15/h5-%E5%BC%80%E5%8F%91%E6%B1%87%E6%80%BB/"/>
    <id>https://shenxiaobu.github.io/2019/12/15/h5-开发汇总/</id>
    <published>2019-12-15T08:10:08.000Z</published>
    <updated>2020-03-22T13:49:33.054Z</updated>
    
    <content type="html"><![CDATA[<h3 id="h5-开发汇总"><a href="#h5-开发汇总" class="headerlink" title="h5+开发汇总"></a>h5+开发汇总</h3><h4 id="基于h5-api的使用"><a href="#基于h5-api的使用" class="headerlink" title="基于h5+ api的使用"></a>基于h5+ api的使用</h4><p><a href="http://www.html5plus.org/doc/zh_cn/accelerometer.html" target="_blank" rel="noopener">h5+API文档</a></p><p>打包后遇到的第一个问题</p><p>步骤</p><p>打开app，点击页面跳转正常，但是使用物理按键返回时，直接就退出app</p><p>期望</p><p>使用物理按键返回时，正常的返回，无法返回时提示 再返回一次退出app</p><p>解决</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> time = [<span class="literal">null</span>, <span class="literal">null</span>];    <span class="comment">//记录返回的两次间隔时间</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.plus) &#123;</span><br><span class="line">    plusReady();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">document</span>.addEventListener(<span class="string">'plusready'</span>, plusReady, <span class="literal">false</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">plusReady</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> webview = plus.webview.currentWebview();</span><br><span class="line">    plus.key.addEventListener(<span class="string">'backbutton'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        webview.canBack(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (e.canBack) &#123;</span><br><span class="line">               time = [<span class="literal">null</span>,<span class="literal">null</span>];   <span class="comment">//路由变化重置 time。</span></span><br><span class="line">               router.go(<span class="number">-1</span>); <span class="comment">//返回上一级</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                time.shift();</span><br><span class="line">                time.push(<span class="keyword">new</span> <span class="built_in">Date</span>().getTime());</span><br><span class="line">                <span class="keyword">if</span> (time[<span class="number">1</span>] - time[<span class="number">0</span>] &gt; <span class="number">2000</span>) &#123;  <span class="comment">//事件间隔大于 2s 当作第一次 点击返回，做出提示</span></span><br><span class="line">           <span class="comment">//plus.nativeUI.toast  h5+API的提示窗口详细使用请看api，默认前面有应用名称：tips</span></span><br><span class="line">                    plus.nativeUI.toast(<span class="string">"再按一次返回退出应用！"</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    plus.runtime.quit();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>第二个问题</p><p>对于类似txt。word等文档文件，使用 h5+pai的 下载并展示下载进度，下载完成后自动使用手机的第三方工具查看</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">Vue.prototype.downloadFile = <span class="function"><span class="keyword">function</span>(<span class="params">url, orgName</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!url) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> saveName = url.substring(url.lastIndexOf(<span class="string">'/'</span>) + <span class="number">1</span>, url.length);</span><br><span class="line">    <span class="keyword">if</span>(!orgName)&#123;</span><br><span class="line">        orgName = saveName;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> fileType = util.getFileType(url);  <span class="comment">//获取文件类型，该项目下的自定义获取文件类型方法</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="string">'pic'</span> == fileType || <span class="string">'video'</span> == fileType || <span class="string">'audio'</span> == fileType || <span class="string">'link'</span> == fileType) &#123;</span><br><span class="line">        <span class="keyword">return</span> url;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> file = &#123;</span><br><span class="line">        orgName: <span class="string">"_downloads/"</span> + orgName,</span><br><span class="line">        fileName: <span class="string">"_downloads/"</span> + saveName</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">window</span>.plus)&#123;</span><br><span class="line">        plus.runtime.openFile(file.orgName,&#123;&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> dtask = plus.downloader.createDownload(url,&#123;<span class="attr">filename</span>: file.orgName&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">item, status</span>)</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(item.state &amp;&amp; status == <span class="number">200</span>)&#123;</span><br><span class="line">                    plus.runtime.openFile(item.getFileName());</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    $(<span class="string">'#dl_progress'</span>).hide();</span><br><span class="line">                    _this.GL_ALERT(<span class="string">"文件下载失败"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            dtask.addEventListener(<span class="string">"statechanged"</span>, dlProgress, <span class="literal">false</span>);</span><br><span class="line">            dtask.start();</span><br><span class="line">            $(<span class="string">'#dl_progress'</span>).show();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> dlProgress = <span class="function"><span class="keyword">function</span>(<span class="params">download, status</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!download) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(status == <span class="number">404</span>)&#123;</span><br><span class="line">        $(<span class="string">'#dl_progress'</span>).hide();</span><br><span class="line">        _this.GL_ALERT(<span class="string">"资源下载失败"</span>);</span><br><span class="line">        <span class="comment">//遇到报错停止下载</span></span><br><span class="line">        download.abort();</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> rate = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(download.downloadedSize &amp;&amp; download.totalSize)&#123;</span><br><span class="line">        rate = (download.downloadedSize * <span class="number">100</span> / download.totalSize).toFixed(<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    $(<span class="string">'#dl_progress span'</span>).text(rate);</span><br><span class="line"><span class="keyword">if</span>(download.state == <span class="number">4</span> &amp;&amp; status == <span class="number">200</span>)&#123;</span><br><span class="line">        $(<span class="string">'#dl_progress'</span>).hide()</span><br><span class="line">weui.toast(<span class="string">"下载成功"</span>,<span class="number">1000</span>);</span><br><span class="line">    &#125;  </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//app.vue   下载进度展示</span><br><span class="line"> <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"dl_progress"</span> <span class="attr">class</span>=<span class="string">"weui-loading_toast weui-animate-fade-in"</span>&gt;</span> </span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"weui-toast app"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"weui-loading weui-icon_toast"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"weui-toast__content"</span>&gt;</span>&#123;&#123;$t('l.main.downloadPro')&#125;&#125;<span class="tag">&lt;<span class="name">span</span>&gt;</span>0<span class="tag">&lt;/<span class="name">span</span>&gt;</span>%<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span><br><span class="line"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>上述代码就是使用h5+API 下载文件并使用第三方工具打开的实现代码，直接从项目代码拿下来，如需使用可根据业务逻辑自行修改。有些全局代码，未展示，因此使用时需查看文档进行更改；</p><p>第三个问题，也是下载问题，此次是下载app升级包</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//也是采用了上面的进度条</span></span><br><span class="line"></span><br><span class="line">Vue.prototype.downloadWgt = <span class="function"><span class="keyword">function</span>(<span class="params">url,callback</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> dtask = plus.downloader.createDownload(url,&#123;<span class="attr">filename</span>: <span class="string">'_doc/update/'</span>&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">item, status</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(status == <span class="number">200</span>)&#123;</span><br><span class="line">            <span class="comment">// plus.runtime.openFile(item.getFileName());</span></span><br><span class="line">            <span class="comment">//回调函数</span></span><br><span class="line">            callback(item.filename);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            _this.GL_ALERT(<span class="string">"升级包下载失败"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    dtask.addEventListener(<span class="string">"statechanged"</span>, dlProgress, <span class="literal">false</span>);</span><br><span class="line">    dtask.start();</span><br><span class="line">    $(<span class="string">'#dl_progress'</span>).show();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//调用界面</span></span><br><span class="line">    download(appPackAliName)&#123;                </span><br><span class="line">        <span class="keyword">var</span> _this = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">if</span>(!appPackAliName)&#123;</span><br><span class="line">            <span class="keyword">return</span> _this.GL_ALERT(<span class="string">'请检查是否已上传升级包？'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.isClick)&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">window</span>.plus)&#123;</span><br><span class="line">            _this.isClick = <span class="literal">true</span>;  </span><br><span class="line">            <span class="comment">//调用全局 下载文件方法，并使用回调函数 安装文件</span></span><br><span class="line">            _this.downloadWgt(appPackAliName,<span class="function"><span class="keyword">function</span>(<span class="params">filename</span>)</span>&#123;</span><br><span class="line">                _this.installWgt(filename); <span class="comment">// 安装wgt包</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    installWgt (path) &#123;</span><br><span class="line">        <span class="comment">// plus.nativeUI.showWaiting('安装wgt文件...');</span></span><br><span class="line">        <span class="keyword">var</span> _this = <span class="keyword">this</span>;</span><br><span class="line">        _this.loading = weui.loading(_this.$t(<span class="string">'l.c.installing'</span>))</span><br><span class="line"></span><br><span class="line">        plus.runtime.install(path, &#123;&#125;, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="comment">// plus.nativeUI.closeWaiting();</span></span><br><span class="line">            _this.loading.hide();</span><br><span class="line">            weui.toast(<span class="string">"安装成功"</span>,<span class="number">1000</span>);</span><br><span class="line">            plus.runtime.restart();</span><br><span class="line">            <span class="comment">// plus.nativeUI.alert('应用资源更新完成！', function () &#123;</span></span><br><span class="line">            <span class="comment">//     plus.runtime.restart();</span></span><br><span class="line">            <span class="comment">// &#125;);</span></span><br><span class="line">        &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">            _this.loading.hide();</span><br><span class="line">            _this.GL_ALERT(<span class="string">"安装失败["</span>+e.code+<span class="string">"]："</span>+e.message);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure><h4 id="制作wgt升级包注意事项"><a href="#制作wgt升级包注意事项" class="headerlink" title="制作wgt升级包注意事项"></a>制作wgt升级包注意事项</h4><ol><li><p>在hbuilderX项目中右键  ——&gt; 发行 —&gt; 制作app资源升级包，</p></li><li><p>manifest.json文件里面的version字段的name和code一定要比现有的高，code且为整数</p></li><li><p>manifest.json模块配置，没有使用到的一定要去除掉，否则也会失败</p></li><li><p>代码中获取版本号信息的代码为如下代码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取当前app的版本号（资源升级后照样获取的到升级后的版本号），其他方法获取版本号经测试不可用</span></span><br><span class="line"><span class="comment">//下面方法可行</span></span><br><span class="line">plus.runtime.getProperty( plus.runtime.appid, <span class="function"><span class="keyword">function</span> (<span class="params"> wgtinfo </span>) </span>&#123;</span><br><span class="line">        store.commit(<span class="string">"setCurrentVersion"</span>, wgtinfo.version);</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure></li><li><p>如果遇到明明升级包的版本号比当前版本号高，升级时却提示版本号错误等提示，可查看升级包的版本号是否升级成功</p><p>生成的wgt文件复制一份，并将文件后面加个.zip后缀，此时文件变成一个压缩文件，点击查看，可以查看到里面的有www的文件夹，查看manifest文件的版本号是否修改成功，如果每次制作升级包，版本号明明改了，但是制作完成后添加 .zip后缀查看版本号并没有变时 可 关掉打包软件重新打开再制作升级包。</p><p>这个是软件的bug，当你看到这篇文章时，这个bug应该已经被修复了。</p></li></ol><p>遇到的第三个问题</p><p>相机权限问题</p><p>使用二维码，或者拍照时就需要用到手机摄像头，就需要获取权限。</p><p>需求：当第一次访问时，请求相机权限，当拒绝时做出提示。</p><p>plus.navigator.checkPermission(type)   方法  可查看手机权限的状态，但是文档上有声明，android全部不支持</p><p>因此麻烦来了，安卓要如何判断是否有允许权限</p><p>解决代码如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//检查权限全局代码，第一个参数 相机权限还是相册权限，第二个参数 权限允许时回调函数 </span></span><br><span class="line"><span class="comment">//第三个参数 权限不允许时，点击弹框的确定回调函数</span></span><br><span class="line">Vue.prototype.checkPermission = <span class="function"><span class="keyword">function</span>(<span class="params">perType,callback,confirmCallback</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> check = <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">// var perType = 'CAMERA';</span></span><br><span class="line">    <span class="keyword">var</span> type = &#123;</span><br><span class="line">        <span class="string">'CAMERA'</span>:<span class="string">'android.permission.CAMERA'</span>,</span><br><span class="line">        <span class="string">'GALLERY'</span>: <span class="string">'android.permission.READ_EXTERNAL_STORAGE'</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="built_in">window</span>.plus)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">checkResult</span>(<span class="params">rusult,confirmCallback</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!rusult)&#123;</span><br><span class="line">            weui.dialog(&#123;</span><br><span class="line">                title: <span class="string">"提示"</span>,</span><br><span class="line">                content: i18n.messages[i18n.locale][<span class="string">'l'</span>][<span class="string">'permission'</span>][perType],</span><br><span class="line">                className: <span class="string">'custom-classname'</span>,</span><br><span class="line">                buttons: [&#123;</span><br><span class="line">                    label: <span class="string">"确定"</span>,</span><br><span class="line">                    type: <span class="string">'primary'</span>,</span><br><span class="line">                    onClick: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; </span><br><span class="line">                        confirmCallback&amp;&amp;confirmCallback();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;]</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> ua = <span class="built_in">window</span>.navigator.userAgent.toLocaleLowerCase(); </span><br><span class="line">    <span class="keyword">var</span> isIOS = <span class="regexp">/iphone|ipad|ipod/</span>.test(ua);</span><br><span class="line">    <span class="keyword">if</span>(isIOS)&#123;</span><br><span class="line">        <span class="keyword">var</span> pp = plus.navigator.checkPermission(perType);</span><br><span class="line">        <span class="keyword">switch</span>(pp)&#123;</span><br><span class="line">          <span class="keyword">case</span> <span class="string">'authorized'</span>:</span><br><span class="line">            check = <span class="literal">true</span>;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">          <span class="keyword">case</span> <span class="string">'denied'</span>:</span><br><span class="line">            check = <span class="literal">false</span>;             </span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">          <span class="keyword">case</span> <span class="string">'undetermined'</span>:</span><br><span class="line">            check = <span class="literal">true</span>;             </span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">          <span class="keyword">case</span> <span class="string">'notdeny'</span>:</span><br><span class="line">              check = <span class="literal">true</span>;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">          <span class="keyword">case</span> <span class="string">'unknown'</span>:</span><br><span class="line">            check = <span class="literal">false</span>;             </span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">          <span class="keyword">default</span>:</span><br><span class="line">            check = <span class="literal">false</span>;             </span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//上述代码可缩减，这里懒得缩减了，详细查看api</span></span><br><span class="line">        checkResult(check,confirmCallback);</span><br><span class="line">        callback &amp;&amp; callback(check);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;  <span class="comment">//安卓的查看权限</span></span><br><span class="line">        <span class="comment">// 调试</span></span><br><span class="line">        <span class="comment">// check = true;</span></span><br><span class="line">        <span class="comment">// checkResult(check);</span></span><br><span class="line">        <span class="comment">// callback &amp;&amp; callback(check);</span></span><br><span class="line"></span><br><span class="line">        plus.android.requestPermissions([type[perType]], <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(e.deniedAlways.length&gt;<span class="number">0</span>)&#123;<span class="comment">//权限被永久拒绝</span></span><br><span class="line">                <span class="comment">// 弹出提示框解释为何需要??权限，引导用户打开设置页面开启</span></span><br><span class="line">                check = <span class="literal">false</span>;     </span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(e.deniedPresent.length&gt;<span class="number">0</span>)&#123;<span class="comment">//权限被临时拒绝</span></span><br><span class="line">                <span class="comment">// 弹出提示框解释为何需要??权限，可再次调用plus.android.requestPermissions申请权限</span></span><br><span class="line">                check = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(e.granted.length&gt;<span class="number">0</span>)&#123;<span class="comment">//权限被允许</span></span><br><span class="line">                <span class="comment">//调用依赖获取??权限的代码</span></span><br><span class="line">                check = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            checkResult(check,confirmCallback);</span><br><span class="line">            callback &amp;&amp; callback(check);</span><br><span class="line">        &#125;, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">            check = <span class="literal">false</span>;</span><br><span class="line">            checkResult(check,confirmCallback);</span><br><span class="line">            callback &amp;&amp; callback(check);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>二维码界面代码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=<span class="string">"sacn-box"</span> :<span class="class"><span class="keyword">class</span></span>=<span class="string">"[!check?'error-box':'']"</span>&gt;</span><br><span class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"scan"</span> v-show=<span class="string">"isScan"</span>&gt;</span><br><span class="line">        &lt;div id=<span class="string">"bcid"</span>&gt;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"error-msg"</span> v-show=<span class="string">"!check"</span>&gt;&#123;&#123;$t(<span class="string">'l.s.scan.openCamera'</span>)&#125;&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">let scan = null;</span></span><br><span class="line"><span class="regexp">export default &#123;</span></span><br><span class="line"><span class="regexp">  name: 'scan',</span></span><br><span class="line"><span class="regexp">  data()&#123;</span></span><br><span class="line"><span class="regexp">    return &#123;</span></span><br><span class="line"><span class="regexp">      loading : null,</span></span><br><span class="line"><span class="regexp">      view : null,</span></span><br><span class="line"><span class="regexp">      Bartab : null,</span></span><br><span class="line"><span class="regexp">      timeout : null,</span></span><br><span class="line"><span class="regexp">      timeout2 : null,</span></span><br><span class="line"><span class="regexp">      check : true,</span></span><br><span class="line"><span class="regexp">      rem12 : '12px',</span></span><br><span class="line"><span class="regexp">      rem14 : '14px',</span></span><br><span class="line"><span class="regexp">      size: 16,   /</span><span class="regexp">/顶部标题 字体大小  “二维码”</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">  &#125;,</span></span><br><span class="line"><span class="regexp">  methods:&#123;</span></span><br><span class="line"><span class="regexp">    scanCard() &#123;</span></span><br><span class="line"><span class="regexp">        let _this = this;</span></span><br><span class="line"><span class="regexp">        let barcodeStyle = &#123;</span></span><br><span class="line"><span class="regexp">            frameColor : '#000000',</span></span><br><span class="line"><span class="regexp">            scanbarColor : '#000000',</span></span><br><span class="line"><span class="regexp">            background : 'rgba(255,255,255,0)',</span></span><br><span class="line"><span class="regexp">            position :'static'</span></span><br><span class="line"><span class="regexp">        &#125;               </span></span><br><span class="line"><span class="regexp">        if(_this.isScan)&#123;</span></span><br><span class="line"><span class="regexp">            return _this.closeScan();</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">        _this.isScan = true; </span></span><br><span class="line"><span class="regexp">        /</span><span class="regexp">/创建扫码</span></span><br><span class="line"><span class="regexp">        scan = plus.barcode.create('bcid',[plus.barcode.QR],barcodeStyle);     </span></span><br><span class="line"><span class="regexp">        plus.webview.currentWebview().append(scan);</span></span><br><span class="line"><span class="regexp">        </span></span><br><span class="line"><span class="regexp">        /</span><span class="regexp">/ 打开扫码</span></span><br><span class="line"><span class="regexp">        _this.startScan();</span></span><br><span class="line"><span class="regexp">        scan.onmarked = _this.onmarked;</span></span><br><span class="line"><span class="regexp">        scan.onerror  = _this.onerror;</span></span><br><span class="line"><span class="regexp">    &#125;,</span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/开始扫描</span></span><br><span class="line"><span class="regexp">    startScan() &#123;</span></span><br><span class="line"><span class="regexp">      var _this = this;</span></span><br><span class="line"><span class="regexp">        if (!window.plus) return;</span></span><br><span class="line"><span class="regexp">        scan.start();</span></span><br><span class="line"><span class="regexp">    &#125;,</span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/关闭条码识别控件</span></span><br><span class="line"><span class="regexp">    closeScan() &#123;</span></span><br><span class="line"><span class="regexp">        if (!window.plus) return;</span></span><br><span class="line"><span class="regexp">        scan.close();</span></span><br><span class="line"><span class="regexp">    &#125;,</span></span><br><span class="line"><span class="regexp">    goBack()&#123;</span></span><br><span class="line"><span class="regexp">      this.$router.go(-1);</span></span><br><span class="line"><span class="regexp">    &#125;,</span></span><br><span class="line"><span class="regexp">    onmarked(type, result, file) &#123;</span></span><br><span class="line"><span class="regexp">        var _this = this;</span></span><br><span class="line"><span class="regexp">        var scanType = false;</span></span><br><span class="line"><span class="regexp">        _this.loading = weui.loading(_this.$t('l.c.handling'));</span></span><br><span class="line"><span class="regexp">        switch (type) &#123;</span></span><br><span class="line"><span class="regexp">            case plus.barcode.QR:</span></span><br><span class="line"><span class="regexp">            type = 'QR';</span></span><br><span class="line"><span class="regexp">            break;</span></span><br><span class="line"><span class="regexp">            case plus.barcode.EAN13:</span></span><br><span class="line"><span class="regexp">            type = 'EAN13';</span></span><br><span class="line"><span class="regexp">            break;</span></span><br><span class="line"><span class="regexp">            case plus.barcode.EAN8:</span></span><br><span class="line"><span class="regexp">            type = 'EAN8';</span></span><br><span class="line"><span class="regexp">            break;</span></span><br><span class="line"><span class="regexp">            default:</span></span><br><span class="line"><span class="regexp">            type = '其它' + type;</span></span><br><span class="line"><span class="regexp">            break;</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">        result = result.replace(/</span>\n/g, <span class="string">''</span>);</span><br><span class="line">        <span class="keyword">if</span>(result.indexOf(<span class="string">"#"</span>)&gt;<span class="number">-1</span>)&#123;     <span class="comment">//解决当 链接不带  #  时， result.split("#")[1]  不存在而报错  导致 扫码功能异常的问题。</span></span><br><span class="line">          result = result.split(<span class="string">"#"</span>)[<span class="number">1</span>];</span><br><span class="line">          <span class="comment">//允许扫码的路径</span></span><br><span class="line">          <span class="keyword">var</span>  paths = [<span class="string">'/app/scan/'</span>,<span class="string">'/app/scan/login'</span>,<span class="string">'/teacher/user/scan/login/'</span>,<span class="string">'/join/group/'</span>,<span class="string">'/join/class/'</span>,<span class="string">'/student/discuss/wall/'</span>,<span class="string">'/student/discuss/free/'</span>];</span><br><span class="line">          <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>,len = paths.length; i&lt;len ; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(result.indexOf(paths[i]) &gt; <span class="number">-1</span>)&#123;</span><br><span class="line">                scanType = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">break</span> ;</span><br><span class="line">            &#125;     </span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        _this.loading.hide();</span><br><span class="line">        <span class="keyword">if</span>(scanType)&#123;</span><br><span class="line">            <span class="keyword">return</span> _this.$router.replace(result);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            _this.closeScan();</span><br><span class="line">            weui.dialog(&#123;</span><br><span class="line">                title: _this.$t(<span class="string">'l.s.scan.errTips'</span>),</span><br><span class="line">                content: _this.$t(<span class="string">'l.s.scan.cardErr'</span>),</span><br><span class="line">                className: <span class="string">'custom-classname'</span>,</span><br><span class="line">                buttons: [&#123;</span><br><span class="line">                    label: _this.$t(<span class="string">'l.s.scan.confirm'</span>),</span><br><span class="line">                    type: <span class="string">'primary'</span>,</span><br><span class="line">                    onClick: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                        _this.$router.go(<span class="number">-1</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;]</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;      </span><br><span class="line">        <span class="keyword">return</span> _this.$router.replace(result);</span><br><span class="line">    &#125;,  </span><br><span class="line">    onerror(error)&#123;</span><br><span class="line">      _this.GL_ALERT(error);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  created()&#123;</span><br><span class="line">      <span class="keyword">var</span> size = $(<span class="string">'html'</span>)[<span class="number">0</span>].style.fontSize.replace(<span class="string">'px'</span>,<span class="string">''</span>);</span><br><span class="line">      <span class="keyword">this</span>.size = size * <span class="number">0.32</span>;</span><br><span class="line">  &#125;,</span><br><span class="line"> </span><br><span class="line">  mounted : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> _this = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">this</span>.baseSize = $(<span class="string">'html'</span>).css(<span class="string">'font-size'</span>);</span><br><span class="line">    <span class="keyword">this</span>.baseNum = <span class="keyword">this</span>.baseSize.replace(<span class="string">'px'</span>, <span class="string">''</span>);</span><br><span class="line">            </span><br><span class="line">    <span class="keyword">var</span> ua = navigator.userAgent.toLowerCase();</span><br><span class="line">    <span class="keyword">if</span>(<span class="regexp">/ipad/i</span>.test(ua))&#123;</span><br><span class="line">      <span class="keyword">this</span>.rem12 = <span class="string">'20px'</span>;</span><br><span class="line">      <span class="keyword">this</span>.rem14 = <span class="string">'24px'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">window</span>.plus)&#123;</span><br><span class="line">      _this.checkPermission(<span class="string">'CAMERA'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">            _this.check = data;</span><br><span class="line">            <span class="keyword">if</span>(_this.check)&#123;</span><br><span class="line">                _this.scanCard();   </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">          _this.$router.go(<span class="number">-1</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> _this.GL_ALERT(_this.$t(<span class="string">'l.s.scan.byPhone'</span>));</span><br><span class="line">    &#125;    </span><br><span class="line">  &#125;,</span><br><span class="line">  beforeDestroy()&#123;</span><br><span class="line">    <span class="keyword">this</span>.closeScan();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;style scoped&gt;</span></span><br><span class="line"><span class="regexp">#bcid &#123;</span></span><br><span class="line"><span class="regexp">      height : 100%;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">.error-box&#123;</span></span><br><span class="line"><span class="regexp">  width:100%;</span></span><br><span class="line"><span class="regexp">  height:100vh;</span></span><br><span class="line"><span class="regexp">  display:flex;</span></span><br><span class="line"><span class="regexp">  justify-content: center;</span></span><br><span class="line"><span class="regexp">  align-items: center;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">.error-msg&#123;</span></span><br><span class="line"><span class="regexp">  font-size:.4rem;</span></span><br><span class="line"><span class="regexp">  margin:auto;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;/</span>style&gt;</span><br></pre></td></tr></table></figure><p>打开相机和相册界面代码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br></pre></td><td class="code"><pre><span class="line">//crop.js</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;crop-box&quot; v-show=&quot;isCrop&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;crop-area-bg&quot; v-show=&quot;!imgLoaded&quot; &gt;&#123;&#123;bgMsg&#125;&#125;&lt;/div&gt;</span><br><span class="line">        &lt;div :id=&quot;&apos;crop_area&apos;+btnId&quot; class=&quot;crop-area&quot; :style=&quot;&#123;opacity:opacity&#125;&quot; &gt;&lt;/div&gt;</span><br><span class="line">        &lt;span class=&quot;btn-rotate-left&quot; @click=&quot;rotateLeft&quot;&gt;&lt;/span&gt;</span><br><span class="line">        &lt;div class=&quot;btn-box&quot;&gt;</span><br><span class="line">            &lt;span class=&quot;btn-cancel&quot; @click=&quot;cancelCrop&quot;&gt;&#123;&#123;$t(&apos;l.i.crop.cancel&apos;)&#125;&#125;&lt;/span&gt;</span><br><span class="line">            &lt;span class=&quot;btn-reset&quot; @click=&quot;rotateReset&quot;&gt;&#123;&#123;$t(&apos;l.i.crop.restore&apos;)&#125;&#125;&lt;/span&gt;</span><br><span class="line">            &lt;span class=&quot;btn-commit&quot; @click=&quot;confirmCrop&quot;&gt;&#123;&#123;$t(&apos;l.i.crop.finish&apos;)&#125;&#125;&lt;/span&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    import * as util from &apos;@static/js/util.js&apos;;</span><br><span class="line">export default&#123;</span><br><span class="line">        props: [</span><br><span class="line">            &apos;btnId&apos;,</span><br><span class="line">            &apos;fileTypes&apos;</span><br><span class="line">],</span><br><span class="line">data()&#123;</span><br><span class="line">return&#123;</span><br><span class="line">                seling: false,     //判断是否在拍照或者读取相册</span><br><span class="line">                client : null,</span><br><span class="line">                region: &apos;oss-cn-shenzhen&apos;,     //根据你买的那个区的做相应的更改</span><br><span class="line">                bucket: &apos;boyintest&apos;,</span><br><span class="line">                id: &apos;uploadImage&apos;,</span><br><span class="line">                percentage: 0,</span><br><span class="line">                opacity : 0,</span><br><span class="line">                url: &apos;&apos;,</span><br><span class="line">                bgMsg : &apos;&apos;,//$t(&apos;l.i.crop.pictureProcessing&apos;)</span><br><span class="line">                uploadFilesName: &apos;&apos;,</span><br><span class="line">                uploadfile: [],</span><br><span class="line">                imgLoaded : false,</span><br><span class="line">                maxLength: 1,</span><br><span class="line">                isCrop : false,</span><br><span class="line">                rotate : 0,</span><br><span class="line">                defaultFileTypes : &apos;jpg,png,jpeg,JPG,PNG,JPEG&apos;,</span><br><span class="line">                credentials : null,</span><br><span class="line">                fileUrlPre : null,</span><br><span class="line">                uploadUrl : null</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">methods:&#123;</span><br><span class="line">            rotateLeft : function()&#123;</span><br><span class="line">                this.crop.rotate(-90);</span><br><span class="line">            &#125;,</span><br><span class="line">            rotateRight : function()&#123;</span><br><span class="line">                this.crop.rotate(10);</span><br><span class="line">            &#125;,</span><br><span class="line">            rotateReset : function()&#123;</span><br><span class="line">                this.crop.reset();</span><br><span class="line">            &#125;,</span><br><span class="line">            getCredentials : function () &#123;</span><br><span class="line">                var _this = this;</span><br><span class="line">                _this.$axios.post(_this.apiUrl + &quot;/sts/get-credentials&quot;,_this.$qs.stringify(&#123;type : 20&#125;)).then(function (response) &#123;</span><br><span class="line">                    if (!response || !response.data.success) &#123;</span><br><span class="line">                        return _this.loading.hide();</span><br><span class="line">                    &#125;</span><br><span class="line">                    </span><br><span class="line">                    _this.credentials = &#123;</span><br><span class="line">                        bucketName : response.data.bucket,</span><br><span class="line">                        fileBucketName : response.data.filePath,</span><br><span class="line">                        credentials : JSON.stringify(response.data.sts),</span><br><span class="line">                    &#125;;</span><br><span class="line">                    _this.fileUrlPre = response.data.fileUrlPre;</span><br><span class="line">                    _this.uploadUrl = response.data.uploadUrl;</span><br><span class="line">                  </span><br><span class="line">                    // 设置参数</span><br><span class="line">                    _this.uploader.setOption(&#123;</span><br><span class="line">                        url : _this.uploadUrl,</span><br><span class="line">                        multipart_params : _this.credentials</span><br><span class="line">                    &#125;);</span><br><span class="line"></span><br><span class="line">                    _this.uploader.start();</span><br><span class="line">    &#125;).catch(function (error) &#123;</span><br><span class="line">        _this.loading.hide();</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;,</span><br><span class="line">            cancelCrop : function()&#123;</span><br><span class="line">                var _this = this;</span><br><span class="line">                _this.seling = false;</span><br><span class="line">                if(!_this.imgLoaded)&#123;</span><br><span class="line">                    return;</span><br><span class="line">                &#125;</span><br><span class="line">                _this.isCrop = false;</span><br><span class="line">                _this.crop.destroy();</span><br><span class="line">                _this.crop = null;</span><br><span class="line">                _this.uploader.disableBrowse(false);</span><br><span class="line">                _this.imgLoaded = false;</span><br><span class="line">                _this.opacity = 0;</span><br><span class="line"></span><br><span class="line">                _this.$emit(&quot;cancelCrop&quot;);</span><br><span class="line">                // _this.$bus.$emit(&apos;cropStatus&apos;, false);</span><br><span class="line">            &#125;,</span><br><span class="line">            confirmCrop : function()&#123;</span><br><span class="line">                var _this = this;</span><br><span class="line">                _this.seling = false;</span><br><span class="line">                if(!_this.imgLoaded)&#123;</span><br><span class="line">                    return;</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                if(_this.croping)&#123;</span><br><span class="line">                    return weui.toast(_this.$t(&apos;l.i.crop.uploading&apos;),1000);</span><br><span class="line">                &#125;</span><br><span class="line">                _this.croping = true;</span><br><span class="line">                _this.loading = weui.loading(_this.$t(&apos;l.i.crop.uploading&apos;), &#123;className: &apos;moka-loading&apos;&#125;);</span><br><span class="line">                try &#123;</span><br><span class="line">                    var data = _this.crop.getCanvasData();</span><br><span class="line">                    var width,height;</span><br><span class="line">                    if(data.naturalWidth &gt; 1000)&#123;</span><br><span class="line">                        width = 1000;</span><br><span class="line">                        height = data.naturalHeight * 1000 / data.naturalWidth;</span><br><span class="line">                    &#125;</span><br><span class="line">                    var cas = _this.crop.getCroppedCanvas(&#123;</span><br><span class="line">                        width : width,</span><br><span class="line">                        height : height,</span><br><span class="line">                        // Limit max sizes</span><br><span class="line">                        maxWidth: 4096,</span><br><span class="line">                        maxHeight: 4096,</span><br><span class="line">                    &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                    var fileName = _this.file.name;</span><br><span class="line">                    var saveName = new Date().getTime() + &apos;.&apos; + util.getSuffix(fileName);</span><br><span class="line"></span><br><span class="line">                    for(var index in _this.files)&#123;//清除所有文件</span><br><span class="line">                        var upFile = _this.files[index];</span><br><span class="line">                        _this.uploader.removeFile(upFile);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                  </span><br><span class="line">                    cas.toBlob(function (bolb) &#123;</span><br><span class="line">                        var file = new File([bolb], saveName, &#123;type: &apos;image/jpeg&apos;&#125;);</span><br><span class="line">                        _this.croping = false;</span><br><span class="line">                        _this.currFile = file;</span><br><span class="line">                        _this.uploader.addFile(file);</span><br><span class="line">                        _this.loading.hide();</span><br><span class="line">                    &#125;, &quot;image/jpeg&quot;, 0.95)</span><br><span class="line">                &#125; catch (error) &#123;</span><br><span class="line">                    _this.loading.hide();</span><br><span class="line">                    weui.toast(&apos;error&apos;);</span><br><span class="line">                    _this.cancelCrop();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            uploaded : function(fileName, src)&#123;</span><br><span class="line">                var _this = this;</span><br><span class="line">                weui.toast(_this.$t(&apos;l.i.crop.uploadSuccess&apos;),1000);</span><br><span class="line">                _this.$emit(&quot;fileUploadCallback&quot;, fileName, src);</span><br><span class="line">            &#125;,</span><br><span class="line">            initCrop : function(file)&#123;</span><br><span class="line">                var _this = this;</span><br><span class="line">                // console.log(_this.isCrop);</span><br><span class="line">                if(_this.isCrop)&#123;//正在剪裁</span><br><span class="line">                    _this.isCrop = false;</span><br><span class="line">                    return _this.getCredentials();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                _this.file = file;</span><br><span class="line">                var fileName = _this.file.name;</span><br><span class="line">                </span><br><span class="line">                var fileTypes = _this.defaultFileTypes;</span><br><span class="line">                if(_this.fileTypes &amp;&amp; _this.fileTypes.length &gt; 0)&#123;</span><br><span class="line">                    fileTypes = _this.fileTypes;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                var typeTpl = &apos;,&apos; + fileTypes.toLocaleLowerCase()  + &apos;,&apos;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                var suffix = util.getSuffix(fileName).toLocaleLowerCase();</span><br><span class="line">                if(typeTpl.indexOf(suffix) &lt; 0)&#123;</span><br><span class="line">                    _this.uploader.removeFile(file);</span><br><span class="line">                    return _this.GL_ALERT(_this.$t(&apos;l.i.crop.notSupported&apos;));</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                if(suffix != &apos;jpg&apos; &amp;&amp; suffix != &apos;png&apos; &amp;&amp; suffix != &apos;jpeg&apos;)&#123;</span><br><span class="line">                    _this.loading = weui.loading(_this.$t(&apos;l.i.crop.uploading&apos;), &#123;className: &apos;moka-loading&apos;&#125;);</span><br><span class="line">                    _this.currFile = file;</span><br><span class="line">                    return _this.getCredentials();//_this.uploadFile(_this.file);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                _this.$emit(&quot;onCrop&quot;);</span><br><span class="line">                // _this.$bus.$emit(&apos;cropStatus&apos;, true);</span><br><span class="line">                </span><br><span class="line">                _this.isCrop = true;</span><br><span class="line">                _this.loading = weui.loading(_this.$t(&apos;l.i.crop.pictureProcessing&apos;));</span><br><span class="line">                var preloader = new moxie.image.Image();</span><br><span class="line">                preloader.onload = function () &#123;</span><br><span class="line">                    var imgsrc = preloader.type == &apos;image/jpeg&apos; ? preloader.getAsDataURL(&apos;image/jpeg&apos;, 80) : preloader.getAsDataURL(); //得到图片src,实质为一个base64编码的数据</span><br><span class="line">                    _this.file.imgsrc = imgsrc;</span><br><span class="line">                    preloader.destroy();</span><br><span class="line">                    preloader = null;</span><br><span class="line">                    $(&apos;#crop_area&apos;+_this.btnId).html(&apos;&lt;img src=&quot;&apos; + imgsrc + &apos;&quot;&gt;&apos;);</span><br><span class="line">                    if(!_this.crop)&#123;</span><br><span class="line">                        _this.crop  = new Cropper($(&apos;#crop_area&apos;+_this.btnId+&apos; &gt; img&apos;)[0], &#123;</span><br><span class="line">                            dragMode : &apos;move&apos;,</span><br><span class="line">                            background : false,</span><br><span class="line">                            autoCropArea : 1,</span><br><span class="line">                            crop(event) &#123;</span><br><span class="line">                            &#125;,</span><br><span class="line">                            ready()&#123;</span><br><span class="line">                                _this.imgLoaded = true;</span><br><span class="line">                                _this.opacity = 1;</span><br><span class="line">                                _this.loading.hide();</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;;</span><br><span class="line">                preloader.load(_this.file.getSource());</span><br><span class="line">                _this.$emit(&quot;finish&quot;);</span><br><span class="line">            &#125;,</span><br><span class="line">            initUploader : function(options)&#123;</span><br><span class="line">                var _this = this;</span><br><span class="line"></span><br><span class="line">                var fileTypes = _this.defaultFileTypes;</span><br><span class="line">                if(_this.fileTypes &amp;&amp; _this.fileTypes.length &gt; 0)&#123;</span><br><span class="line">                    fileTypes = _this.fileTypes;</span><br><span class="line">                &#125;</span><br><span class="line">                var filters = [];</span><br><span class="line">                if(!$(&apos;#app&apos;).hasClass(&apos;pc&apos;))&#123;</span><br><span class="line">                    filters = [];</span><br><span class="line">                &#125;else&#123;</span><br><span class="line">                    filters =  [</span><br><span class="line">                        &#123;title: &quot;document&quot;, extensions: fileTypes&#125;//&quot;jpg,png,jpeg,JPG,PNG,JPEG&quot;</span><br><span class="line">                    ];</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                var typeTpl = &apos;,&apos; + fileTypes.toLocaleLowerCase()  + &apos;,&apos;;</span><br><span class="line"></span><br><span class="line">                var btnId = _this.btnId;</span><br><span class="line">                if(options &amp;&amp; options.btnId)&#123;</span><br><span class="line">                    btnId = options.btnId</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                if (window.plus) &#123;</span><br><span class="line">                    btnId = _this.btnId + &apos;_hide&apos;;</span><br><span class="line">                    $(&apos;body&apos;).append(&apos;&lt;span id=&quot;&apos; + btnId + &apos;&quot; style=&quot;position:absolute;z-index=-9;&quot;&gt;&lt;/span&gt;&apos;)</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                var uploader = new plupload.Uploader(&#123;</span><br><span class="line">                    runtimes : &apos;html5,flash&apos;,</span><br><span class="line">                    browse_button : btnId, //选择文件按钮ID </span><br><span class="line">                    max_file_size : &apos;100mb&apos;,  //文件上传最大值</span><br><span class="line">                    multipart : true,</span><br><span class="line">                    chunks : true,//不分块上传</span><br><span class="line">                    chunk_size : &apos;10mb&apos;,//分块大小，小于这个大小的不分块</span><br><span class="line">                    unique_names : true,  // 上传的文件名是否唯一,只有在未进行分块上传时文件名唯一才有效</span><br><span class="line">                    url: _this.uploadUrl, //提交到后台的url地址</span><br><span class="line">                    flash_swf_url: &apos;/js/lib/plupload/plupload.flash.swf&apos;,//plupload.flash.swf文件所在路径</span><br><span class="line">                    multi_selection : false,</span><br><span class="line">                    filters: filters,</span><br><span class="line">                    init : &#123;</span><br><span class="line">                        FileUploaded : function(up, file, info) &#123;//上传服务器方法，暂时未用到</span><br><span class="line">                            up.disableBrowse(false);</span><br><span class="line">                            var result = JSON.parse(info.response);</span><br><span class="line">                            _this.loading.hide();</span><br><span class="line">                            if(!result.success)&#123;</span><br><span class="line">                                return _this.GL_ALERT(_this.$t(&apos;l.i.crop.uploadFailure&apos;));</span><br><span class="line">                            &#125;</span><br><span class="line">                            if(!result || !result.saveName)&#123;</span><br><span class="line">                                return _this.GL_ALERT(_this.$t(&apos;l.i.crop.uploadFailure&apos;));</span><br><span class="line">                            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                            weui.toast(_this.$t(&apos;l.i.crop.uploadSuccess&apos;), 1000);</span><br><span class="line">                            var attachFileName = _this.currFile.name;    //源文件的名字</span><br><span class="line">                            var saveName = _this.fileUrlPre.concat(&quot;/&quot;, result.saveName);</span><br><span class="line">                            var fileSize = _this.currFile.size;</span><br><span class="line">                            _this.$emit(&quot;imgUploadCallback&quot;, attachFileName, saveName, fileSize);</span><br><span class="line">                        &#125;,</span><br><span class="line">                        FilesAdded : function(up, files)&#123;</span><br><span class="line">                            _this.files = files;</span><br><span class="line">                            _this.file = files[0];</span><br><span class="line">                            _this.initCrop(_this.file);</span><br><span class="line">                        &#125;,</span><br><span class="line">                        BeforeUpload : function(up, file)&#123;</span><br><span class="line">                            _this.cancelCrop();//上传之前 销毁剪裁框</span><br><span class="line">                            up.disableBrowse(true);</span><br><span class="line">                        &#125;,</span><br><span class="line">                        UploadProgress : function(up, file) &#123; </span><br><span class="line">                        // console.log(&quot;eeeeeeeeeeeee&quot;);</span><br><span class="line">                        &#125;,</span><br><span class="line">                        Error : function(up, err) &#123;</span><br><span class="line">                            // _this.loading.hide();</span><br><span class="line">                            up.disableBrowse(false);</span><br><span class="line">                            up.refresh(); // Reposition Flash/Silverlight</span><br><span class="line">                            _this.GL_ALERT(err.message);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">                console.log(&apos;init&apos;);</span><br><span class="line">                uploader.init();</span><br><span class="line">                _this.uploader = uploader;</span><br><span class="line">            &#125;,</span><br><span class="line">            reset : function(btnId)&#123;</span><br><span class="line">                var _this = this;</span><br><span class="line">                var uploader = _this.uploader;</span><br><span class="line">                uploader.destroy();</span><br><span class="line">                // _this.uploader = null;</span><br><span class="line">                setTimeout(function()&#123;</span><br><span class="line">                    _this.initUploader(&#123;btnId:btnId&#125;);</span><br><span class="line">                &#125;, 500);</span><br><span class="line"></span><br><span class="line">                if (window.plus) &#123;</span><br><span class="line">                    $(&apos;#&apos; + this.btnId).off(&apos;click&apos;);</span><br><span class="line">                    $(&apos;#&apos; + btnId).on(&apos;click&apos;, this.onSel)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            initAppCrop : function(file)&#123;</span><br><span class="line">                var _this = this;</span><br><span class="line">                if(_this.isCrop)&#123;//正在剪裁</span><br><span class="line">                    _this.isCrop = false;</span><br><span class="line">                    return _this.getCredentials();</span><br><span class="line">                &#125;</span><br><span class="line">                _this.file = file;</span><br><span class="line">                _this.$emit(&quot;onCrop&quot;);</span><br><span class="line">                // _this.$bus.$emit(&apos;cropStatus&apos;, true);</span><br><span class="line">                </span><br><span class="line">                _this.isCrop = true;</span><br><span class="line">                $(&apos;#crop_area&apos;+_this.btnId).html(&apos;&lt;img src=&quot;&apos; + file.src + &apos;&quot;&gt;&apos;);</span><br><span class="line">                if(!_this.crop)&#123;</span><br><span class="line">                    // _this.loading = weui.loading(_this.$t(&apos;l.i.crop.pictureProcessing&apos;));</span><br><span class="line">                    _this.crop  = new Cropper($(&apos;#crop_area&apos;+_this.btnId+&apos; &gt; img&apos;)[0], &#123;</span><br><span class="line">                        dragMode : &apos;move&apos;,</span><br><span class="line">                        background : false,</span><br><span class="line">                        autoCropArea : 1,</span><br><span class="line">                        crop(event) &#123;</span><br><span class="line">                        &#125;,</span><br><span class="line">                        ready()&#123;</span><br><span class="line">                            _this.imgLoaded = true;</span><br><span class="line">                            _this.opacity = 1;</span><br><span class="line">                            _this.loading.hide();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">                _this.$emit(&quot;finish&quot;);</span><br><span class="line">            &#125;,</span><br><span class="line">            getImage : function () &#123;</span><br><span class="line">                const ua = window.navigator.userAgent.toLocaleLowerCase();</span><br><span class="line">                var isIOS = /iphone|ipad|ipod/.test(ua);</span><br><span class="line">                var _this = this;</span><br><span class="line">                _this.checkPermission(&apos;CAMERA&apos;,function(data)&#123;</span><br><span class="line">                   if(data)&#123;</span><br><span class="line">                        var c = plus.camera.getCamera();   </span><br><span class="line">                        var area = 0;  //记录最大像素  </span><br><span class="line">                        var j = 0;  //记录最大像素的索引</span><br><span class="line">                        for(let i = 0; i &lt; c.supportedImageResolutions.length; i++)&#123;</span><br><span class="line">                            var arr = c.supportedImageResolutions[i].split(&quot;*&quot;);</span><br><span class="line">                            if(arr.length &lt; 2)&#123;</span><br><span class="line">                                continue;</span><br><span class="line">                            &#125;</span><br><span class="line">                            var currentArea = arr[0] * arr[1];</span><br><span class="line">                            if(currentArea &gt; area)&#123;</span><br><span class="line">                                area = currentArea;</span><br><span class="line">                                j = i;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                        var filename = new Date().getTime() + &apos;.jpg&apos;;</span><br><span class="line">                        c.captureImage(function(filePath) &#123;</span><br><span class="line">                            </span><br><span class="line">                            // filePath  为拍完照保存在本地的路径   _doc/shijain...</span><br><span class="line">                            plus.io.resolveLocalFileSystemURL(filePath, function(entry) &#123;</span><br><span class="line">                                 _this.loading = weui.loading(_this.$t(&apos;l.i.crop.pictureProcessing&apos;));</span><br><span class="line">                                // 可通过entry对象操作 file 文件 </span><br><span class="line">                                entry.file( function ( file ) &#123;</span><br><span class="line">                                    var fileReader = new plus.io.FileReader();</span><br><span class="line">                                    fileReader.onloadend = function ( e ) &#123;</span><br><span class="line">                                        // Get data</span><br><span class="line">                                        // alert( e.target.result );</span><br><span class="line">                                        var imgPath = e.target.result;</span><br><span class="line">                                        var image = new Image();</span><br><span class="line">                                        image.src = imgPath;</span><br><span class="line">                                        image.name = entry.name;</span><br><span class="line">                                        image.onload = function() &#123;</span><br><span class="line">                                            _this.initAppCrop(image); /*上传图片*/</span><br><span class="line">                                        &#125;</span><br><span class="line">                                    &#125;;</span><br><span class="line">                                    fileReader.readAsDataURL( file );</span><br><span class="line">                                &#125;, function ( file ) &#123;</span><br><span class="line">                                    alert( file.message );</span><br><span class="line">                                &#125; );</span><br><span class="line">                            &#125;, function(filePath) &#123;</span><br><span class="line">                                 _this.loading.hide();</span><br><span class="line">                                 _this.seling = false;</span><br><span class="line">                                console.log(&quot;读取拍照文件错误：&quot; + filePath.message);</span><br><span class="line">                            &#125;);</span><br><span class="line">                        &#125;, function(s) &#123;</span><br><span class="line">                            //防止选相机时 不拍照了</span><br><span class="line">                            _this.seling = false;</span><br><span class="line">                            console.log(&quot;拍照错误：&quot; + filePath.message);</span><br><span class="line">                        &#125;, &#123;</span><br><span class="line">                            filename: &quot;_doc/&quot; + filename,</span><br><span class="line">                            resolution: c.supportedImageResolutions[j],</span><br><span class="line">                        &#125;)</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;)</span><br><span class="line">                </span><br><span class="line">            &#125;,</span><br><span class="line">            galleryImg : function () &#123;</span><br><span class="line">                const ua = window.navigator.userAgent.toLocaleLowerCase();</span><br><span class="line">                var isIOS = /iphone|ipad|ipod/.test(ua);</span><br><span class="line">                var _this = this;</span><br><span class="line">                _this.checkPermission(&apos;GALLERY&apos;,function(data)&#123;</span><br><span class="line">                    if(!data)&#123;</span><br><span class="line">                        return;</span><br><span class="line">                    &#125;</span><br><span class="line">                    plus.gallery.pick(function(a) &#123;</span><br><span class="line">                        plus.io.resolveLocalFileSystemURL(a, function(entry) &#123;</span><br><span class="line">                             _this.loading = weui.loading(_this.$t(&apos;l.i.crop.pictureProcessing&apos;));</span><br><span class="line">                            // 可通过entry对象操作 file 文件 </span><br><span class="line">                            entry.file( function ( file ) &#123;</span><br><span class="line">                                var fileReader = new plus.io.FileReader();</span><br><span class="line">                                fileReader.onloadend = function ( e ) &#123;</span><br><span class="line">                                    // Get data</span><br><span class="line">                                    // alert( e.target.result );</span><br><span class="line">                                    var imgPath = e.target.result;</span><br><span class="line">                                    var image = new Image();</span><br><span class="line">                                    image.src = imgPath;</span><br><span class="line">                                    image.name = entry.name;</span><br><span class="line">                                    </span><br><span class="line">                                    image.onload = function() &#123;</span><br><span class="line">                                       </span><br><span class="line">                                        _this.initAppCrop(image); /*上传图片*/</span><br><span class="line">                                    &#125;</span><br><span class="line">                                &#125;;</span><br><span class="line">                                fileReader.readAsDataURL( file );</span><br><span class="line">                            &#125;, function ( file ) &#123;</span><br><span class="line">                                alert( file.message );</span><br><span class="line">                            &#125; );</span><br><span class="line">                            // var imgPath = isIOS?entry.toRemoteURL():entry.toLocalURL();</span><br><span class="line">                            // var image = new Image();</span><br><span class="line">                            // image.src = imgPath;</span><br><span class="line">                            // image.name = entry.name;</span><br><span class="line">                            // image.onload = function() &#123;</span><br><span class="line">                            //     _this.initAppCrop(image); /*上传图片*/</span><br><span class="line">                            // &#125;</span><br><span class="line">                        &#125;, function(e) &#123;</span><br><span class="line">                            _this.seling = false;</span><br><span class="line">                            _this.loading.hide();</span><br><span class="line">                            console.log(&quot;读取拍照文件错误：&quot; + e.message);</span><br><span class="line">                        &#125;);</span><br><span class="line">                    &#125;, function(a) &#123;</span><br><span class="line">                        //防止安卓机跳到相册后不选了</span><br><span class="line">                        _this.seling = false;</span><br><span class="line">                    &#125;, &#123;</span><br><span class="line">                        filter: &quot;image&quot;</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;)</span><br><span class="line">                </span><br><span class="line">            &#125;,</span><br><span class="line">            onSel : function()&#123;</span><br><span class="line">                var _this = this;</span><br><span class="line">                if(_this.seling)&#123;</span><br><span class="line">                    return;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                weui.actionSheet([</span><br><span class="line">                    &#123;</span><br><span class="line">                        label: _this.$t(&apos;l.i.crop.takePhoto&apos;),</span><br><span class="line">                        onClick: function () &#123;_this.seling = true;_this.getImage()&#125;</span><br><span class="line">                    &#125;, &#123;</span><br><span class="line">                        label: _this.$t(&apos;l.i.crop.takeByphotos&apos;),</span><br><span class="line">                        onClick: function () &#123;_this.seling = true;_this.galleryImg();&#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                ], [</span><br><span class="line">                    &#123;</span><br><span class="line">                        label: _this.$t(&apos;l.i.crop.cancel&apos;),</span><br><span class="line">                        onClick: function () &#123;_this.seling = false;&#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                ]);</span><br><span class="line">            &#125;,</span><br><span class="line">            initEvent: function()&#123;</span><br><span class="line">                console.log(&apos;initEvent&apos;);</span><br><span class="line">                $(&apos;#&apos; + this.btnId).off(&apos;click&apos;);</span><br><span class="line">                $(&apos;#&apos; + this.btnId).on(&apos;click&apos;, this.onSel)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">mounted()&#123;</span><br><span class="line">            if (!HTMLCanvasElement.prototype.toBlob) &#123;</span><br><span class="line">                Object.defineProperty(HTMLCanvasElement.prototype, &apos;toBlob&apos;, &#123;</span><br><span class="line">                    value: function (callback, type, quality) &#123;</span><br><span class="line">                        var binStr = atob( this.toDataURL(type, quality).split(&apos;,&apos;)[1] ),</span><br><span class="line">                            len = binStr.length,</span><br><span class="line">                            arr = new Uint8Array(len);</span><br><span class="line">                        for (var i=0; i&lt;len; i++ ) &#123;</span><br><span class="line">                            arr[i] = binStr.charCodeAt(i);</span><br><span class="line">                        &#125;</span><br><span class="line">                        callback( new Blob( [arr], &#123;type: type || &apos;image/png&apos;&#125; ) );</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            // var topHeight = $(&apos;html&apos;).css(&apos;font-size&apos;);</span><br><span class="line">            // var boxHeight = $(&apos;html&apos;).height() - topHeight.replace(&apos;px&apos;, &apos;&apos;);</span><br><span class="line">            // $(&apos;.crop-box&apos;).css(&apos;top&apos;, topHeight).css(&apos;height&apos;, boxHeight);</span><br><span class="line"></span><br><span class="line">            if (window.plus) &#123;</span><br><span class="line">                console.log(window.plus)</span><br><span class="line">                this.initEvent();</span><br><span class="line">            &#125;</span><br><span class="line">            this.initUploader();</span><br><span class="line">        &#125;,</span><br><span class="line">        beforeDestroy : function()&#123;</span><br><span class="line">            this.seling = false;</span><br><span class="line">            if(this.loading)&#123;</span><br><span class="line">                this.loading.hide();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.crop-area img&#123;</span><br><span class="line">    max-width: 100%;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line">this.checkPermission(&apos;CAMERA&apos;,function(data)&#123;</span><br><span class="line">              if(data)&#123;</span><br><span class="line">                   var c = plus.camera.getCamera();   </span><br><span class="line">                   var area = 0;  //记录最大像素  </span><br><span class="line">                   var j = 0;  //记录最大像素的索引</span><br><span class="line">                   for(let i = 0; i &lt; c.supportedImageResolutions.length; i++)&#123;</span><br><span class="line">                       var arr = c.supportedImageResolutions[i].split(&quot;*&quot;);</span><br><span class="line">                       if(arr.length &lt; 2)&#123;</span><br><span class="line">                           continue;</span><br><span class="line">                       &#125;</span><br><span class="line">                       var currentArea = arr[0] * arr[1];</span><br><span class="line">                       if(currentArea &gt; area)&#123;</span><br><span class="line">                           area = currentArea;</span><br><span class="line">                           j = i;</span><br><span class="line">                       &#125;</span><br><span class="line">                   &#125;</span><br><span class="line">                   var filename = new Date().getTime() + &apos;.jpg&apos;;</span><br><span class="line">                   c.captureImage(function(filePath) &#123;</span><br><span class="line">                       </span><br><span class="line">                       // filePath  为拍完照保存在本地的路径   _doc/shijain...</span><br><span class="line">                       plus.io.resolveLocalFileSystemURL(filePath, function(entry) &#123;</span><br><span class="line">                            _this.loading = weui.loading(_this.$t(&apos;l.i.crop.pictureProcessing&apos;));</span><br><span class="line">                           // 可通过entry对象操作 file 文件 </span><br><span class="line">                           entry.file( function ( file ) &#123;</span><br><span class="line">                               var fileReader = new plus.io.FileReader();</span><br><span class="line">                               fileReader.onloadend = function ( e ) &#123;</span><br><span class="line">                                   // Get data</span><br><span class="line">                                   // alert( e.target.result );</span><br><span class="line">                                   var imgPath = e.target.result;</span><br><span class="line">                                   var image = new Image();</span><br><span class="line">                                   image.src = imgPath;</span><br><span class="line">                                   image.name = entry.name;</span><br><span class="line">                                   image.onload = function() &#123;</span><br><span class="line">                                       _this.initAppCrop(image); /*上传图片*/</span><br><span class="line">                                   &#125;</span><br><span class="line">                               &#125;;</span><br><span class="line">                               fileReader.readAsDataURL( file );</span><br><span class="line">                           &#125;, function ( file ) &#123;</span><br><span class="line">                               alert( file.message );</span><br><span class="line">                           &#125; );</span><br><span class="line">                       &#125;, function(filePath) &#123;</span><br><span class="line">                            _this.loading.hide();</span><br><span class="line">                            _this.seling = false;</span><br><span class="line">                           console.log(&quot;读取拍照文件错误：&quot; + filePath.message);</span><br><span class="line">                       &#125;);</span><br><span class="line">                   &#125;, function(s) &#123;</span><br><span class="line">                       //防止选相机时 不拍照了</span><br><span class="line">                       _this.seling = false;</span><br><span class="line">                       console.log(&quot;拍照错误：&quot; + filePath.message);</span><br><span class="line">                   &#125;, &#123;</span><br><span class="line">                       filename: &quot;_doc/&quot; + filename,</span><br><span class="line">                       resolution: c.supportedImageResolutions[j],</span><br><span class="line">                   &#125;)</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">          </span><br><span class="line">          </span><br><span class="line">           _this.checkPermission(&apos;GALLERY&apos;,function(data)&#123;</span><br><span class="line">               if(!data)&#123;</span><br><span class="line">                   return;</span><br><span class="line">               &#125;</span><br><span class="line">               plus.gallery.pick(function(a) &#123;</span><br><span class="line">                   plus.io.resolveLocalFileSystemURL(a, function(entry) &#123;</span><br><span class="line">                        _this.loading = weui.loading(_this.$t(&apos;l.i.crop.pictureProcessing&apos;));</span><br><span class="line">                       // 可通过entry对象操作 file 文件 </span><br><span class="line">                       entry.file( function ( file ) &#123;</span><br><span class="line">                           var fileReader = new plus.io.FileReader();</span><br><span class="line">                           fileReader.onloadend = function ( e ) &#123;</span><br><span class="line">                               // Get data</span><br><span class="line">                               // alert( e.target.result );</span><br><span class="line">                               var imgPath = e.target.result;</span><br><span class="line">                               var image = new Image();</span><br><span class="line">                               image.src = imgPath;</span><br><span class="line">                               image.name = entry.name;</span><br><span class="line">                               </span><br><span class="line">                               image.onload = function() &#123;</span><br><span class="line">                                  </span><br><span class="line">                                   _this.initAppCrop(image); /*上传图片*/</span><br><span class="line">                               &#125;</span><br><span class="line">                           &#125;;</span><br><span class="line">                           fileReader.readAsDataURL( file );</span><br><span class="line">                       &#125;, function ( file ) &#123;</span><br><span class="line">                           alert( file.message );</span><br><span class="line">                       &#125; );</span><br><span class="line">                       // var imgPath = isIOS?entry.toRemoteURL():entry.toLocalURL();</span><br><span class="line">                       // var image = new Image();</span><br><span class="line">                       // image.src = imgPath;</span><br><span class="line">                       // image.name = entry.name;</span><br><span class="line">                       // image.onload = function() &#123;</span><br><span class="line">                       //     _this.initAppCrop(image); /*上传图片*/</span><br><span class="line">                       // &#125;</span><br><span class="line">                   &#125;, function(e) &#123;</span><br><span class="line">                       _this.seling = false;</span><br><span class="line">                       _this.loading.hide();</span><br><span class="line">                       console.log(&quot;读取拍照文件错误：&quot; + e.message);</span><br><span class="line">                   &#125;);</span><br><span class="line">               &#125;, function(a) &#123;</span><br><span class="line">                   //防止安卓机跳到相册后不选了</span><br><span class="line">                   _this.seling = false;</span><br><span class="line">               &#125;, &#123;</span><br><span class="line">                   filter: &quot;image&quot;</span><br><span class="line">               &#125;)</span><br><span class="line">           &#125;)</span><br><span class="line">           </span><br><span class="line">           </span><br><span class="line">           </span><br><span class="line">         //seling   防止重复点击    </span><br><span class="line">      onSel : function()&#123;</span><br><span class="line">           var _this = this;</span><br><span class="line">           if(_this.seling)&#123;</span><br><span class="line">               return;</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           weui.actionSheet([</span><br><span class="line">               &#123;</span><br><span class="line">                   label: _this.$t(&apos;l.i.crop.takePhoto&apos;),</span><br><span class="line">                   onClick: function () &#123;_this.seling = true;_this.getImage()&#125;</span><br><span class="line">               &#125;, &#123;</span><br><span class="line">                   label: _this.$t(&apos;l.i.crop.takeByphotos&apos;),</span><br><span class="line">                   onClick: function () &#123;_this.seling = true;_this.galleryImg();&#125;</span><br><span class="line">               &#125;</span><br><span class="line">           ], [</span><br><span class="line">               &#123;</span><br><span class="line">                   label: _this.$t(&apos;l.i.crop.cancel&apos;),</span><br><span class="line">                   onClick: function () &#123;_this.seling = false;&#125;</span><br><span class="line">               &#125;</span><br><span class="line">           ]);</span><br><span class="line">       &#125;,</span><br></pre></td></tr></table></figure><p>代码都是节选，也没做修改，只是总结下 使用相机和相册还有二维码的调用方法，具体请查看api。</p><h5 id="第四个问题"><a href="#第四个问题" class="headerlink" title="第四个问题"></a>第四个问题</h5><p>顶部导航栏（标题问题）</p><p>问题： 安卓点击输入框时，整个页面是会减小的，因此顶部导航栏还是会固定再顶部，但是ios点击输入框</p><p>弹起键盘时，页面是上移的，导致顶部标题也上移动。</p><p>研究了许久</p><p>修改 softinpputMode 为 adjustResize。 也可在配置文件manifest文件中修改模式。具体查看文档。</p><p>plus.webview.currentWebview().setStyle({softinputMode: “adjustResize”});</p><p>但是发行修改为这个模式后打包仍有各种问题</p><p>最后解决方法，就是使用原生导航栏，原生导航栏会将顶部标题固定在顶部。</p><p>使用方法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">setTitle()&#123;</span><br><span class="line">        <span class="keyword">var</span> _self = plus.webview.currentWebview();</span><br><span class="line">        <span class="keyword">var</span> buttons = !<span class="keyword">this</span>.meta.scan?[]:[</span><br><span class="line">              <span class="comment">//使用阿里图标库示例,打包后才会生效</span></span><br><span class="line">            &#123;</span><br><span class="line">              fontSrc : <span class="string">"_www/static/font/iconfont.ttf"</span>,   </span><br><span class="line">              text:<span class="string">'\ue663'</span>,</span><br><span class="line">              float:<span class="string">'right'</span>,</span><br><span class="line">              onclick: <span class="keyword">this</span>.onScan</span><br><span class="line">            &#125;</span><br><span class="line">        ];</span><br><span class="line">        _self.setStyle(&#123;</span><br><span class="line">            titleNView:&#123;</span><br><span class="line">              titleOverflow: <span class="string">'titleOverflow'</span>, </span><br><span class="line">              height: <span class="string">'50px'</span>,</span><br><span class="line">              buttons,</span><br><span class="line">              autoBackButton : <span class="keyword">this</span>.meta.back,</span><br><span class="line">              titleText : <span class="keyword">this</span>.$store.getters.getTitle ,</span><br><span class="line">              backgroundColor: <span class="keyword">this</span>.meta.bg , </span><br><span class="line">              titleColor : <span class="keyword">this</span>.meta.color </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><a href="http://www.html5plus.org/doc/zh_cn/webview.html#plus.webview.WebviewObject.setStyle" target="_blank" rel="noopener">原生导航栏文档</a></p><p>没记错的化文档说明中写 首页的 导航栏需要在配置文件中配置，没错的话 应该就是因为在代码中设置原生导航栏</p><p>用到了plus中的webview方法，可能plus的方法还没加载完，启动页已经关闭，导致页面没有顶部导航栏，所以首</p><p>页需要在manifest配置文件中配置</p><p>那么问题来了，我的项目是启动页完后未登录时进入的是登录页，已登录时是登录后的首页。我该如何配置？</p><p>而且我的项目是多语言的，配置中也只能是一种语言。因此我决定不配置首页，而是监听 plus的方法是否加载完成，加载完成时 再设置下，顶部标题。</p><p>这样做问题好像是解决了，但是要是性能很差的手机很慢才加载完成就会导致顶部导航栏的显示的很突然。所以</p><p>结合上面的关闭启动页的配置那里，把自动关闭启动页关闭，然后当plus的方法全部加载完成后 手动关闭启动页。因为是多语言，语言改变了的时候也要进行setTitle方法</p><p>注意： 有些页面是单独设置顶部标题内容的，一旦设置就得 返回键，扫码等  需要显示得图标全部设置，不会进行叠加，比如 本来有返回按钮，没有标题， 你再设置标题，  此时是不会有返回键的，因此需要全部一起再设置。</p><h4 id="第五个问题"><a href="#第五个问题" class="headerlink" title="第五个问题"></a>第五个问题</h4><p>web浏览器，当文件为网络连接时，创建一个窗口，打开链接，所以创建一个组件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;link_box&quot; class=&quot;link-box&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data()&#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      wbview : null,</span><br><span class="line">      id : &apos;link_view&apos;,</span><br><span class="line">      url : &apos;&apos;,</span><br><span class="line">      styles : &#123;&#125;,</span><br><span class="line">      extras : &#123;&#125;,</span><br><span class="line">      loading : null</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods:&#123;</span><br><span class="line">    show : function(url)&#123;</span><br><span class="line">      this.wbview = plus.webview.getWebviewById(this.id);</span><br><span class="line">      console.log(this.wbview);</span><br><span class="line">      if(this.wbview)&#123;</span><br><span class="line">        if(url.indexOf(&apos;http&apos;) == -1)&#123;</span><br><span class="line">          url = &quot;http://&quot;+url;</span><br><span class="line">        &#125;</span><br><span class="line">        this.wbview.loadURL(url);</span><br><span class="line">      &#125;else&#123;</span><br><span class="line">        this.wbview = plus.webview.create(url, this.id, this.styles, this.extras);</span><br><span class="line">      &#125;</span><br><span class="line">      plus.webview.show(this.id, &apos;slide-out-right&apos;);</span><br><span class="line">    &#125;，</span><br><span class="line">     onClose()&#123;</span><br><span class="line">        if(this.wbview)&#123;</span><br><span class="line">            this.wbview.close();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted : function()&#123;</span><br><span class="line">    var _this = this;</span><br><span class="line">    this.styles = &#123;</span><br><span class="line">      titleNView:&#123;</span><br><span class="line">            titleOverflow: &apos;titleOverflow&apos;, </span><br><span class="line">            height: &apos;50px&apos;,</span><br><span class="line">            autoBackButton : true,</span><br><span class="line">            backgroundColor: &quot;#FFFFFF&quot;, </span><br><span class="line">            titleColor : &quot;#000000&quot; ,</span><br><span class="line">          buttons: [&#123;</span><br><span class="line">                /* 字体文件自己阿里图标库下载，下面是关闭按钮*/</span><br><span class="line">              fontSrc : &quot;_www/static/font/iconfont.ttf&quot;,   </span><br><span class="line">              text:&apos;\ue690&apos;,</span><br><span class="line">              float:&apos;right&apos;,</span><br><span class="line">              onclick: this.onClose</span><br><span class="line">            &#125;]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>界面引用</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">...</span><br><span class="line">&lt;v-webview ref=&quot;webview&quot;&gt;&lt;/v-webview&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import webview from &apos;@/components/include/webview.vue&apos;;</span><br><span class="line">    export default&#123;</span><br><span class="line">        data()&#123;</span><br><span class="line">            return &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">         components:&#123;</span><br><span class="line">            &quot;v-webview&quot; : webview</span><br><span class="line">        &#125;,</span><br><span class="line">        methods:&#123;</span><br><span class="line">            goWebview(url)&#123;</span><br><span class="line">                this.$refs.webview.show(url);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>这样就可以实现链接跳转，但是这样的话会导致返回出问题，所以需要对返回重新设计</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> time = [<span class="literal">null</span>, <span class="literal">null</span>];    <span class="comment">//记录返回的两次间隔时间</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.plus) &#123;</span><br><span class="line">    plusReady();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">document</span>.addEventListener(<span class="string">'plusready'</span>, plusReady, <span class="literal">false</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">plusReady</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> webview = plus.webview.currentWebview();</span><br><span class="line">    plus.key.addEventListener(<span class="string">'backbutton'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        webview.canBack(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (e.canBack) &#123;</span><br><span class="line">                <span class="comment">//link_view  为自定义的id，可更换，保持与组建上的一致</span></span><br><span class="line">                <span class="keyword">var</span> wbview = plus.webview.getWebviewById(<span class="string">'link_view'</span>);</span><br><span class="line">                <span class="keyword">if</span>(wbview)&#123;</span><br><span class="line">                    <span class="comment">//判断新窗口是否可以返回，不可以返回的时候才清除窗口</span></span><br><span class="line">                   wbview.canBack(<span class="function"><span class="keyword">function</span>(<span class="params">wb</span>)</span>&#123;</span><br><span class="line">                        <span class="keyword">if</span>(wb.canBack)&#123;</span><br><span class="line">                            wbview.back();</span><br><span class="line">                        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                            plus.webview.close(<span class="string">'link_view'</span>, <span class="string">'slide-iny-right'</span>);</span><br><span class="line">                            wbview.clear();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    time = [<span class="literal">null</span>,<span class="literal">null</span>];   <span class="comment">//路由变化重置 time。</span></span><br><span class="line">                    router.go(<span class="number">-1</span>); <span class="comment">//返回上一级</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                time.shift();</span><br><span class="line">                time.push(<span class="keyword">new</span> <span class="built_in">Date</span>().getTime());</span><br><span class="line">                <span class="keyword">if</span> (time[<span class="number">1</span>] - time[<span class="number">0</span>] &gt; <span class="number">2000</span>) &#123;  <span class="comment">//事件间隔大于 2s 当作第一次 点击返回，做出提示</span></span><br><span class="line">           <span class="comment">//plus.nativeUI.toast  h5+API的提示窗口详细使用请看api，默认前面有应用名称：tips</span></span><br><span class="line">                    plus.nativeUI.toast(<span class="string">"再按一次返回退出应用！"</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    plus.runtime.quit();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>第六个问题</p><p>第一次登录时语言跟随系统，后面再次进来就不干了。</p><p>解析：第一次进来没有缓存语言，所以设置系统语言，以后进来有缓存语言，直接跟随缓存语言</p><p>plus.os.language  获取系统设置的语言，但是安卓和苹果获取到的字段是不一样的。所以得区分</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//安卓：en_US   zh_TW   zh_CN</span></span><br><span class="line">     <span class="comment">//ios：en-CN  zh-Hans-CN  zh-Hant-CN   zh-Hant-HK  zh-Hant-TW  zh-Hant-MO</span></span><br><span class="line">     <span class="keyword">var</span> systemLang = plus.os.language;</span><br><span class="line">     <span class="keyword">var</span> lang;</span><br><span class="line">     <span class="keyword">if</span>(systemLang.indexOf(<span class="string">'en'</span>) &gt; <span class="number">-1</span>)&#123;</span><br><span class="line">         lang = <span class="string">'en_us'</span>;</span><br><span class="line">     &#125;<span class="keyword">else</span> <span class="keyword">if</span>(systemLang.indexOf(<span class="string">'zh-Hans-CN'</span>) &gt; <span class="number">-1</span> || systemLang.indexOf(<span class="string">'zh_CN'</span>) &gt; <span class="number">-1</span>)&#123;</span><br><span class="line">         lang = <span class="string">'zh_cn'</span>;</span><br><span class="line">     &#125;<span class="keyword">else</span> <span class="keyword">if</span>(systemLang.indexOf(<span class="string">'zh-Hant'</span>) &gt; <span class="number">-1</span> || systemLang.indexOf(<span class="string">'zh_TW'</span>) &gt; <span class="number">-1</span>)&#123;</span><br><span class="line">         lang = <span class="string">'zh_tw'</span>;</span><br><span class="line">     &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">         lang = <span class="string">'other'</span>;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">if</span>(!localStorage.getItem(<span class="string">'lang'</span>))&#123;</span><br><span class="line">         <span class="keyword">if</span>(lang != <span class="string">'other'</span>)&#123;</span><br><span class="line">             i18n.locale = lang;</span><br><span class="line">             store.commit(<span class="string">"setLang"</span>,lang);</span><br><span class="line">             localStorage.setItem(<span class="string">'lang'</span>,lang);</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure><h4 id="第七个问题"><a href="#第七个问题" class="headerlink" title="第七个问题"></a>第七个问题</h4><p>监听网络状态</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> GL_HAVE_NET = navigator.onLine;   <span class="comment">//设置是否有网络</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//全局获取网络状态方法</span></span><br><span class="line">Vue.prototype.getNet = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> GL_HAVE_NET;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//网络变化时调用的方法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onNetChange</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">var</span> nt = plus.networkinfo.getCurrentType();</span><br><span class="line"><span class="keyword">switch</span> (nt)&#123;</span><br><span class="line"><span class="keyword">case</span> plus.networkinfo.CONNECTION_ETHERNET:</span><br><span class="line"><span class="keyword">case</span> plus.networkinfo.CONNECTION_WIFI:</span><br><span class="line">        GL_HAVE_NET = <span class="literal">true</span>;</span><br><span class="line"><span class="comment">// _this.GL_ALERT("当前为wifi网络"); </span></span><br><span class="line"><span class="keyword">break</span>; </span><br><span class="line"><span class="keyword">case</span> plus.networkinfo.CONNECTION_CELL2G:</span><br><span class="line"><span class="keyword">case</span> plus.networkinfo.CONNECTION_CELL3G:</span><br><span class="line"><span class="keyword">case</span> plus.networkinfo.CONNECTION_CELL4G:</span><br><span class="line">        GL_HAVE_NET = <span class="literal">true</span>;</span><br><span class="line"><span class="comment">// _this.GL_ALERT("当前为移动数据网络");</span></span><br><span class="line"><span class="keyword">break</span>; </span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">        GL_HAVE_NET = <span class="literal">false</span>;</span><br><span class="line">        <span class="comment">// _this.GL_ALERT("当前没有网络");</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!GL_HAVE_NET)&#123;</span><br><span class="line">        <span class="comment">//如果有网路变到没有网路提示网路异常</span></span><br><span class="line">        weui.toast(<span class="string">"网络异常"</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">         <span class="comment">//如果没有网路变到有网路页面刷新</span></span><br><span class="line">        <span class="built_in">window</span>.location.reload();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//H5+plus的监听网络变化，并调用onNetChange方法</span></span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"netchange"</span>, onNetChange, <span class="literal">false</span>); </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//下面为h5的监听网络变化的方法</span></span><br><span class="line"><span class="comment">//部分手机不兼容（安卓低端机有些不行）</span></span><br><span class="line"><span class="comment">// var el = document.body;  </span></span><br><span class="line"><span class="comment">// if (el.addEventListener) &#123;  </span></span><br><span class="line"><span class="comment">//    window.addEventListener("online", function () &#123;  </span></span><br><span class="line"><span class="comment">//      GL_HAVE_NET = true;</span></span><br><span class="line"><span class="comment">//     //  alert(GL_HAVE_NET);</span></span><br><span class="line"><span class="comment">//     &#125;, true);  </span></span><br><span class="line"><span class="comment">//    window.addEventListener("offline", function () &#123;  </span></span><br><span class="line"><span class="comment">//      GL_HAVE_NET = false;</span></span><br><span class="line"><span class="comment">//     //  alert(GL_HAVE_NET);</span></span><br><span class="line"><span class="comment">//     &#125;, true);  </span></span><br><span class="line"><span class="comment">// &#125;  else if (el.attachEvent) &#123;  </span></span><br><span class="line"><span class="comment">//    window.attachEvent("ononline", function () &#123;  </span></span><br><span class="line"><span class="comment">//         GL_HAVE_NET = true;</span></span><br><span class="line"><span class="comment">//         // alert(GL_HAVE_NET);</span></span><br><span class="line"><span class="comment">//     &#125;);  </span></span><br><span class="line"><span class="comment">//    window.attachEvent("onoffline", function () &#123;  </span></span><br><span class="line"><span class="comment">//         GL_HAVE_NET = false;</span></span><br><span class="line"><span class="comment">//         // alert(GL_HAVE_NET);</span></span><br><span class="line"><span class="comment">//     &#125;);  </span></span><br><span class="line"><span class="comment">// &#125;  else &#123;  </span></span><br><span class="line"><span class="comment">//    window.ononline = function () &#123;  </span></span><br><span class="line"><span class="comment">//         GL_HAVE_NET = true;</span></span><br><span class="line"><span class="comment">//         // alert(GL_HAVE_NET);</span></span><br><span class="line"><span class="comment">//     &#125;;  </span></span><br><span class="line"><span class="comment">//    window.onoffline = function () &#123;  </span></span><br><span class="line"><span class="comment">//         GL_HAVE_NET = false;</span></span><br><span class="line"><span class="comment">//         // alert(GL_HAVE_NET);</span></span><br><span class="line"><span class="comment">//     &#125;;  </span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;h5-开发汇总&quot;&gt;&lt;a href=&quot;#h5-开发汇总&quot; class=&quot;headerlink&quot; title=&quot;h5+开发汇总&quot;&gt;&lt;/a&gt;h5+开发汇总&lt;/h3&gt;&lt;h4 id=&quot;基于h5-api的使用&quot;&gt;&lt;a href=&quot;#基于h5-api的使用&quot; class=&quot;he
      
    
    </summary>
    
    
      <category term="app" scheme="https://shenxiaobu.github.io/tags/app/"/>
    
  </entry>
  
  <entry>
    <title>h5+开发汇总</title>
    <link href="https://shenxiaobu.github.io/2019/12/15/h5+app%E5%BC%80%E5%8F%91%E6%B1%87%E6%80%BB/"/>
    <id>https://shenxiaobu.github.io/2019/12/15/h5+app开发汇总/</id>
    <published>2019-12-15T08:10:08.000Z</published>
    <updated>2020-03-22T13:49:33.053Z</updated>
    
    <content type="html"><![CDATA[<h3 id="h5-开发汇总"><a href="#h5-开发汇总" class="headerlink" title="h5+开发汇总"></a>h5+开发汇总</h3><h4 id="基于h5-api的使用"><a href="#基于h5-api的使用" class="headerlink" title="基于h5+ api的使用"></a>基于h5+ api的使用</h4><p><a href="http://www.html5plus.org/doc/zh_cn/accelerometer.html" target="_blank" rel="noopener">h5+API文档</a></p><p>打包后遇到的第一个问题</p><p>步骤</p><p>打开app，点击页面跳转正常，但是使用物理按键返回时，直接就退出app</p><p>期望</p><p>使用物理按键返回时，正常的返回，无法返回时提示 再返回一次退出app</p><p>解决</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> time = [<span class="literal">null</span>, <span class="literal">null</span>];    <span class="comment">//记录返回的两次间隔时间</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.plus) &#123;</span><br><span class="line">    plusReady();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">document</span>.addEventListener(<span class="string">'plusready'</span>, plusReady, <span class="literal">false</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">plusReady</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> webview = plus.webview.currentWebview();</span><br><span class="line">    plus.key.addEventListener(<span class="string">'backbutton'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        webview.canBack(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (e.canBack) &#123;</span><br><span class="line">               time = [<span class="literal">null</span>,<span class="literal">null</span>];   <span class="comment">//路由变化重置 time。</span></span><br><span class="line">               router.go(<span class="number">-1</span>); <span class="comment">//返回上一级</span></span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                time.shift();</span><br><span class="line">                time.push(<span class="keyword">new</span> <span class="built_in">Date</span>().getTime());</span><br><span class="line">                <span class="keyword">if</span> (time[<span class="number">1</span>] - time[<span class="number">0</span>] &gt; <span class="number">2000</span>) &#123;  <span class="comment">//事件间隔大于 2s 当作第一次 点击返回，做出提示</span></span><br><span class="line">           <span class="comment">//plus.nativeUI.toast  h5+API的提示窗口详细使用请看api，默认前面有应用名称：tips</span></span><br><span class="line">                    plus.nativeUI.toast(<span class="string">"再按一次返回退出应用！"</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    plus.runtime.quit();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>第二个问题</p><p>对于类似txt。word等文档文件，使用 h5+pai的 下载并展示下载进度，下载完成后自动使用手机的第三方工具查看</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">Vue.prototype.downloadFile = <span class="function"><span class="keyword">function</span>(<span class="params">url, orgName</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!url) &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">''</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> saveName = url.substring(url.lastIndexOf(<span class="string">'/'</span>) + <span class="number">1</span>, url.length);</span><br><span class="line">    <span class="keyword">if</span>(!orgName)&#123;</span><br><span class="line">        orgName = saveName;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> fileType = util.getFileType(url);  <span class="comment">//获取文件类型，该项目下的自定义获取文件类型方法</span></span><br><span class="line">    <span class="keyword">if</span> (<span class="string">'pic'</span> == fileType || <span class="string">'video'</span> == fileType || <span class="string">'audio'</span> == fileType || <span class="string">'link'</span> == fileType) &#123;</span><br><span class="line">        <span class="keyword">return</span> url;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> file = &#123;</span><br><span class="line">        orgName: <span class="string">"_downloads/"</span> + orgName,</span><br><span class="line">        fileName: <span class="string">"_downloads/"</span> + saveName</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">window</span>.plus)&#123;</span><br><span class="line">        plus.runtime.openFile(file.orgName,&#123;&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">var</span> dtask = plus.downloader.createDownload(url,&#123;<span class="attr">filename</span>: file.orgName&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">item, status</span>)</span>&#123;</span><br><span class="line">                <span class="keyword">if</span>(item.state &amp;&amp; status == <span class="number">200</span>)&#123;</span><br><span class="line">                    plus.runtime.openFile(item.getFileName());</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    $(<span class="string">'#dl_progress'</span>).hide();</span><br><span class="line">                    _this.GL_ALERT(<span class="string">"文件下载失败"</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;);</span><br><span class="line">            dtask.addEventListener(<span class="string">"statechanged"</span>, dlProgress, <span class="literal">false</span>);</span><br><span class="line">            dtask.start();</span><br><span class="line">            $(<span class="string">'#dl_progress'</span>).show();</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> dlProgress = <span class="function"><span class="keyword">function</span>(<span class="params">download, status</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (!download) &#123;</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(status == <span class="number">404</span>)&#123;</span><br><span class="line">        $(<span class="string">'#dl_progress'</span>).hide();</span><br><span class="line">        _this.GL_ALERT(<span class="string">"资源下载失败"</span>);</span><br><span class="line">        <span class="comment">//遇到报错停止下载</span></span><br><span class="line">        download.abort();</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> rate = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">if</span>(download.downloadedSize &amp;&amp; download.totalSize)&#123;</span><br><span class="line">        rate = (download.downloadedSize * <span class="number">100</span> / download.totalSize).toFixed(<span class="number">2</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    $(<span class="string">'#dl_progress span'</span>).text(rate);</span><br><span class="line"><span class="keyword">if</span>(download.state == <span class="number">4</span> &amp;&amp; status == <span class="number">200</span>)&#123;</span><br><span class="line">        $(<span class="string">'#dl_progress'</span>).hide()</span><br><span class="line">weui.toast(<span class="string">"下载成功"</span>,<span class="number">1000</span>);</span><br><span class="line">    &#125;  </span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">//app.vue   下载进度展示</span><br><span class="line"> <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">"dl_progress"</span> <span class="attr">class</span>=<span class="string">"weui-loading_toast weui-animate-fade-in"</span>&gt;</span> </span><br><span class="line">     <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"weui-toast app"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">i</span> <span class="attr">class</span>=<span class="string">"weui-loading weui-icon_toast"</span>&gt;</span><span class="tag">&lt;/<span class="name">i</span>&gt;</span><span class="tag">&lt;<span class="name">p</span> <span class="attr">class</span>=<span class="string">"weui-toast__content"</span>&gt;</span>&#123;&#123;$t('l.main.downloadPro')&#125;&#125;<span class="tag">&lt;<span class="name">span</span>&gt;</span>0<span class="tag">&lt;/<span class="name">span</span>&gt;</span>%<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">     <span class="tag">&lt;/<span class="name">div</span>&gt;</span> </span><br><span class="line"> <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure><p>上述代码就是使用h5+API 下载文件并使用第三方工具打开的实现代码，直接从项目代码拿下来，如需使用可根据业务逻辑自行修改。有些全局代码，未展示，因此使用时需查看文档进行更改；</p><p>第三个问题，也是下载问题，此次是下载app升级包</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//也是采用了上面的进度条</span></span><br><span class="line"></span><br><span class="line">Vue.prototype.downloadWgt = <span class="function"><span class="keyword">function</span>(<span class="params">url,callback</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> dtask = plus.downloader.createDownload(url,&#123;<span class="attr">filename</span>: <span class="string">'_doc/update/'</span>&#125;,<span class="function"><span class="keyword">function</span>(<span class="params">item, status</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(status == <span class="number">200</span>)&#123;</span><br><span class="line">            <span class="comment">// plus.runtime.openFile(item.getFileName());</span></span><br><span class="line">            <span class="comment">//回调函数</span></span><br><span class="line">            callback(item.filename);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            _this.GL_ALERT(<span class="string">"升级包下载失败"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    dtask.addEventListener(<span class="string">"statechanged"</span>, dlProgress, <span class="literal">false</span>);</span><br><span class="line">    dtask.start();</span><br><span class="line">    $(<span class="string">'#dl_progress'</span>).show();</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//调用界面</span></span><br><span class="line">    download(appPackAliName)&#123;                </span><br><span class="line">        <span class="keyword">var</span> _this = <span class="keyword">this</span>;</span><br><span class="line">        <span class="keyword">if</span>(!appPackAliName)&#123;</span><br><span class="line">            <span class="keyword">return</span> _this.GL_ALERT(<span class="string">'请检查是否已上传升级包？'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">this</span>.isClick)&#123;</span><br><span class="line">            <span class="keyword">return</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">window</span>.plus)&#123;</span><br><span class="line">            _this.isClick = <span class="literal">true</span>;  </span><br><span class="line">            <span class="comment">//调用全局 下载文件方法，并使用回调函数 安装文件</span></span><br><span class="line">            _this.downloadWgt(appPackAliName,<span class="function"><span class="keyword">function</span>(<span class="params">filename</span>)</span>&#123;</span><br><span class="line">                _this.installWgt(filename); <span class="comment">// 安装wgt包</span></span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    installWgt (path) &#123;</span><br><span class="line">        <span class="comment">// plus.nativeUI.showWaiting('安装wgt文件...');</span></span><br><span class="line">        <span class="keyword">var</span> _this = <span class="keyword">this</span>;</span><br><span class="line">        _this.loading = weui.loading(_this.$t(<span class="string">'l.c.installing'</span>))</span><br><span class="line"></span><br><span class="line">        plus.runtime.install(path, &#123;&#125;, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="comment">// plus.nativeUI.closeWaiting();</span></span><br><span class="line">            _this.loading.hide();</span><br><span class="line">            weui.toast(<span class="string">"安装成功"</span>,<span class="number">1000</span>);</span><br><span class="line">            plus.runtime.restart();</span><br><span class="line">            <span class="comment">// plus.nativeUI.alert('应用资源更新完成！', function () &#123;</span></span><br><span class="line">            <span class="comment">//     plus.runtime.restart();</span></span><br><span class="line">            <span class="comment">// &#125;);</span></span><br><span class="line">        &#125;, <span class="function"><span class="keyword">function</span> (<span class="params">e</span>) </span>&#123;</span><br><span class="line">            _this.loading.hide();</span><br><span class="line">            _this.GL_ALERT(<span class="string">"安装失败["</span>+e.code+<span class="string">"]："</span>+e.message);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;,</span><br></pre></td></tr></table></figure><h4 id="制作wgt升级包注意事项"><a href="#制作wgt升级包注意事项" class="headerlink" title="制作wgt升级包注意事项"></a>制作wgt升级包注意事项</h4><ol><li><p>在hbuilderX项目中右键  ——&gt; 发行 —&gt; 制作app资源升级包，</p></li><li><p>manifest.json文件里面的version字段的name和code一定要比现有的高，code且为整数</p></li><li><p>manifest.json模块配置，没有使用到的一定要去除掉，否则也会失败</p></li><li><p>代码中获取版本号信息的代码为如下代码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取当前app的版本号（资源升级后照样获取的到升级后的版本号），其他方法获取版本号经测试不可用</span></span><br><span class="line"><span class="comment">//下面方法可行</span></span><br><span class="line">plus.runtime.getProperty( plus.runtime.appid, <span class="function"><span class="keyword">function</span> (<span class="params"> wgtinfo </span>) </span>&#123;</span><br><span class="line">        store.commit(<span class="string">"setCurrentVersion"</span>, wgtinfo.version);</span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure></li><li><p>如果遇到明明升级包的版本号比当前版本号高，升级时却提示版本号错误等提示，可查看升级包的版本号是否升级成功</p><p>生成的wgt文件复制一份，并将文件后面加个.zip后缀，此时文件变成一个压缩文件，点击查看，可以查看到里面的有www的文件夹，查看manifest文件的版本号是否修改成功，如果每次制作升级包，版本号明明改了，但是制作完成后添加 .zip后缀查看版本号并没有变时 可 关掉打包软件重新打开再制作升级包。</p><p>这个是软件的bug，当你看到这篇文章时，这个bug应该已经被修复了。</p></li></ol><p>遇到的第三个问题</p><p>相机权限问题</p><p>使用二维码，或者拍照时就需要用到手机摄像头，就需要获取权限。</p><p>需求：当第一次访问时，请求相机权限，当拒绝时做出提示。</p><p>plus.navigator.checkPermission(type)   方法  可查看手机权限的状态，但是文档上有声明，android全部不支持</p><p>因此麻烦来了，安卓要如何判断是否有允许权限</p><p>解决代码如下</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//检查权限全局代码，第一个参数 相机权限还是相册权限，第二个参数 权限允许时回调函数 </span></span><br><span class="line"><span class="comment">//第三个参数 权限不允许时，点击弹框的确定回调函数</span></span><br><span class="line">Vue.prototype.checkPermission = <span class="function"><span class="keyword">function</span>(<span class="params">perType,callback,confirmCallback</span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> check = <span class="literal">false</span>;</span><br><span class="line">    <span class="comment">// var perType = 'CAMERA';</span></span><br><span class="line">    <span class="keyword">var</span> type = &#123;</span><br><span class="line">        <span class="string">'CAMERA'</span>:<span class="string">'android.permission.CAMERA'</span>,</span><br><span class="line">        <span class="string">'GALLERY'</span>: <span class="string">'android.permission.READ_EXTERNAL_STORAGE'</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!<span class="built_in">window</span>.plus)&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">checkResult</span>(<span class="params">rusult,confirmCallback</span>)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(!rusult)&#123;</span><br><span class="line">            weui.dialog(&#123;</span><br><span class="line">                title: <span class="string">"提示"</span>,</span><br><span class="line">                content: i18n.messages[i18n.locale][<span class="string">'l'</span>][<span class="string">'permission'</span>][perType],</span><br><span class="line">                className: <span class="string">'custom-classname'</span>,</span><br><span class="line">                buttons: [&#123;</span><br><span class="line">                    label: <span class="string">"确定"</span>,</span><br><span class="line">                    type: <span class="string">'primary'</span>,</span><br><span class="line">                    onClick: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; </span><br><span class="line">                        confirmCallback&amp;&amp;confirmCallback();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;]</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">const</span> ua = <span class="built_in">window</span>.navigator.userAgent.toLocaleLowerCase(); </span><br><span class="line">    <span class="keyword">var</span> isIOS = <span class="regexp">/iphone|ipad|ipod/</span>.test(ua);</span><br><span class="line">    <span class="keyword">if</span>(isIOS)&#123;</span><br><span class="line">        <span class="keyword">var</span> pp = plus.navigator.checkPermission(perType);</span><br><span class="line">        <span class="keyword">switch</span>(pp)&#123;</span><br><span class="line">          <span class="keyword">case</span> <span class="string">'authorized'</span>:</span><br><span class="line">            check = <span class="literal">true</span>;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">          <span class="keyword">case</span> <span class="string">'denied'</span>:</span><br><span class="line">            check = <span class="literal">false</span>;             </span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">          <span class="keyword">case</span> <span class="string">'undetermined'</span>:</span><br><span class="line">            check = <span class="literal">true</span>;             </span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">          <span class="keyword">case</span> <span class="string">'notdeny'</span>:</span><br><span class="line">              check = <span class="literal">true</span>;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">          <span class="keyword">case</span> <span class="string">'unknown'</span>:</span><br><span class="line">            check = <span class="literal">false</span>;             </span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">          <span class="keyword">default</span>:</span><br><span class="line">            check = <span class="literal">false</span>;             </span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//上述代码可缩减，这里懒得缩减了，详细查看api</span></span><br><span class="line">        checkResult(check,confirmCallback);</span><br><span class="line">        callback &amp;&amp; callback(check);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;  <span class="comment">//安卓的查看权限</span></span><br><span class="line">        <span class="comment">// 调试</span></span><br><span class="line">        <span class="comment">// check = true;</span></span><br><span class="line">        <span class="comment">// checkResult(check);</span></span><br><span class="line">        <span class="comment">// callback &amp;&amp; callback(check);</span></span><br><span class="line"></span><br><span class="line">        plus.android.requestPermissions([type[perType]], <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(e.deniedAlways.length&gt;<span class="number">0</span>)&#123;<span class="comment">//权限被永久拒绝</span></span><br><span class="line">                <span class="comment">// 弹出提示框解释为何需要??权限，引导用户打开设置页面开启</span></span><br><span class="line">                check = <span class="literal">false</span>;     </span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(e.deniedPresent.length&gt;<span class="number">0</span>)&#123;<span class="comment">//权限被临时拒绝</span></span><br><span class="line">                <span class="comment">// 弹出提示框解释为何需要??权限，可再次调用plus.android.requestPermissions申请权限</span></span><br><span class="line">                check = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(e.granted.length&gt;<span class="number">0</span>)&#123;<span class="comment">//权限被允许</span></span><br><span class="line">                <span class="comment">//调用依赖获取??权限的代码</span></span><br><span class="line">                check = <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            checkResult(check,confirmCallback);</span><br><span class="line">            callback &amp;&amp; callback(check);</span><br><span class="line">        &#125;, <span class="function"><span class="keyword">function</span>(<span class="params">e</span>)</span>&#123;</span><br><span class="line">            check = <span class="literal">false</span>;</span><br><span class="line">            checkResult(check,confirmCallback);</span><br><span class="line">            callback &amp;&amp; callback(check);</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>二维码界面代码</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=<span class="string">"sacn-box"</span> :<span class="class"><span class="keyword">class</span></span>=<span class="string">"[!check?'error-box':'']"</span>&gt;</span><br><span class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"scan"</span> v-show=<span class="string">"isScan"</span>&gt;</span><br><span class="line">        &lt;div id=<span class="string">"bcid"</span>&gt;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">      &lt;/</span>div&gt;</span><br><span class="line">      &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">"error-msg"</span> v-show=<span class="string">"!check"</span>&gt;&#123;&#123;$t(<span class="string">'l.s.scan.openCamera'</span>)&#125;&#125;&lt;<span class="regexp">/div&gt;</span></span><br><span class="line"><span class="regexp">  &lt;/</span>div&gt;</span><br><span class="line">&lt;<span class="regexp">/template&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;script&gt;</span></span><br><span class="line"><span class="regexp">let scan = null;</span></span><br><span class="line"><span class="regexp">export default &#123;</span></span><br><span class="line"><span class="regexp">  name: 'scan',</span></span><br><span class="line"><span class="regexp">  data()&#123;</span></span><br><span class="line"><span class="regexp">    return &#123;</span></span><br><span class="line"><span class="regexp">      loading : null,</span></span><br><span class="line"><span class="regexp">      view : null,</span></span><br><span class="line"><span class="regexp">      Bartab : null,</span></span><br><span class="line"><span class="regexp">      timeout : null,</span></span><br><span class="line"><span class="regexp">      timeout2 : null,</span></span><br><span class="line"><span class="regexp">      check : true,</span></span><br><span class="line"><span class="regexp">      rem12 : '12px',</span></span><br><span class="line"><span class="regexp">      rem14 : '14px',</span></span><br><span class="line"><span class="regexp">      size: 16,   /</span><span class="regexp">/顶部标题 字体大小  “二维码”</span></span><br><span class="line"><span class="regexp">    &#125;</span></span><br><span class="line"><span class="regexp">  &#125;,</span></span><br><span class="line"><span class="regexp">  methods:&#123;</span></span><br><span class="line"><span class="regexp">    scanCard() &#123;</span></span><br><span class="line"><span class="regexp">        let _this = this;</span></span><br><span class="line"><span class="regexp">        let barcodeStyle = &#123;</span></span><br><span class="line"><span class="regexp">            frameColor : '#000000',</span></span><br><span class="line"><span class="regexp">            scanbarColor : '#000000',</span></span><br><span class="line"><span class="regexp">            background : 'rgba(255,255,255,0)',</span></span><br><span class="line"><span class="regexp">            position :'static'</span></span><br><span class="line"><span class="regexp">        &#125;               </span></span><br><span class="line"><span class="regexp">        if(_this.isScan)&#123;</span></span><br><span class="line"><span class="regexp">            return _this.closeScan();</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">        _this.isScan = true; </span></span><br><span class="line"><span class="regexp">        /</span><span class="regexp">/创建扫码</span></span><br><span class="line"><span class="regexp">        scan = plus.barcode.create('bcid',[plus.barcode.QR],barcodeStyle);     </span></span><br><span class="line"><span class="regexp">        plus.webview.currentWebview().append(scan);</span></span><br><span class="line"><span class="regexp">        </span></span><br><span class="line"><span class="regexp">        /</span><span class="regexp">/ 打开扫码</span></span><br><span class="line"><span class="regexp">        _this.startScan();</span></span><br><span class="line"><span class="regexp">        scan.onmarked = _this.onmarked;</span></span><br><span class="line"><span class="regexp">        scan.onerror  = _this.onerror;</span></span><br><span class="line"><span class="regexp">    &#125;,</span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/开始扫描</span></span><br><span class="line"><span class="regexp">    startScan() &#123;</span></span><br><span class="line"><span class="regexp">      var _this = this;</span></span><br><span class="line"><span class="regexp">        if (!window.plus) return;</span></span><br><span class="line"><span class="regexp">        scan.start();</span></span><br><span class="line"><span class="regexp">    &#125;,</span></span><br><span class="line"><span class="regexp">    /</span><span class="regexp">/关闭条码识别控件</span></span><br><span class="line"><span class="regexp">    closeScan() &#123;</span></span><br><span class="line"><span class="regexp">        if (!window.plus) return;</span></span><br><span class="line"><span class="regexp">        scan.close();</span></span><br><span class="line"><span class="regexp">    &#125;,</span></span><br><span class="line"><span class="regexp">    goBack()&#123;</span></span><br><span class="line"><span class="regexp">      this.$router.go(-1);</span></span><br><span class="line"><span class="regexp">    &#125;,</span></span><br><span class="line"><span class="regexp">    onmarked(type, result, file) &#123;</span></span><br><span class="line"><span class="regexp">        var _this = this;</span></span><br><span class="line"><span class="regexp">        var scanType = false;</span></span><br><span class="line"><span class="regexp">        _this.loading = weui.loading(_this.$t('l.c.handling'));</span></span><br><span class="line"><span class="regexp">        switch (type) &#123;</span></span><br><span class="line"><span class="regexp">            case plus.barcode.QR:</span></span><br><span class="line"><span class="regexp">            type = 'QR';</span></span><br><span class="line"><span class="regexp">            break;</span></span><br><span class="line"><span class="regexp">            case plus.barcode.EAN13:</span></span><br><span class="line"><span class="regexp">            type = 'EAN13';</span></span><br><span class="line"><span class="regexp">            break;</span></span><br><span class="line"><span class="regexp">            case plus.barcode.EAN8:</span></span><br><span class="line"><span class="regexp">            type = 'EAN8';</span></span><br><span class="line"><span class="regexp">            break;</span></span><br><span class="line"><span class="regexp">            default:</span></span><br><span class="line"><span class="regexp">            type = '其它' + type;</span></span><br><span class="line"><span class="regexp">            break;</span></span><br><span class="line"><span class="regexp">        &#125;</span></span><br><span class="line"><span class="regexp">        result = result.replace(/</span>\n/g, <span class="string">''</span>);</span><br><span class="line">        <span class="keyword">if</span>(result.indexOf(<span class="string">"#"</span>)&gt;<span class="number">-1</span>)&#123;     <span class="comment">//解决当 链接不带  #  时， result.split("#")[1]  不存在而报错  导致 扫码功能异常的问题。</span></span><br><span class="line">          result = result.split(<span class="string">"#"</span>)[<span class="number">1</span>];</span><br><span class="line">          <span class="comment">//允许扫码的路径</span></span><br><span class="line">          <span class="keyword">var</span>  paths = [<span class="string">'/app/scan/'</span>,<span class="string">'/app/scan/login'</span>,<span class="string">'/teacher/user/scan/login/'</span>,<span class="string">'/join/group/'</span>,<span class="string">'/join/class/'</span>,<span class="string">'/student/discuss/wall/'</span>,<span class="string">'/student/discuss/free/'</span>];</span><br><span class="line">          <span class="keyword">for</span>(<span class="keyword">let</span> i = <span class="number">0</span>,len = paths.length; i&lt;len ; i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(result.indexOf(paths[i]) &gt; <span class="number">-1</span>)&#123;</span><br><span class="line">                scanType = <span class="literal">true</span>;</span><br><span class="line">                <span class="keyword">break</span> ;</span><br><span class="line">            &#125;     </span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        _this.loading.hide();</span><br><span class="line">        <span class="keyword">if</span>(scanType)&#123;</span><br><span class="line">            <span class="keyword">return</span> _this.$router.replace(result);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            _this.closeScan();</span><br><span class="line">            weui.dialog(&#123;</span><br><span class="line">                title: _this.$t(<span class="string">'l.s.scan.errTips'</span>),</span><br><span class="line">                content: _this.$t(<span class="string">'l.s.scan.cardErr'</span>),</span><br><span class="line">                className: <span class="string">'custom-classname'</span>,</span><br><span class="line">                buttons: [&#123;</span><br><span class="line">                    label: _this.$t(<span class="string">'l.s.scan.confirm'</span>),</span><br><span class="line">                    type: <span class="string">'primary'</span>,</span><br><span class="line">                    onClick: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                        _this.$router.go(<span class="number">-1</span>);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;]</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;      </span><br><span class="line">        <span class="keyword">return</span> _this.$router.replace(result);</span><br><span class="line">    &#125;,  </span><br><span class="line">    onerror(error)&#123;</span><br><span class="line">      _this.GL_ALERT(error);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  created()&#123;</span><br><span class="line">      <span class="keyword">var</span> size = $(<span class="string">'html'</span>)[<span class="number">0</span>].style.fontSize.replace(<span class="string">'px'</span>,<span class="string">''</span>);</span><br><span class="line">      <span class="keyword">this</span>.size = size * <span class="number">0.32</span>;</span><br><span class="line">  &#125;,</span><br><span class="line"> </span><br><span class="line">  mounted : <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">var</span> _this = <span class="keyword">this</span>;</span><br><span class="line">    <span class="keyword">this</span>.baseSize = $(<span class="string">'html'</span>).css(<span class="string">'font-size'</span>);</span><br><span class="line">    <span class="keyword">this</span>.baseNum = <span class="keyword">this</span>.baseSize.replace(<span class="string">'px'</span>, <span class="string">''</span>);</span><br><span class="line">            </span><br><span class="line">    <span class="keyword">var</span> ua = navigator.userAgent.toLowerCase();</span><br><span class="line">    <span class="keyword">if</span>(<span class="regexp">/ipad/i</span>.test(ua))&#123;</span><br><span class="line">      <span class="keyword">this</span>.rem12 = <span class="string">'20px'</span>;</span><br><span class="line">      <span class="keyword">this</span>.rem14 = <span class="string">'24px'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(<span class="built_in">window</span>.plus)&#123;</span><br><span class="line">      _this.checkPermission(<span class="string">'CAMERA'</span>,<span class="function"><span class="keyword">function</span>(<span class="params">data</span>)</span>&#123;</span><br><span class="line">            _this.check = data;</span><br><span class="line">            <span class="keyword">if</span>(_this.check)&#123;</span><br><span class="line">                _this.scanCard();   </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">          _this.$router.go(<span class="number">-1</span>);</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">      <span class="keyword">return</span> _this.GL_ALERT(_this.$t(<span class="string">'l.s.scan.byPhone'</span>));</span><br><span class="line">    &#125;    </span><br><span class="line">  &#125;,</span><br><span class="line">  beforeDestroy()&#123;</span><br><span class="line">    <span class="keyword">this</span>.closeScan();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;<span class="regexp">/script&gt;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;style scoped&gt;</span></span><br><span class="line"><span class="regexp">#bcid &#123;</span></span><br><span class="line"><span class="regexp">      height : 100%;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">.error-box&#123;</span></span><br><span class="line"><span class="regexp">  width:100%;</span></span><br><span class="line"><span class="regexp">  height:100vh;</span></span><br><span class="line"><span class="regexp">  display:flex;</span></span><br><span class="line"><span class="regexp">  justify-content: center;</span></span><br><span class="line"><span class="regexp">  align-items: center;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp">.error-msg&#123;</span></span><br><span class="line"><span class="regexp">  font-size:.4rem;</span></span><br><span class="line"><span class="regexp">  margin:auto;</span></span><br><span class="line"><span class="regexp">&#125;</span></span><br><span class="line"><span class="regexp"></span></span><br><span class="line"><span class="regexp">&lt;/</span>style&gt;</span><br></pre></td></tr></table></figure><p>打开相机和相册界面代码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br></pre></td><td class="code"><pre><span class="line">//crop.js</span><br><span class="line">&lt;template&gt;</span><br><span class="line">    &lt;div class=&quot;crop-box&quot; v-show=&quot;isCrop&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;crop-area-bg&quot; v-show=&quot;!imgLoaded&quot; &gt;&#123;&#123;bgMsg&#125;&#125;&lt;/div&gt;</span><br><span class="line">        &lt;div :id=&quot;&apos;crop_area&apos;+btnId&quot; class=&quot;crop-area&quot; :style=&quot;&#123;opacity:opacity&#125;&quot; &gt;&lt;/div&gt;</span><br><span class="line">        &lt;span class=&quot;btn-rotate-left&quot; @click=&quot;rotateLeft&quot;&gt;&lt;/span&gt;</span><br><span class="line">        &lt;div class=&quot;btn-box&quot;&gt;</span><br><span class="line">            &lt;span class=&quot;btn-cancel&quot; @click=&quot;cancelCrop&quot;&gt;&#123;&#123;$t(&apos;l.i.crop.cancel&apos;)&#125;&#125;&lt;/span&gt;</span><br><span class="line">            &lt;span class=&quot;btn-reset&quot; @click=&quot;rotateReset&quot;&gt;&#123;&#123;$t(&apos;l.i.crop.restore&apos;)&#125;&#125;&lt;/span&gt;</span><br><span class="line">            &lt;span class=&quot;btn-commit&quot; @click=&quot;confirmCrop&quot;&gt;&#123;&#123;$t(&apos;l.i.crop.finish&apos;)&#125;&#125;&lt;/span&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    import * as util from &apos;@static/js/util.js&apos;;</span><br><span class="line">export default&#123;</span><br><span class="line">        props: [</span><br><span class="line">            &apos;btnId&apos;,</span><br><span class="line">            &apos;fileTypes&apos;</span><br><span class="line">],</span><br><span class="line">data()&#123;</span><br><span class="line">return&#123;</span><br><span class="line">                seling: false,     //判断是否在拍照或者读取相册</span><br><span class="line">                client : null,</span><br><span class="line">                region: &apos;oss-cn-shenzhen&apos;,     //根据你买的那个区的做相应的更改</span><br><span class="line">                bucket: &apos;boyintest&apos;,</span><br><span class="line">                id: &apos;uploadImage&apos;,</span><br><span class="line">                percentage: 0,</span><br><span class="line">                opacity : 0,</span><br><span class="line">                url: &apos;&apos;,</span><br><span class="line">                bgMsg : &apos;&apos;,//$t(&apos;l.i.crop.pictureProcessing&apos;)</span><br><span class="line">                uploadFilesName: &apos;&apos;,</span><br><span class="line">                uploadfile: [],</span><br><span class="line">                imgLoaded : false,</span><br><span class="line">                maxLength: 1,</span><br><span class="line">                isCrop : false,</span><br><span class="line">                rotate : 0,</span><br><span class="line">                defaultFileTypes : &apos;jpg,png,jpeg,JPG,PNG,JPEG&apos;,</span><br><span class="line">                credentials : null,</span><br><span class="line">                fileUrlPre : null,</span><br><span class="line">                uploadUrl : null</span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">methods:&#123;</span><br><span class="line">            rotateLeft : function()&#123;</span><br><span class="line">                this.crop.rotate(-90);</span><br><span class="line">            &#125;,</span><br><span class="line">            rotateRight : function()&#123;</span><br><span class="line">                this.crop.rotate(10);</span><br><span class="line">            &#125;,</span><br><span class="line">            rotateReset : function()&#123;</span><br><span class="line">                this.crop.reset();</span><br><span class="line">            &#125;,</span><br><span class="line">            getCredentials : function () &#123;</span><br><span class="line">                var _this = this;</span><br><span class="line">                _this.$axios.post(_this.apiUrl + &quot;/sts/get-credentials&quot;,_this.$qs.stringify(&#123;type : 20&#125;)).then(function (response) &#123;</span><br><span class="line">                    if (!response || !response.data.success) &#123;</span><br><span class="line">                        return _this.loading.hide();</span><br><span class="line">                    &#125;</span><br><span class="line">                    </span><br><span class="line">                    _this.credentials = &#123;</span><br><span class="line">                        bucketName : response.data.bucket,</span><br><span class="line">                        fileBucketName : response.data.filePath,</span><br><span class="line">                        credentials : JSON.stringify(response.data.sts),</span><br><span class="line">                    &#125;;</span><br><span class="line">                    _this.fileUrlPre = response.data.fileUrlPre;</span><br><span class="line">                    _this.uploadUrl = response.data.uploadUrl;</span><br><span class="line">                  </span><br><span class="line">                    // 设置参数</span><br><span class="line">                    _this.uploader.setOption(&#123;</span><br><span class="line">                        url : _this.uploadUrl,</span><br><span class="line">                        multipart_params : _this.credentials</span><br><span class="line">                    &#125;);</span><br><span class="line"></span><br><span class="line">                    _this.uploader.start();</span><br><span class="line">    &#125;).catch(function (error) &#123;</span><br><span class="line">        _this.loading.hide();</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;,</span><br><span class="line">            cancelCrop : function()&#123;</span><br><span class="line">                var _this = this;</span><br><span class="line">                _this.seling = false;</span><br><span class="line">                if(!_this.imgLoaded)&#123;</span><br><span class="line">                    return;</span><br><span class="line">                &#125;</span><br><span class="line">                _this.isCrop = false;</span><br><span class="line">                _this.crop.destroy();</span><br><span class="line">                _this.crop = null;</span><br><span class="line">                _this.uploader.disableBrowse(false);</span><br><span class="line">                _this.imgLoaded = false;</span><br><span class="line">                _this.opacity = 0;</span><br><span class="line"></span><br><span class="line">                _this.$emit(&quot;cancelCrop&quot;);</span><br><span class="line">                // _this.$bus.$emit(&apos;cropStatus&apos;, false);</span><br><span class="line">            &#125;,</span><br><span class="line">            confirmCrop : function()&#123;</span><br><span class="line">                var _this = this;</span><br><span class="line">                _this.seling = false;</span><br><span class="line">                if(!_this.imgLoaded)&#123;</span><br><span class="line">                    return;</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                if(_this.croping)&#123;</span><br><span class="line">                    return weui.toast(_this.$t(&apos;l.i.crop.uploading&apos;),1000);</span><br><span class="line">                &#125;</span><br><span class="line">                _this.croping = true;</span><br><span class="line">                _this.loading = weui.loading(_this.$t(&apos;l.i.crop.uploading&apos;), &#123;className: &apos;moka-loading&apos;&#125;);</span><br><span class="line">                try &#123;</span><br><span class="line">                    var data = _this.crop.getCanvasData();</span><br><span class="line">                    var width,height;</span><br><span class="line">                    if(data.naturalWidth &gt; 1000)&#123;</span><br><span class="line">                        width = 1000;</span><br><span class="line">                        height = data.naturalHeight * 1000 / data.naturalWidth;</span><br><span class="line">                    &#125;</span><br><span class="line">                    var cas = _this.crop.getCroppedCanvas(&#123;</span><br><span class="line">                        width : width,</span><br><span class="line">                        height : height,</span><br><span class="line">                        // Limit max sizes</span><br><span class="line">                        maxWidth: 4096,</span><br><span class="line">                        maxHeight: 4096,</span><br><span class="line">                    &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                    var fileName = _this.file.name;</span><br><span class="line">                    var saveName = new Date().getTime() + &apos;.&apos; + util.getSuffix(fileName);</span><br><span class="line"></span><br><span class="line">                    for(var index in _this.files)&#123;//清除所有文件</span><br><span class="line">                        var upFile = _this.files[index];</span><br><span class="line">                        _this.uploader.removeFile(upFile);</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                  </span><br><span class="line">                    cas.toBlob(function (bolb) &#123;</span><br><span class="line">                        var file = new File([bolb], saveName, &#123;type: &apos;image/jpeg&apos;&#125;);</span><br><span class="line">                        _this.croping = false;</span><br><span class="line">                        _this.currFile = file;</span><br><span class="line">                        _this.uploader.addFile(file);</span><br><span class="line">                        _this.loading.hide();</span><br><span class="line">                    &#125;, &quot;image/jpeg&quot;, 0.95)</span><br><span class="line">                &#125; catch (error) &#123;</span><br><span class="line">                    _this.loading.hide();</span><br><span class="line">                    weui.toast(&apos;error&apos;);</span><br><span class="line">                    _this.cancelCrop();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            uploaded : function(fileName, src)&#123;</span><br><span class="line">                var _this = this;</span><br><span class="line">                weui.toast(_this.$t(&apos;l.i.crop.uploadSuccess&apos;),1000);</span><br><span class="line">                _this.$emit(&quot;fileUploadCallback&quot;, fileName, src);</span><br><span class="line">            &#125;,</span><br><span class="line">            initCrop : function(file)&#123;</span><br><span class="line">                var _this = this;</span><br><span class="line">                // console.log(_this.isCrop);</span><br><span class="line">                if(_this.isCrop)&#123;//正在剪裁</span><br><span class="line">                    _this.isCrop = false;</span><br><span class="line">                    return _this.getCredentials();</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                _this.file = file;</span><br><span class="line">                var fileName = _this.file.name;</span><br><span class="line">                </span><br><span class="line">                var fileTypes = _this.defaultFileTypes;</span><br><span class="line">                if(_this.fileTypes &amp;&amp; _this.fileTypes.length &gt; 0)&#123;</span><br><span class="line">                    fileTypes = _this.fileTypes;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                var typeTpl = &apos;,&apos; + fileTypes.toLocaleLowerCase()  + &apos;,&apos;;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                var suffix = util.getSuffix(fileName).toLocaleLowerCase();</span><br><span class="line">                if(typeTpl.indexOf(suffix) &lt; 0)&#123;</span><br><span class="line">                    _this.uploader.removeFile(file);</span><br><span class="line">                    return _this.GL_ALERT(_this.$t(&apos;l.i.crop.notSupported&apos;));</span><br><span class="line">                &#125;</span><br><span class="line">                </span><br><span class="line">                if(suffix != &apos;jpg&apos; &amp;&amp; suffix != &apos;png&apos; &amp;&amp; suffix != &apos;jpeg&apos;)&#123;</span><br><span class="line">                    _this.loading = weui.loading(_this.$t(&apos;l.i.crop.uploading&apos;), &#123;className: &apos;moka-loading&apos;&#125;);</span><br><span class="line">                    _this.currFile = file;</span><br><span class="line">                    return _this.getCredentials();//_this.uploadFile(_this.file);</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                _this.$emit(&quot;onCrop&quot;);</span><br><span class="line">                // _this.$bus.$emit(&apos;cropStatus&apos;, true);</span><br><span class="line">                </span><br><span class="line">                _this.isCrop = true;</span><br><span class="line">                _this.loading = weui.loading(_this.$t(&apos;l.i.crop.pictureProcessing&apos;));</span><br><span class="line">                var preloader = new moxie.image.Image();</span><br><span class="line">                preloader.onload = function () &#123;</span><br><span class="line">                    var imgsrc = preloader.type == &apos;image/jpeg&apos; ? preloader.getAsDataURL(&apos;image/jpeg&apos;, 80) : preloader.getAsDataURL(); //得到图片src,实质为一个base64编码的数据</span><br><span class="line">                    _this.file.imgsrc = imgsrc;</span><br><span class="line">                    preloader.destroy();</span><br><span class="line">                    preloader = null;</span><br><span class="line">                    $(&apos;#crop_area&apos;+_this.btnId).html(&apos;&lt;img src=&quot;&apos; + imgsrc + &apos;&quot;&gt;&apos;);</span><br><span class="line">                    if(!_this.crop)&#123;</span><br><span class="line">                        _this.crop  = new Cropper($(&apos;#crop_area&apos;+_this.btnId+&apos; &gt; img&apos;)[0], &#123;</span><br><span class="line">                            dragMode : &apos;move&apos;,</span><br><span class="line">                            background : false,</span><br><span class="line">                            autoCropArea : 1,</span><br><span class="line">                            crop(event) &#123;</span><br><span class="line">                            &#125;,</span><br><span class="line">                            ready()&#123;</span><br><span class="line">                                _this.imgLoaded = true;</span><br><span class="line">                                _this.opacity = 1;</span><br><span class="line">                                _this.loading.hide();</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;);</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;;</span><br><span class="line">                preloader.load(_this.file.getSource());</span><br><span class="line">                _this.$emit(&quot;finish&quot;);</span><br><span class="line">            &#125;,</span><br><span class="line">            initUploader : function(options)&#123;</span><br><span class="line">                var _this = this;</span><br><span class="line"></span><br><span class="line">                var fileTypes = _this.defaultFileTypes;</span><br><span class="line">                if(_this.fileTypes &amp;&amp; _this.fileTypes.length &gt; 0)&#123;</span><br><span class="line">                    fileTypes = _this.fileTypes;</span><br><span class="line">                &#125;</span><br><span class="line">                var filters = [];</span><br><span class="line">                if(!$(&apos;#app&apos;).hasClass(&apos;pc&apos;))&#123;</span><br><span class="line">                    filters = [];</span><br><span class="line">                &#125;else&#123;</span><br><span class="line">                    filters =  [</span><br><span class="line">                        &#123;title: &quot;document&quot;, extensions: fileTypes&#125;//&quot;jpg,png,jpeg,JPG,PNG,JPEG&quot;</span><br><span class="line">                    ];</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                var typeTpl = &apos;,&apos; + fileTypes.toLocaleLowerCase()  + &apos;,&apos;;</span><br><span class="line"></span><br><span class="line">                var btnId = _this.btnId;</span><br><span class="line">                if(options &amp;&amp; options.btnId)&#123;</span><br><span class="line">                    btnId = options.btnId</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                if (window.plus) &#123;</span><br><span class="line">                    btnId = _this.btnId + &apos;_hide&apos;;</span><br><span class="line">                    $(&apos;body&apos;).append(&apos;&lt;span id=&quot;&apos; + btnId + &apos;&quot; style=&quot;position:absolute;z-index=-9;&quot;&gt;&lt;/span&gt;&apos;)</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                var uploader = new plupload.Uploader(&#123;</span><br><span class="line">                    runtimes : &apos;html5,flash&apos;,</span><br><span class="line">                    browse_button : btnId, //选择文件按钮ID </span><br><span class="line">                    max_file_size : &apos;100mb&apos;,  //文件上传最大值</span><br><span class="line">                    multipart : true,</span><br><span class="line">                    chunks : true,//不分块上传</span><br><span class="line">                    chunk_size : &apos;10mb&apos;,//分块大小，小于这个大小的不分块</span><br><span class="line">                    unique_names : true,  // 上传的文件名是否唯一,只有在未进行分块上传时文件名唯一才有效</span><br><span class="line">                    url: _this.uploadUrl, //提交到后台的url地址</span><br><span class="line">                    flash_swf_url: &apos;/js/lib/plupload/plupload.flash.swf&apos;,//plupload.flash.swf文件所在路径</span><br><span class="line">                    multi_selection : false,</span><br><span class="line">                    filters: filters,</span><br><span class="line">                    init : &#123;</span><br><span class="line">                        FileUploaded : function(up, file, info) &#123;//上传服务器方法，暂时未用到</span><br><span class="line">                            up.disableBrowse(false);</span><br><span class="line">                            var result = JSON.parse(info.response);</span><br><span class="line">                            _this.loading.hide();</span><br><span class="line">                            if(!result.success)&#123;</span><br><span class="line">                                return _this.GL_ALERT(_this.$t(&apos;l.i.crop.uploadFailure&apos;));</span><br><span class="line">                            &#125;</span><br><span class="line">                            if(!result || !result.saveName)&#123;</span><br><span class="line">                                return _this.GL_ALERT(_this.$t(&apos;l.i.crop.uploadFailure&apos;));</span><br><span class="line">                            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">                            weui.toast(_this.$t(&apos;l.i.crop.uploadSuccess&apos;), 1000);</span><br><span class="line">                            var attachFileName = _this.currFile.name;    //源文件的名字</span><br><span class="line">                            var saveName = _this.fileUrlPre.concat(&quot;/&quot;, result.saveName);</span><br><span class="line">                            var fileSize = _this.currFile.size;</span><br><span class="line">                            _this.$emit(&quot;imgUploadCallback&quot;, attachFileName, saveName, fileSize);</span><br><span class="line">                        &#125;,</span><br><span class="line">                        FilesAdded : function(up, files)&#123;</span><br><span class="line">                            _this.files = files;</span><br><span class="line">                            _this.file = files[0];</span><br><span class="line">                            _this.initCrop(_this.file);</span><br><span class="line">                        &#125;,</span><br><span class="line">                        BeforeUpload : function(up, file)&#123;</span><br><span class="line">                            _this.cancelCrop();//上传之前 销毁剪裁框</span><br><span class="line">                            up.disableBrowse(true);</span><br><span class="line">                        &#125;,</span><br><span class="line">                        UploadProgress : function(up, file) &#123; </span><br><span class="line">                        // console.log(&quot;eeeeeeeeeeeee&quot;);</span><br><span class="line">                        &#125;,</span><br><span class="line">                        Error : function(up, err) &#123;</span><br><span class="line">                            // _this.loading.hide();</span><br><span class="line">                            up.disableBrowse(false);</span><br><span class="line">                            up.refresh(); // Reposition Flash/Silverlight</span><br><span class="line">                            _this.GL_ALERT(err.message);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">                console.log(&apos;init&apos;);</span><br><span class="line">                uploader.init();</span><br><span class="line">                _this.uploader = uploader;</span><br><span class="line">            &#125;,</span><br><span class="line">            reset : function(btnId)&#123;</span><br><span class="line">                var _this = this;</span><br><span class="line">                var uploader = _this.uploader;</span><br><span class="line">                uploader.destroy();</span><br><span class="line">                // _this.uploader = null;</span><br><span class="line">                setTimeout(function()&#123;</span><br><span class="line">                    _this.initUploader(&#123;btnId:btnId&#125;);</span><br><span class="line">                &#125;, 500);</span><br><span class="line"></span><br><span class="line">                if (window.plus) &#123;</span><br><span class="line">                    $(&apos;#&apos; + this.btnId).off(&apos;click&apos;);</span><br><span class="line">                    $(&apos;#&apos; + btnId).on(&apos;click&apos;, this.onSel)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            initAppCrop : function(file)&#123;</span><br><span class="line">                var _this = this;</span><br><span class="line">                if(_this.isCrop)&#123;//正在剪裁</span><br><span class="line">                    _this.isCrop = false;</span><br><span class="line">                    return _this.getCredentials();</span><br><span class="line">                &#125;</span><br><span class="line">                _this.file = file;</span><br><span class="line">                _this.$emit(&quot;onCrop&quot;);</span><br><span class="line">                // _this.$bus.$emit(&apos;cropStatus&apos;, true);</span><br><span class="line">                </span><br><span class="line">                _this.isCrop = true;</span><br><span class="line">                $(&apos;#crop_area&apos;+_this.btnId).html(&apos;&lt;img src=&quot;&apos; + file.src + &apos;&quot;&gt;&apos;);</span><br><span class="line">                if(!_this.crop)&#123;</span><br><span class="line">                    // _this.loading = weui.loading(_this.$t(&apos;l.i.crop.pictureProcessing&apos;));</span><br><span class="line">                    _this.crop  = new Cropper($(&apos;#crop_area&apos;+_this.btnId+&apos; &gt; img&apos;)[0], &#123;</span><br><span class="line">                        dragMode : &apos;move&apos;,</span><br><span class="line">                        background : false,</span><br><span class="line">                        autoCropArea : 1,</span><br><span class="line">                        crop(event) &#123;</span><br><span class="line">                        &#125;,</span><br><span class="line">                        ready()&#123;</span><br><span class="line">                            _this.imgLoaded = true;</span><br><span class="line">                            _this.opacity = 1;</span><br><span class="line">                            _this.loading.hide();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;);</span><br><span class="line">                &#125;</span><br><span class="line">                _this.$emit(&quot;finish&quot;);</span><br><span class="line">            &#125;,</span><br><span class="line">            getImage : function () &#123;</span><br><span class="line">                const ua = window.navigator.userAgent.toLocaleLowerCase();</span><br><span class="line">                var isIOS = /iphone|ipad|ipod/.test(ua);</span><br><span class="line">                var _this = this;</span><br><span class="line">                _this.checkPermission(&apos;CAMERA&apos;,function(data)&#123;</span><br><span class="line">                   if(data)&#123;</span><br><span class="line">                        var c = plus.camera.getCamera();   </span><br><span class="line">                        var area = 0;  //记录最大像素  </span><br><span class="line">                        var j = 0;  //记录最大像素的索引</span><br><span class="line">                        for(let i = 0; i &lt; c.supportedImageResolutions.length; i++)&#123;</span><br><span class="line">                            var arr = c.supportedImageResolutions[i].split(&quot;*&quot;);</span><br><span class="line">                            if(arr.length &lt; 2)&#123;</span><br><span class="line">                                continue;</span><br><span class="line">                            &#125;</span><br><span class="line">                            var currentArea = arr[0] * arr[1];</span><br><span class="line">                            if(currentArea &gt; area)&#123;</span><br><span class="line">                                area = currentArea;</span><br><span class="line">                                j = i;</span><br><span class="line">                            &#125;</span><br><span class="line">                        &#125;</span><br><span class="line">                        var filename = new Date().getTime() + &apos;.jpg&apos;;</span><br><span class="line">                        c.captureImage(function(filePath) &#123;</span><br><span class="line">                            </span><br><span class="line">                            // filePath  为拍完照保存在本地的路径   _doc/shijain...</span><br><span class="line">                            plus.io.resolveLocalFileSystemURL(filePath, function(entry) &#123;</span><br><span class="line">                                 _this.loading = weui.loading(_this.$t(&apos;l.i.crop.pictureProcessing&apos;));</span><br><span class="line">                                // 可通过entry对象操作 file 文件 </span><br><span class="line">                                entry.file( function ( file ) &#123;</span><br><span class="line">                                    var fileReader = new plus.io.FileReader();</span><br><span class="line">                                    fileReader.onloadend = function ( e ) &#123;</span><br><span class="line">                                        // Get data</span><br><span class="line">                                        // alert( e.target.result );</span><br><span class="line">                                        var imgPath = e.target.result;</span><br><span class="line">                                        var image = new Image();</span><br><span class="line">                                        image.src = imgPath;</span><br><span class="line">                                        image.name = entry.name;</span><br><span class="line">                                        image.onload = function() &#123;</span><br><span class="line">                                            _this.initAppCrop(image); /*上传图片*/</span><br><span class="line">                                        &#125;</span><br><span class="line">                                    &#125;;</span><br><span class="line">                                    fileReader.readAsDataURL( file );</span><br><span class="line">                                &#125;, function ( file ) &#123;</span><br><span class="line">                                    alert( file.message );</span><br><span class="line">                                &#125; );</span><br><span class="line">                            &#125;, function(filePath) &#123;</span><br><span class="line">                                 _this.loading.hide();</span><br><span class="line">                                 _this.seling = false;</span><br><span class="line">                                console.log(&quot;读取拍照文件错误：&quot; + filePath.message);</span><br><span class="line">                            &#125;);</span><br><span class="line">                        &#125;, function(s) &#123;</span><br><span class="line">                            //防止选相机时 不拍照了</span><br><span class="line">                            _this.seling = false;</span><br><span class="line">                            console.log(&quot;拍照错误：&quot; + filePath.message);</span><br><span class="line">                        &#125;, &#123;</span><br><span class="line">                            filename: &quot;_doc/&quot; + filename,</span><br><span class="line">                            resolution: c.supportedImageResolutions[j],</span><br><span class="line">                        &#125;)</span><br><span class="line">                   &#125;</span><br><span class="line">               &#125;)</span><br><span class="line">                </span><br><span class="line">            &#125;,</span><br><span class="line">            galleryImg : function () &#123;</span><br><span class="line">                const ua = window.navigator.userAgent.toLocaleLowerCase();</span><br><span class="line">                var isIOS = /iphone|ipad|ipod/.test(ua);</span><br><span class="line">                var _this = this;</span><br><span class="line">                _this.checkPermission(&apos;GALLERY&apos;,function(data)&#123;</span><br><span class="line">                    if(!data)&#123;</span><br><span class="line">                        return;</span><br><span class="line">                    &#125;</span><br><span class="line">                    plus.gallery.pick(function(a) &#123;</span><br><span class="line">                        plus.io.resolveLocalFileSystemURL(a, function(entry) &#123;</span><br><span class="line">                             _this.loading = weui.loading(_this.$t(&apos;l.i.crop.pictureProcessing&apos;));</span><br><span class="line">                            // 可通过entry对象操作 file 文件 </span><br><span class="line">                            entry.file( function ( file ) &#123;</span><br><span class="line">                                var fileReader = new plus.io.FileReader();</span><br><span class="line">                                fileReader.onloadend = function ( e ) &#123;</span><br><span class="line">                                    // Get data</span><br><span class="line">                                    // alert( e.target.result );</span><br><span class="line">                                    var imgPath = e.target.result;</span><br><span class="line">                                    var image = new Image();</span><br><span class="line">                                    image.src = imgPath;</span><br><span class="line">                                    image.name = entry.name;</span><br><span class="line">                                    </span><br><span class="line">                                    image.onload = function() &#123;</span><br><span class="line">                                       </span><br><span class="line">                                        _this.initAppCrop(image); /*上传图片*/</span><br><span class="line">                                    &#125;</span><br><span class="line">                                &#125;;</span><br><span class="line">                                fileReader.readAsDataURL( file );</span><br><span class="line">                            &#125;, function ( file ) &#123;</span><br><span class="line">                                alert( file.message );</span><br><span class="line">                            &#125; );</span><br><span class="line">                            // var imgPath = isIOS?entry.toRemoteURL():entry.toLocalURL();</span><br><span class="line">                            // var image = new Image();</span><br><span class="line">                            // image.src = imgPath;</span><br><span class="line">                            // image.name = entry.name;</span><br><span class="line">                            // image.onload = function() &#123;</span><br><span class="line">                            //     _this.initAppCrop(image); /*上传图片*/</span><br><span class="line">                            // &#125;</span><br><span class="line">                        &#125;, function(e) &#123;</span><br><span class="line">                            _this.seling = false;</span><br><span class="line">                            _this.loading.hide();</span><br><span class="line">                            console.log(&quot;读取拍照文件错误：&quot; + e.message);</span><br><span class="line">                        &#125;);</span><br><span class="line">                    &#125;, function(a) &#123;</span><br><span class="line">                        //防止安卓机跳到相册后不选了</span><br><span class="line">                        _this.seling = false;</span><br><span class="line">                    &#125;, &#123;</span><br><span class="line">                        filter: &quot;image&quot;</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;)</span><br><span class="line">                </span><br><span class="line">            &#125;,</span><br><span class="line">            onSel : function()&#123;</span><br><span class="line">                var _this = this;</span><br><span class="line">                if(_this.seling)&#123;</span><br><span class="line">                    return;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                weui.actionSheet([</span><br><span class="line">                    &#123;</span><br><span class="line">                        label: _this.$t(&apos;l.i.crop.takePhoto&apos;),</span><br><span class="line">                        onClick: function () &#123;_this.seling = true;_this.getImage()&#125;</span><br><span class="line">                    &#125;, &#123;</span><br><span class="line">                        label: _this.$t(&apos;l.i.crop.takeByphotos&apos;),</span><br><span class="line">                        onClick: function () &#123;_this.seling = true;_this.galleryImg();&#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                ], [</span><br><span class="line">                    &#123;</span><br><span class="line">                        label: _this.$t(&apos;l.i.crop.cancel&apos;),</span><br><span class="line">                        onClick: function () &#123;_this.seling = false;&#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                ]);</span><br><span class="line">            &#125;,</span><br><span class="line">            initEvent: function()&#123;</span><br><span class="line">                console.log(&apos;initEvent&apos;);</span><br><span class="line">                $(&apos;#&apos; + this.btnId).off(&apos;click&apos;);</span><br><span class="line">                $(&apos;#&apos; + this.btnId).on(&apos;click&apos;, this.onSel)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">mounted()&#123;</span><br><span class="line">            if (!HTMLCanvasElement.prototype.toBlob) &#123;</span><br><span class="line">                Object.defineProperty(HTMLCanvasElement.prototype, &apos;toBlob&apos;, &#123;</span><br><span class="line">                    value: function (callback, type, quality) &#123;</span><br><span class="line">                        var binStr = atob( this.toDataURL(type, quality).split(&apos;,&apos;)[1] ),</span><br><span class="line">                            len = binStr.length,</span><br><span class="line">                            arr = new Uint8Array(len);</span><br><span class="line">                        for (var i=0; i&lt;len; i++ ) &#123;</span><br><span class="line">                            arr[i] = binStr.charCodeAt(i);</span><br><span class="line">                        &#125;</span><br><span class="line">                        callback( new Blob( [arr], &#123;type: type || &apos;image/png&apos;&#125; ) );</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            // var topHeight = $(&apos;html&apos;).css(&apos;font-size&apos;);</span><br><span class="line">            // var boxHeight = $(&apos;html&apos;).height() - topHeight.replace(&apos;px&apos;, &apos;&apos;);</span><br><span class="line">            // $(&apos;.crop-box&apos;).css(&apos;top&apos;, topHeight).css(&apos;height&apos;, boxHeight);</span><br><span class="line"></span><br><span class="line">            if (window.plus) &#123;</span><br><span class="line">                console.log(window.plus)</span><br><span class="line">                this.initEvent();</span><br><span class="line">            &#125;</span><br><span class="line">            this.initUploader();</span><br><span class="line">        &#125;,</span><br><span class="line">        beforeDestroy : function()&#123;</span><br><span class="line">            this.seling = false;</span><br><span class="line">            if(this.loading)&#123;</span><br><span class="line">                this.loading.hide();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.crop-area img&#123;</span><br><span class="line">    max-width: 100%;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br></pre></td><td class="code"><pre><span class="line">this.checkPermission(&apos;CAMERA&apos;,function(data)&#123;</span><br><span class="line">              if(data)&#123;</span><br><span class="line">                   var c = plus.camera.getCamera();   </span><br><span class="line">                   var area = 0;  //记录最大像素  </span><br><span class="line">                   var j = 0;  //记录最大像素的索引</span><br><span class="line">                   for(let i = 0; i &lt; c.supportedImageResolutions.length; i++)&#123;</span><br><span class="line">                       var arr = c.supportedImageResolutions[i].split(&quot;*&quot;);</span><br><span class="line">                       if(arr.length &lt; 2)&#123;</span><br><span class="line">                           continue;</span><br><span class="line">                       &#125;</span><br><span class="line">                       var currentArea = arr[0] * arr[1];</span><br><span class="line">                       if(currentArea &gt; area)&#123;</span><br><span class="line">                           area = currentArea;</span><br><span class="line">                           j = i;</span><br><span class="line">                       &#125;</span><br><span class="line">                   &#125;</span><br><span class="line">                   var filename = new Date().getTime() + &apos;.jpg&apos;;</span><br><span class="line">                   c.captureImage(function(filePath) &#123;</span><br><span class="line">                       </span><br><span class="line">                       // filePath  为拍完照保存在本地的路径   _doc/shijain...</span><br><span class="line">                       plus.io.resolveLocalFileSystemURL(filePath, function(entry) &#123;</span><br><span class="line">                            _this.loading = weui.loading(_this.$t(&apos;l.i.crop.pictureProcessing&apos;));</span><br><span class="line">                           // 可通过entry对象操作 file 文件 </span><br><span class="line">                           entry.file( function ( file ) &#123;</span><br><span class="line">                               var fileReader = new plus.io.FileReader();</span><br><span class="line">                               fileReader.onloadend = function ( e ) &#123;</span><br><span class="line">                                   // Get data</span><br><span class="line">                                   // alert( e.target.result );</span><br><span class="line">                                   var imgPath = e.target.result;</span><br><span class="line">                                   var image = new Image();</span><br><span class="line">                                   image.src = imgPath;</span><br><span class="line">                                   image.name = entry.name;</span><br><span class="line">                                   image.onload = function() &#123;</span><br><span class="line">                                       _this.initAppCrop(image); /*上传图片*/</span><br><span class="line">                                   &#125;</span><br><span class="line">                               &#125;;</span><br><span class="line">                               fileReader.readAsDataURL( file );</span><br><span class="line">                           &#125;, function ( file ) &#123;</span><br><span class="line">                               alert( file.message );</span><br><span class="line">                           &#125; );</span><br><span class="line">                       &#125;, function(filePath) &#123;</span><br><span class="line">                            _this.loading.hide();</span><br><span class="line">                            _this.seling = false;</span><br><span class="line">                           console.log(&quot;读取拍照文件错误：&quot; + filePath.message);</span><br><span class="line">                       &#125;);</span><br><span class="line">                   &#125;, function(s) &#123;</span><br><span class="line">                       //防止选相机时 不拍照了</span><br><span class="line">                       _this.seling = false;</span><br><span class="line">                       console.log(&quot;拍照错误：&quot; + filePath.message);</span><br><span class="line">                   &#125;, &#123;</span><br><span class="line">                       filename: &quot;_doc/&quot; + filename,</span><br><span class="line">                       resolution: c.supportedImageResolutions[j],</span><br><span class="line">                   &#125;)</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;)</span><br><span class="line">          </span><br><span class="line">          </span><br><span class="line">           _this.checkPermission(&apos;GALLERY&apos;,function(data)&#123;</span><br><span class="line">               if(!data)&#123;</span><br><span class="line">                   return;</span><br><span class="line">               &#125;</span><br><span class="line">               plus.gallery.pick(function(a) &#123;</span><br><span class="line">                   plus.io.resolveLocalFileSystemURL(a, function(entry) &#123;</span><br><span class="line">                        _this.loading = weui.loading(_this.$t(&apos;l.i.crop.pictureProcessing&apos;));</span><br><span class="line">                       // 可通过entry对象操作 file 文件 </span><br><span class="line">                       entry.file( function ( file ) &#123;</span><br><span class="line">                           var fileReader = new plus.io.FileReader();</span><br><span class="line">                           fileReader.onloadend = function ( e ) &#123;</span><br><span class="line">                               // Get data</span><br><span class="line">                               // alert( e.target.result );</span><br><span class="line">                               var imgPath = e.target.result;</span><br><span class="line">                               var image = new Image();</span><br><span class="line">                               image.src = imgPath;</span><br><span class="line">                               image.name = entry.name;</span><br><span class="line">                               </span><br><span class="line">                               image.onload = function() &#123;</span><br><span class="line">                                  </span><br><span class="line">                                   _this.initAppCrop(image); /*上传图片*/</span><br><span class="line">                               &#125;</span><br><span class="line">                           &#125;;</span><br><span class="line">                           fileReader.readAsDataURL( file );</span><br><span class="line">                       &#125;, function ( file ) &#123;</span><br><span class="line">                           alert( file.message );</span><br><span class="line">                       &#125; );</span><br><span class="line">                       // var imgPath = isIOS?entry.toRemoteURL():entry.toLocalURL();</span><br><span class="line">                       // var image = new Image();</span><br><span class="line">                       // image.src = imgPath;</span><br><span class="line">                       // image.name = entry.name;</span><br><span class="line">                       // image.onload = function() &#123;</span><br><span class="line">                       //     _this.initAppCrop(image); /*上传图片*/</span><br><span class="line">                       // &#125;</span><br><span class="line">                   &#125;, function(e) &#123;</span><br><span class="line">                       _this.seling = false;</span><br><span class="line">                       _this.loading.hide();</span><br><span class="line">                       console.log(&quot;读取拍照文件错误：&quot; + e.message);</span><br><span class="line">                   &#125;);</span><br><span class="line">               &#125;, function(a) &#123;</span><br><span class="line">                   //防止安卓机跳到相册后不选了</span><br><span class="line">                   _this.seling = false;</span><br><span class="line">               &#125;, &#123;</span><br><span class="line">                   filter: &quot;image&quot;</span><br><span class="line">               &#125;)</span><br><span class="line">           &#125;)</span><br><span class="line">           </span><br><span class="line">           </span><br><span class="line">           </span><br><span class="line">         //seling   防止重复点击    </span><br><span class="line">      onSel : function()&#123;</span><br><span class="line">           var _this = this;</span><br><span class="line">           if(_this.seling)&#123;</span><br><span class="line">               return;</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">           weui.actionSheet([</span><br><span class="line">               &#123;</span><br><span class="line">                   label: _this.$t(&apos;l.i.crop.takePhoto&apos;),</span><br><span class="line">                   onClick: function () &#123;_this.seling = true;_this.getImage()&#125;</span><br><span class="line">               &#125;, &#123;</span><br><span class="line">                   label: _this.$t(&apos;l.i.crop.takeByphotos&apos;),</span><br><span class="line">                   onClick: function () &#123;_this.seling = true;_this.galleryImg();&#125;</span><br><span class="line">               &#125;</span><br><span class="line">           ], [</span><br><span class="line">               &#123;</span><br><span class="line">                   label: _this.$t(&apos;l.i.crop.cancel&apos;),</span><br><span class="line">                   onClick: function () &#123;_this.seling = false;&#125;</span><br><span class="line">               &#125;</span><br><span class="line">           ]);</span><br><span class="line">       &#125;,</span><br></pre></td></tr></table></figure><p>代码都是节选，也没做修改，只是总结下 使用相机和相册还有二维码的调用方法，具体请查看api。</p><h5 id="第四个问题"><a href="#第四个问题" class="headerlink" title="第四个问题"></a>第四个问题</h5><p>顶部导航栏（标题问题）</p><p>问题： 安卓点击输入框时，整个页面是会减小的，因此顶部导航栏还是会固定再顶部，但是ios点击输入框</p><p>弹起键盘时，页面是上移的，导致顶部标题也上移动。</p><p>研究了许久</p><p>修改 softinpputMode 为 adjustResize。 也可在配置文件manifest文件中修改模式。具体查看文档。</p><p>plus.webview.currentWebview().setStyle({softinputMode: “adjustResize”});</p><p>但是发行修改为这个模式后打包仍有各种问题</p><p>最后解决方法，就是使用原生导航栏，原生导航栏会将顶部标题固定在顶部。</p><p>使用方法：</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">setTitle()&#123;</span><br><span class="line">        <span class="keyword">var</span> _self = plus.webview.currentWebview();</span><br><span class="line">        <span class="keyword">var</span> buttons = !<span class="keyword">this</span>.meta.scan?[]:[</span><br><span class="line">              <span class="comment">//使用阿里图标库示例,打包后才会生效</span></span><br><span class="line">            &#123;</span><br><span class="line">              fontSrc : <span class="string">"_www/static/font/iconfont.ttf"</span>,   </span><br><span class="line">              text:<span class="string">'\ue663'</span>,</span><br><span class="line">              float:<span class="string">'right'</span>,</span><br><span class="line">              onclick: <span class="keyword">this</span>.onScan</span><br><span class="line">            &#125;</span><br><span class="line">        ];</span><br><span class="line">        _self.setStyle(&#123;</span><br><span class="line">            titleNView:&#123;</span><br><span class="line">              titleOverflow: <span class="string">'titleOverflow'</span>, </span><br><span class="line">              height: <span class="string">'50px'</span>,</span><br><span class="line">              buttons,</span><br><span class="line">              autoBackButton : <span class="keyword">this</span>.meta.back,</span><br><span class="line">              titleText : <span class="keyword">this</span>.$store.getters.getTitle ,</span><br><span class="line">              backgroundColor: <span class="keyword">this</span>.meta.bg , </span><br><span class="line">              titleColor : <span class="keyword">this</span>.meta.color </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><p><a href="http://www.html5plus.org/doc/zh_cn/webview.html#plus.webview.WebviewObject.setStyle" target="_blank" rel="noopener">原生导航栏文档</a></p><p>没记错的化文档说明中写 首页的 导航栏需要在配置文件中配置，没错的话 应该就是因为在代码中设置原生导航栏</p><p>用到了plus中的webview方法，可能plus的方法还没加载完，启动页已经关闭，导致页面没有顶部导航栏，所以首</p><p>页需要在manifest配置文件中配置</p><p>那么问题来了，我的项目是启动页完后未登录时进入的是登录页，已登录时是登录后的首页。我该如何配置？</p><p>而且我的项目是多语言的，配置中也只能是一种语言。因此我决定不配置首页，而是监听 plus的方法是否加载完成，加载完成时 再设置下，顶部标题。</p><p>这样做问题好像是解决了，但是要是性能很差的手机很慢才加载完成就会导致顶部导航栏的显示的很突然。所以</p><p>结合上面的关闭启动页的配置那里，把自动关闭启动页关闭，然后当plus的方法全部加载完成后 手动关闭启动页。因为是多语言，语言改变了的时候也要进行setTitle方法</p><p>注意： 有些页面是单独设置顶部标题内容的，一旦设置就得 返回键，扫码等  需要显示得图标全部设置，不会进行叠加，比如 本来有返回按钮，没有标题， 你再设置标题，  此时是不会有返回键的，因此需要全部一起再设置。</p><h4 id="第五个问题"><a href="#第五个问题" class="headerlink" title="第五个问题"></a>第五个问题</h4><p>web浏览器，当文件为网络连接时，创建一个窗口，打开链接，所以创建一个组件</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;link_box&quot; class=&quot;link-box&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data()&#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      wbview : null,</span><br><span class="line">      id : &apos;link_view&apos;,</span><br><span class="line">      url : &apos;&apos;,</span><br><span class="line">      styles : &#123;&#125;,</span><br><span class="line">      extras : &#123;&#125;,</span><br><span class="line">      loading : null</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods:&#123;</span><br><span class="line">    show : function(url)&#123;</span><br><span class="line">      this.wbview = plus.webview.getWebviewById(this.id);</span><br><span class="line">      console.log(this.wbview);</span><br><span class="line">      if(this.wbview)&#123;</span><br><span class="line">        if(url.indexOf(&apos;http&apos;) == -1)&#123;</span><br><span class="line">          url = &quot;http://&quot;+url;</span><br><span class="line">        &#125;</span><br><span class="line">        this.wbview.loadURL(url);</span><br><span class="line">      &#125;else&#123;</span><br><span class="line">        this.wbview = plus.webview.create(url, this.id, this.styles, this.extras);</span><br><span class="line">      &#125;</span><br><span class="line">      plus.webview.show(this.id, &apos;slide-out-right&apos;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted : function()&#123;</span><br><span class="line">    var _this = this;</span><br><span class="line">    this.styles = &#123;</span><br><span class="line">      titleNView:&#123;</span><br><span class="line">            titleOverflow: &apos;titleOverflow&apos;, </span><br><span class="line">            height: &apos;50px&apos;,</span><br><span class="line">            autoBackButton : true,</span><br><span class="line">            backgroundColor: &quot;#FFFFFF&quot;, </span><br><span class="line">            titleColor : &quot;#000000&quot; </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>界面引用</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">&lt;div&gt;</span><br><span class="line">...</span><br><span class="line">&lt;v-webview ref=&quot;webview&quot;&gt;&lt;/v-webview&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line">&lt;script&gt;</span><br><span class="line">import webview from &apos;@/components/include/webview.vue&apos;;</span><br><span class="line">    export default&#123;</span><br><span class="line">        data()&#123;</span><br><span class="line">            return &#123;</span><br><span class="line"></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">         components:&#123;</span><br><span class="line">            &quot;v-webview&quot; : webview</span><br><span class="line">        &#125;,</span><br><span class="line">        methods:&#123;</span><br><span class="line">            goWebview(url)&#123;</span><br><span class="line">                this.$refs.webview.show(url);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>这样就可以实现链接跳转，但是这样的话会导致返回出问题，所以需要对返回重新设计</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> time = [<span class="literal">null</span>, <span class="literal">null</span>];    <span class="comment">//记录返回的两次间隔时间</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.plus) &#123;</span><br><span class="line">    plusReady();</span><br><span class="line">&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">document</span>.addEventListener(<span class="string">'plusready'</span>, plusReady, <span class="literal">false</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">plusReady</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> webview = plus.webview.currentWebview();</span><br><span class="line">    plus.key.addEventListener(<span class="string">'backbutton'</span>, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">        webview.canBack(<span class="function"><span class="keyword">function</span>(<span class="params">e</span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (e.canBack) &#123;</span><br><span class="line">                <span class="comment">//link_view  为自定义的id，可更换，保持与组建上的一致</span></span><br><span class="line">                <span class="keyword">var</span> wbview = plus.webview.getWebviewById(<span class="string">'link_view'</span>);</span><br><span class="line">                <span class="keyword">if</span>(wbview)&#123;</span><br><span class="line">                    <span class="comment">//判断新窗口是否可以返回，不可以返回的时候才清除窗口</span></span><br><span class="line">                   wbview.canBack(<span class="function"><span class="keyword">function</span>(<span class="params">wb</span>)</span>&#123;</span><br><span class="line">                        <span class="keyword">if</span>(wb.canBack)&#123;</span><br><span class="line">                            wbview.back();</span><br><span class="line">                        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                            plus.webview.close(<span class="string">'link_view'</span>, <span class="string">'slide-iny-right'</span>);</span><br><span class="line">                            wbview.clear();</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                    time = [<span class="literal">null</span>,<span class="literal">null</span>];   <span class="comment">//路由变化重置 time。</span></span><br><span class="line">                    router.go(<span class="number">-1</span>); <span class="comment">//返回上一级</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                time.shift();</span><br><span class="line">                time.push(<span class="keyword">new</span> <span class="built_in">Date</span>().getTime());</span><br><span class="line">                <span class="keyword">if</span> (time[<span class="number">1</span>] - time[<span class="number">0</span>] &gt; <span class="number">2000</span>) &#123;  <span class="comment">//事件间隔大于 2s 当作第一次 点击返回，做出提示</span></span><br><span class="line">           <span class="comment">//plus.nativeUI.toast  h5+API的提示窗口详细使用请看api，默认前面有应用名称：tips</span></span><br><span class="line">                    plus.nativeUI.toast(<span class="string">"再按一次返回退出应用！"</span>);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    plus.runtime.quit();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>第六个问题</p><p>第一次登录时语言跟随系统，后面再次进来就不干了。</p><p>解析：第一次进来没有缓存语言，所以设置系统语言，以后进来有缓存语言，直接跟随缓存语言</p><p>plus.os.language  获取系统设置的语言，但是安卓和苹果获取到的字段是不一样的。所以得区分</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//安卓：en_US   zh_TW   zh_CN</span></span><br><span class="line">     <span class="comment">//ios：en-CN  zh-Hans-CN  zh-Hant-CN   zh-Hant-HK  zh-Hant-TW  zh-Hant-MO</span></span><br><span class="line">     <span class="keyword">var</span> systemLang = plus.os.language;</span><br><span class="line">     <span class="keyword">var</span> lang;</span><br><span class="line">     <span class="keyword">if</span>(systemLang.indexOf(<span class="string">'en'</span>) &gt; <span class="number">-1</span>)&#123;</span><br><span class="line">         lang = <span class="string">'en_us'</span>;</span><br><span class="line">     &#125;<span class="keyword">else</span> <span class="keyword">if</span>(systemLang.indexOf(<span class="string">'zh-Hans-CN'</span>) &gt; <span class="number">-1</span> || systemLang.indexOf(<span class="string">'zh_CN'</span>) &gt; <span class="number">-1</span>)&#123;</span><br><span class="line">         lang = <span class="string">'zh_cn'</span>;</span><br><span class="line">     &#125;<span class="keyword">else</span> <span class="keyword">if</span>(systemLang.indexOf(<span class="string">'zh-Hant'</span>) &gt; <span class="number">-1</span> || systemLang.indexOf(<span class="string">'zh_TW'</span>) &gt; <span class="number">-1</span>)&#123;</span><br><span class="line">         lang = <span class="string">'zh_tw'</span>;</span><br><span class="line">     &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">         lang = <span class="string">'other'</span>;</span><br><span class="line">     &#125;</span><br><span class="line">     <span class="keyword">if</span>(!localStorage.getItem(<span class="string">'lang'</span>))&#123;</span><br><span class="line">         <span class="keyword">if</span>(lang != <span class="string">'other'</span>)&#123;</span><br><span class="line">             i18n.locale = lang;</span><br><span class="line">             store.commit(<span class="string">"setLang"</span>,lang);</span><br><span class="line">             localStorage.setItem(<span class="string">'lang'</span>,lang);</span><br><span class="line">         &#125;</span><br><span class="line">     &#125;</span><br></pre></td></tr></table></figure><h4 id="第七个问题"><a href="#第七个问题" class="headerlink" title="第七个问题"></a>第七个问题</h4><p>监听网络状态</p><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> GL_HAVE_NET = navigator.onLine;   <span class="comment">//设置是否有网络</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//全局获取网络状态方法</span></span><br><span class="line">Vue.prototype.getNet = <span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> GL_HAVE_NET;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//网络变化时调用的方法</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onNetChange</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line"><span class="keyword">var</span> nt = plus.networkinfo.getCurrentType();</span><br><span class="line"><span class="keyword">switch</span> (nt)&#123;</span><br><span class="line"><span class="keyword">case</span> plus.networkinfo.CONNECTION_ETHERNET:</span><br><span class="line"><span class="keyword">case</span> plus.networkinfo.CONNECTION_WIFI:</span><br><span class="line">        GL_HAVE_NET = <span class="literal">true</span>;</span><br><span class="line"><span class="comment">// _this.GL_ALERT("当前为wifi网络"); </span></span><br><span class="line"><span class="keyword">break</span>; </span><br><span class="line"><span class="keyword">case</span> plus.networkinfo.CONNECTION_CELL2G:</span><br><span class="line"><span class="keyword">case</span> plus.networkinfo.CONNECTION_CELL3G:</span><br><span class="line"><span class="keyword">case</span> plus.networkinfo.CONNECTION_CELL4G:</span><br><span class="line">        GL_HAVE_NET = <span class="literal">true</span>;</span><br><span class="line"><span class="comment">// _this.GL_ALERT("当前为移动数据网络");</span></span><br><span class="line"><span class="keyword">break</span>; </span><br><span class="line"><span class="keyword">default</span>:</span><br><span class="line">        GL_HAVE_NET = <span class="literal">false</span>;</span><br><span class="line">        <span class="comment">// _this.GL_ALERT("当前没有网络");</span></span><br><span class="line"><span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!GL_HAVE_NET)&#123;</span><br><span class="line">        <span class="comment">//如果有网路变到没有网路提示网路异常</span></span><br><span class="line">        weui.toast(<span class="string">"网络异常"</span>);</span><br><span class="line">    &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">         <span class="comment">//如果没有网路变到有网路页面刷新</span></span><br><span class="line">        <span class="built_in">window</span>.location.reload();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//H5+plus的监听网络变化，并调用onNetChange方法</span></span><br><span class="line"><span class="built_in">document</span>.addEventListener(<span class="string">"netchange"</span>, onNetChange, <span class="literal">false</span>); </span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//下面为h5的监听网络变化的方法</span></span><br><span class="line"><span class="comment">//部分手机不兼容（安卓低端机有些不行）</span></span><br><span class="line"><span class="comment">// var el = document.body;  </span></span><br><span class="line"><span class="comment">// if (el.addEventListener) &#123;  </span></span><br><span class="line"><span class="comment">//    window.addEventListener("online", function () &#123;  </span></span><br><span class="line"><span class="comment">//      GL_HAVE_NET = true;</span></span><br><span class="line"><span class="comment">//     //  alert(GL_HAVE_NET);</span></span><br><span class="line"><span class="comment">//     &#125;, true);  </span></span><br><span class="line"><span class="comment">//    window.addEventListener("offline", function () &#123;  </span></span><br><span class="line"><span class="comment">//      GL_HAVE_NET = false;</span></span><br><span class="line"><span class="comment">//     //  alert(GL_HAVE_NET);</span></span><br><span class="line"><span class="comment">//     &#125;, true);  </span></span><br><span class="line"><span class="comment">// &#125;  else if (el.attachEvent) &#123;  </span></span><br><span class="line"><span class="comment">//    window.attachEvent("ononline", function () &#123;  </span></span><br><span class="line"><span class="comment">//         GL_HAVE_NET = true;</span></span><br><span class="line"><span class="comment">//         // alert(GL_HAVE_NET);</span></span><br><span class="line"><span class="comment">//     &#125;);  </span></span><br><span class="line"><span class="comment">//    window.attachEvent("onoffline", function () &#123;  </span></span><br><span class="line"><span class="comment">//         GL_HAVE_NET = false;</span></span><br><span class="line"><span class="comment">//         // alert(GL_HAVE_NET);</span></span><br><span class="line"><span class="comment">//     &#125;);  </span></span><br><span class="line"><span class="comment">// &#125;  else &#123;  </span></span><br><span class="line"><span class="comment">//    window.ononline = function () &#123;  </span></span><br><span class="line"><span class="comment">//         GL_HAVE_NET = true;</span></span><br><span class="line"><span class="comment">//         // alert(GL_HAVE_NET);</span></span><br><span class="line"><span class="comment">//     &#125;;  </span></span><br><span class="line"><span class="comment">//    window.onoffline = function () &#123;  </span></span><br><span class="line"><span class="comment">//         GL_HAVE_NET = false;</span></span><br><span class="line"><span class="comment">//         // alert(GL_HAVE_NET);</span></span><br><span class="line"><span class="comment">//     &#125;;  </span></span><br><span class="line"><span class="comment">// &#125;</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;h5-开发汇总&quot;&gt;&lt;a href=&quot;#h5-开发汇总&quot; class=&quot;headerlink&quot; title=&quot;h5+开发汇总&quot;&gt;&lt;/a&gt;h5+开发汇总&lt;/h3&gt;&lt;h4 id=&quot;基于h5-api的使用&quot;&gt;&lt;a href=&quot;#基于h5-api的使用&quot; class=&quot;he
      
    
    </summary>
    
    
      <category term="app" scheme="https://shenxiaobu.github.io/tags/app/"/>
    
  </entry>
  
  <entry>
    <title>前端开发app总结</title>
    <link href="https://shenxiaobu.github.io/2019/12/14/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91app%E6%80%BB%E7%BB%93/"/>
    <id>https://shenxiaobu.github.io/2019/12/14/前端开发app总结/</id>
    <published>2019-12-14T04:15:44.000Z</published>
    <updated>2020-03-22T13:49:33.130Z</updated>
    
    <content type="html"><![CDATA[<h3 id="web前端基于vue利用H5-接口开发APP总结"><a href="#web前端基于vue利用H5-接口开发APP总结" class="headerlink" title="web前端基于vue利用H5+接口开发APP总结"></a>web前端基于vue利用H5+接口开发APP总结</h3><h5 id="下载HbuilderX，并利用HbuilderX将web项目打包成App"><a href="#下载HbuilderX，并利用HbuilderX将web项目打包成App" class="headerlink" title="下载HbuilderX，并利用HbuilderX将web项目打包成App"></a>下载HbuilderX，并利用HbuilderX将web项目打包成App</h5><p>1 打开hbuildx软件，新建一个H5+app的空项目为  xiaobutest ，</p><p><img src="/2019/12/14/前端开发app总结/1576299772847.png" alt="1576299772847"></p><p>2 xiaobutest项目就会生成如下文件</p><p><img src="/2019/12/14/前端开发app总结/1576300223480.png" alt="1576300223480"></p><p>3  将可删除和可替换的文件删除掉，然后将 vue打包后生成的dist文件夹下的文件放置到xiaobutest下。文件如下</p><p><img src="/2019/12/14/前端开发app总结/1576300381128.png" alt="1576300381128"></p><p>4 打开manifest.json文件对app进行配置</p><p><img src="/2019/12/14/前端开发app总结/1576300798774.png" alt="1576300798774"></p><p><img src="/2019/12/14/前端开发app总结/1576301012667.png" alt="1576301012667"></p><p>上面的图标问题讲错了，是只能选择png图标，但是不能有透明的地方，否则applestore审核不通过，打包也可能失败。</p><p><img src="/2019/12/14/前端开发app总结/1576301284946.png" alt="1576301284946"></p><p><img src="/2019/12/14/前端开发app总结/1576301836792.png" alt="1576301836792"></p><p><img src="/2019/12/14/前端开发app总结/1576301960583.png" alt="1576301960583"></p><p><img src="/2019/12/14/前端开发app总结/1576302098656.png" alt="1576302098656"></p><p><img src="/2019/12/14/前端开发app总结/1576302202716.png" alt="1576302202716"></p><p>源码配置</p><figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br><span class="line">499</span><br><span class="line">500</span><br><span class="line">501</span><br><span class="line">502</span><br><span class="line">503</span><br><span class="line">504</span><br><span class="line">505</span><br><span class="line">506</span><br><span class="line">507</span><br><span class="line">508</span><br><span class="line">509</span><br><span class="line">510</span><br><span class="line">511</span><br><span class="line">512</span><br><span class="line">513</span><br><span class="line">514</span><br><span class="line">515</span><br><span class="line">516</span><br><span class="line">517</span><br><span class="line">518</span><br><span class="line">519</span><br><span class="line">520</span><br><span class="line">521</span><br><span class="line">522</span><br><span class="line">523</span><br><span class="line">524</span><br><span class="line">525</span><br><span class="line">526</span><br><span class="line">527</span><br><span class="line">528</span><br><span class="line">529</span><br><span class="line">530</span><br><span class="line">531</span><br><span class="line">532</span><br><span class="line">533</span><br><span class="line">534</span><br><span class="line">535</span><br><span class="line">536</span><br><span class="line">537</span><br><span class="line">538</span><br><span class="line">539</span><br><span class="line">540</span><br><span class="line">541</span><br><span class="line">542</span><br><span class="line">543</span><br><span class="line">544</span><br><span class="line">545</span><br><span class="line">546</span><br><span class="line">547</span><br><span class="line">548</span><br><span class="line">549</span><br><span class="line">550</span><br><span class="line">551</span><br><span class="line">552</span><br><span class="line">553</span><br><span class="line">554</span><br><span class="line">555</span><br><span class="line">556</span><br><span class="line">557</span><br><span class="line">558</span><br><span class="line">559</span><br><span class="line">560</span><br><span class="line">561</span><br><span class="line">562</span><br><span class="line">563</span><br><span class="line">564</span><br><span class="line">565</span><br><span class="line">566</span><br><span class="line">567</span><br><span class="line">568</span><br><span class="line">569</span><br><span class="line">570</span><br><span class="line">571</span><br><span class="line">572</span><br><span class="line">573</span><br><span class="line">574</span><br><span class="line">575</span><br><span class="line">576</span><br><span class="line">577</span><br><span class="line">578</span><br><span class="line">579</span><br><span class="line">580</span><br><span class="line">581</span><br><span class="line">582</span><br><span class="line">583</span><br><span class="line">584</span><br><span class="line">585</span><br><span class="line">586</span><br><span class="line">587</span><br><span class="line">588</span><br><span class="line">589</span><br><span class="line">590</span><br><span class="line">591</span><br><span class="line">592</span><br><span class="line">593</span><br><span class="line">594</span><br><span class="line">595</span><br><span class="line">596</span><br><span class="line">597</span><br><span class="line">598</span><br><span class="line">599</span><br><span class="line">600</span><br><span class="line">601</span><br><span class="line">602</span><br><span class="line">603</span><br><span class="line">604</span><br><span class="line">605</span><br><span class="line">606</span><br><span class="line">607</span><br><span class="line">608</span><br><span class="line">609</span><br><span class="line">610</span><br><span class="line">611</span><br><span class="line">612</span><br><span class="line">613</span><br><span class="line">614</span><br><span class="line">615</span><br><span class="line">616</span><br><span class="line">617</span><br><span class="line">618</span><br><span class="line">619</span><br><span class="line">620</span><br><span class="line">621</span><br><span class="line">622</span><br><span class="line">623</span><br><span class="line">624</span><br><span class="line">625</span><br><span class="line">626</span><br><span class="line">627</span><br><span class="line">628</span><br><span class="line">629</span><br><span class="line">630</span><br><span class="line">631</span><br><span class="line">632</span><br><span class="line">633</span><br><span class="line">634</span><br><span class="line">635</span><br><span class="line">636</span><br><span class="line">637</span><br><span class="line">638</span><br><span class="line">639</span><br><span class="line">640</span><br><span class="line">641</span><br><span class="line">642</span><br><span class="line">643</span><br><span class="line">644</span><br><span class="line">645</span><br><span class="line">646</span><br><span class="line">647</span><br><span class="line">648</span><br><span class="line">649</span><br><span class="line">650</span><br><span class="line">651</span><br><span class="line">652</span><br><span class="line">653</span><br><span class="line">654</span><br><span class="line">655</span><br><span class="line">656</span><br><span class="line">657</span><br><span class="line">658</span><br><span class="line">659</span><br><span class="line">660</span><br><span class="line">661</span><br><span class="line">662</span><br><span class="line">663</span><br><span class="line">664</span><br><span class="line">665</span><br><span class="line">666</span><br><span class="line">667</span><br><span class="line">668</span><br><span class="line">669</span><br><span class="line">670</span><br><span class="line">671</span><br><span class="line">672</span><br><span class="line">673</span><br><span class="line">674</span><br><span class="line">675</span><br><span class="line">676</span><br><span class="line">677</span><br><span class="line">678</span><br><span class="line">679</span><br><span class="line">680</span><br><span class="line">681</span><br><span class="line">682</span><br><span class="line">683</span><br><span class="line">684</span><br><span class="line">685</span><br><span class="line">686</span><br><span class="line">687</span><br><span class="line">688</span><br><span class="line">689</span><br><span class="line">690</span><br><span class="line">691</span><br><span class="line">692</span><br><span class="line">693</span><br><span class="line">694</span><br><span class="line">695</span><br><span class="line">696</span><br><span class="line">697</span><br><span class="line">698</span><br><span class="line">699</span><br><span class="line">700</span><br><span class="line">701</span><br><span class="line">702</span><br><span class="line">703</span><br><span class="line">704</span><br><span class="line">705</span><br><span class="line">706</span><br><span class="line">707</span><br><span class="line">708</span><br><span class="line">709</span><br><span class="line">710</span><br><span class="line">711</span><br><span class="line">712</span><br><span class="line">713</span><br><span class="line">714</span><br><span class="line">715</span><br><span class="line">716</span><br><span class="line">717</span><br><span class="line">718</span><br><span class="line">719</span><br><span class="line">720</span><br><span class="line">721</span><br><span class="line">722</span><br><span class="line">723</span><br><span class="line">724</span><br><span class="line">725</span><br><span class="line">726</span><br><span class="line">727</span><br><span class="line">728</span><br><span class="line">729</span><br><span class="line">730</span><br><span class="line">731</span><br><span class="line">732</span><br><span class="line">733</span><br><span class="line">734</span><br><span class="line">735</span><br><span class="line">736</span><br><span class="line">737</span><br><span class="line">738</span><br><span class="line">739</span><br><span class="line">740</span><br><span class="line">741</span><br><span class="line">742</span><br><span class="line">743</span><br><span class="line">744</span><br><span class="line">745</span><br><span class="line">746</span><br><span class="line">747</span><br><span class="line">748</span><br><span class="line">749</span><br><span class="line">750</span><br><span class="line">751</span><br><span class="line">752</span><br><span class="line">753</span><br><span class="line">754</span><br><span class="line">755</span><br><span class="line">756</span><br><span class="line">757</span><br><span class="line">758</span><br><span class="line">759</span><br><span class="line">760</span><br><span class="line">761</span><br><span class="line">762</span><br><span class="line">763</span><br><span class="line">764</span><br><span class="line">765</span><br><span class="line">766</span><br><span class="line">767</span><br><span class="line">768</span><br><span class="line">769</span><br><span class="line">770</span><br><span class="line">771</span><br><span class="line">772</span><br><span class="line">773</span><br><span class="line">774</span><br><span class="line">775</span><br><span class="line">776</span><br><span class="line">777</span><br><span class="line">778</span><br><span class="line">779</span><br><span class="line">780</span><br><span class="line">781</span><br><span class="line">782</span><br><span class="line">783</span><br><span class="line">784</span><br><span class="line">785</span><br><span class="line">786</span><br><span class="line">787</span><br><span class="line">788</span><br><span class="line">789</span><br><span class="line">790</span><br><span class="line">791</span><br><span class="line">792</span><br><span class="line">793</span><br><span class="line">794</span><br><span class="line">795</span><br><span class="line">796</span><br><span class="line">797</span><br><span class="line">798</span><br><span class="line">799</span><br><span class="line">800</span><br><span class="line">801</span><br><span class="line">802</span><br><span class="line">803</span><br><span class="line">804</span><br><span class="line">805</span><br><span class="line">806</span><br><span class="line">807</span><br><span class="line">808</span><br><span class="line">809</span><br><span class="line">810</span><br><span class="line">811</span><br><span class="line">812</span><br><span class="line">813</span><br><span class="line">814</span><br><span class="line">815</span><br><span class="line">816</span><br><span class="line">817</span><br><span class="line">818</span><br><span class="line">819</span><br><span class="line">820</span><br><span class="line">821</span><br><span class="line">822</span><br><span class="line">823</span><br><span class="line">824</span><br><span class="line">825</span><br><span class="line">826</span><br><span class="line">827</span><br><span class="line">828</span><br><span class="line">829</span><br><span class="line">830</span><br><span class="line">831</span><br><span class="line">832</span><br><span class="line">833</span><br><span class="line">834</span><br><span class="line">835</span><br><span class="line">836</span><br><span class="line">837</span><br><span class="line">838</span><br><span class="line">839</span><br><span class="line">840</span><br><span class="line">841</span><br><span class="line">842</span><br><span class="line">843</span><br><span class="line">844</span><br><span class="line">845</span><br><span class="line">846</span><br><span class="line">847</span><br><span class="line">848</span><br><span class="line">849</span><br><span class="line">850</span><br><span class="line">851</span><br><span class="line">852</span><br><span class="line">853</span><br><span class="line">854</span><br><span class="line">855</span><br><span class="line">856</span><br><span class="line">857</span><br><span class="line">858</span><br><span class="line">859</span><br><span class="line">860</span><br><span class="line">861</span><br><span class="line">862</span><br><span class="line">863</span><br><span class="line">864</span><br><span class="line">865</span><br><span class="line">866</span><br><span class="line">867</span><br><span class="line">868</span><br><span class="line">869</span><br><span class="line">870</span><br><span class="line">871</span><br><span class="line">872</span><br><span class="line">873</span><br><span class="line">874</span><br><span class="line">875</span><br><span class="line">876</span><br><span class="line">877</span><br><span class="line">878</span><br><span class="line">879</span><br><span class="line">880</span><br><span class="line">881</span><br><span class="line">882</span><br><span class="line">883</span><br><span class="line">884</span><br><span class="line">885</span><br><span class="line">886</span><br><span class="line">887</span><br><span class="line">888</span><br><span class="line">889</span><br><span class="line">890</span><br><span class="line">891</span><br><span class="line">892</span><br><span class="line">893</span><br><span class="line">894</span><br><span class="line">895</span><br><span class="line">896</span><br><span class="line">897</span><br><span class="line">898</span><br><span class="line">899</span><br><span class="line">900</span><br><span class="line">901</span><br><span class="line">902</span><br><span class="line">903</span><br><span class="line">904</span><br><span class="line">905</span><br><span class="line">906</span><br><span class="line">907</span><br><span class="line">908</span><br><span class="line">909</span><br><span class="line">910</span><br><span class="line">911</span><br><span class="line">912</span><br><span class="line">913</span><br><span class="line">914</span><br><span class="line">915</span><br><span class="line">916</span><br><span class="line">917</span><br><span class="line">918</span><br><span class="line">919</span><br><span class="line">920</span><br><span class="line">921</span><br><span class="line">922</span><br><span class="line">923</span><br><span class="line">924</span><br><span class="line">925</span><br><span class="line">926</span><br><span class="line">927</span><br><span class="line">928</span><br><span class="line">929</span><br><span class="line">930</span><br><span class="line">931</span><br><span class="line">932</span><br><span class="line">933</span><br><span class="line">934</span><br><span class="line">935</span><br><span class="line">936</span><br><span class="line">937</span><br><span class="line">938</span><br><span class="line">939</span><br><span class="line">940</span><br><span class="line">941</span><br><span class="line">942</span><br><span class="line">943</span><br><span class="line">944</span><br><span class="line">945</span><br><span class="line">946</span><br><span class="line">947</span><br><span class="line">948</span><br><span class="line">949</span><br><span class="line">950</span><br><span class="line">951</span><br><span class="line">952</span><br><span class="line">953</span><br><span class="line">954</span><br><span class="line">955</span><br><span class="line">956</span><br><span class="line">957</span><br><span class="line">958</span><br><span class="line">959</span><br><span class="line">960</span><br><span class="line">961</span><br><span class="line">962</span><br><span class="line">963</span><br><span class="line">964</span><br><span class="line">965</span><br><span class="line">966</span><br><span class="line">967</span><br><span class="line">968</span><br><span class="line">969</span><br><span class="line">970</span><br><span class="line">971</span><br><span class="line">972</span><br><span class="line">973</span><br><span class="line">974</span><br><span class="line">975</span><br><span class="line">976</span><br><span class="line">977</span><br><span class="line">978</span><br><span class="line">979</span><br><span class="line">980</span><br><span class="line">981</span><br><span class="line">982</span><br><span class="line">983</span><br><span class="line">984</span><br><span class="line">985</span><br><span class="line">986</span><br><span class="line">987</span><br><span class="line">988</span><br><span class="line">989</span><br><span class="line">990</span><br><span class="line">991</span><br><span class="line">992</span><br><span class="line">993</span><br><span class="line">994</span><br><span class="line">995</span><br><span class="line">996</span><br><span class="line">997</span><br><span class="line">998</span><br><span class="line">999</span><br><span class="line">1000</span><br><span class="line">1001</span><br><span class="line">1002</span><br><span class="line">1003</span><br><span class="line">1004</span><br><span class="line">1005</span><br><span class="line">1006</span><br><span class="line">1007</span><br><span class="line">1008</span><br><span class="line">1009</span><br><span class="line">1010</span><br><span class="line">1011</span><br><span class="line">1012</span><br><span class="line">1013</span><br><span class="line">1014</span><br><span class="line">1015</span><br><span class="line">1016</span><br><span class="line">1017</span><br><span class="line">1018</span><br><span class="line">1019</span><br><span class="line">1020</span><br><span class="line">1021</span><br><span class="line">1022</span><br><span class="line">1023</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"@platforms"</span> : [ <span class="string">"android"</span>, <span class="string">"iPhone"</span>, <span class="string">"iPad"</span> ],</span><br><span class="line">    <span class="attr">"id"</span> : <span class="string">"H553BC94C"</span>, <span class="comment">/*应用的标识，创建应用时自动生成，勿手动修改*/</span></span><br><span class="line">    <span class="attr">"name"</span> : <span class="string">"有课"</span>, <span class="comment">/*应用名称，程序桌面图标名称*/</span></span><br><span class="line">    <span class="attr">"version"</span> : &#123;</span><br><span class="line">        <span class="attr">"name"</span> : <span class="string">"1.3.3"</span>, <span class="comment">/*应用版本名称*/</span></span><br><span class="line">        <span class="attr">"code"</span> : <span class="number">4</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"description"</span> : <span class="string">""</span>, <span class="comment">/*应用描述信息*/</span></span><br><span class="line">    <span class="attr">"icons"</span> : &#123;</span><br><span class="line">        <span class="attr">"72"</span> : <span class="string">"icon.png"</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"launch_path"</span> : <span class="string">"index.html"</span>, <span class="comment">/*应用的入口页面，默认为根目录下的index.html；支持网络地址，必须以http://或https://开头*/</span></span><br><span class="line">    <span class="attr">"developer"</span> : &#123;</span><br><span class="line">        <span class="attr">"name"</span> : <span class="string">""</span>, <span class="comment">/*开发者名称*/</span></span><br><span class="line">        <span class="attr">"email"</span> : <span class="string">""</span>, <span class="comment">/*开发者邮箱地址*/</span></span><br><span class="line">        <span class="attr">"url"</span> : <span class="string">""</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"permissions"</span> : &#123;</span><br><span class="line">        <span class="attr">"Cache"</span> : &#123;</span><br><span class="line">            <span class="attr">"description"</span> : <span class="string">"管理应用缓存"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"Console"</span> : &#123;</span><br><span class="line">            <span class="attr">"description"</span> : <span class="string">"跟踪调试输出日志"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"Events"</span> : &#123;</span><br><span class="line">            <span class="attr">"description"</span> : <span class="string">"应用扩展事件"</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"Push"</span> : &#123;&#125;,</span><br><span class="line">        <span class="attr">"VideoPlayer"</span> : &#123;&#125;,</span><br><span class="line">        <span class="attr">"Speech"</span> : &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"plus"</span> : &#123;</span><br><span class="line"><span class="attr">"locales"</span>:&#123;</span><br><span class="line"><span class="attr">"zh"</span>: &#123;<span class="comment">//中文（简体）  </span></span><br><span class="line"><span class="attr">"name"</span>: <span class="string">"有课"</span>,  </span><br><span class="line"><span class="attr">"ios"</span>: &#123;  </span><br><span class="line"><span class="attr">"privacyDescription"</span> : &#123;</span><br><span class="line">    <span class="attr">"NSPhotoLibraryUsageDescription"</span> : <span class="string">"允许应用访问相册,用来上传图片附件功能"</span>,</span><br><span class="line">    <span class="attr">"NSCameraUsageDescription"</span> : <span class="string">"允许应用使用相机,用来扫描二维码以及拍照功能"</span>,</span><br><span class="line">    <span class="attr">"NSPhotoLibraryAddUsageDescription"</span> : <span class="string">"允许应用保存图片至本机,用来上传图片附件功能"</span>,</span><br><span class="line">    <span class="attr">"NSMicrophoneUsageDescription"</span> : <span class="string">"允许应用使用麦克风,用于老师点评作业使用"</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,  </span><br><span class="line"><span class="attr">"zh-TW"</span>: &#123;<span class="comment">//中文繁体（台湾)</span></span><br><span class="line"><span class="attr">"name"</span>: <span class="string">"有課"</span>,</span><br><span class="line"><span class="attr">"ios"</span>: &#123;</span><br><span class="line"><span class="attr">"privacyDescription"</span> : &#123;</span><br><span class="line">    <span class="attr">"NSPhotoLibraryUsageDescription"</span> : <span class="string">"允許應用訪問相冊,用來上傳圖片附件功能"</span>,</span><br><span class="line">    <span class="attr">"NSCameraUsageDescription"</span> : <span class="string">"允許應用使用相機,用來掃描二維碼以及拍照功能"</span>,</span><br><span class="line">    <span class="attr">"NSPhotoLibraryAddUsageDescription"</span> : <span class="string">"允許應用保存圖片至本機,用來上傳圖片附件功能"</span>,</span><br><span class="line">    <span class="attr">"NSMicrophoneUsageDescription"</span> : <span class="string">"允許應用使用麥克風,用於老師點評作業使用"</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,  </span><br><span class="line"><span class="attr">"zh-HK"</span>: &#123;<span class="comment">//中文繁体（香港）  </span></span><br><span class="line"><span class="attr">"name"</span>: <span class="string">"有課"</span>,</span><br><span class="line"><span class="attr">"ios"</span>: &#123;</span><br><span class="line"><span class="attr">"privacyDescription"</span> : &#123;</span><br><span class="line">    <span class="attr">"NSPhotoLibraryUsageDescription"</span> : <span class="string">"允許應用訪問相冊,用來上傳圖片附件功能"</span>,</span><br><span class="line">    <span class="attr">"NSCameraUsageDescription"</span> : <span class="string">"允許應用使用相機,用來掃描二維碼以及拍照功能"</span>,</span><br><span class="line">    <span class="attr">"NSPhotoLibraryAddUsageDescription"</span> : <span class="string">"允許應用保存圖片至本機,用來上傳圖片附件功能"</span>,</span><br><span class="line">    <span class="attr">"NSMicrophoneUsageDescription"</span> : <span class="string">"允許應用使用麥克風,用於老師點評作業使用"</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;,  </span><br><span class="line"><span class="attr">"en"</span>: &#123;  </span><br><span class="line"><span class="attr">"name"</span>: <span class="string">"UClass"</span>,</span><br><span class="line"><span class="attr">"ios"</span>: &#123;</span><br><span class="line"><span class="attr">"privacyDescription"</span> : &#123;</span><br><span class="line"><span class="attr">"NSPhotoLibraryUsageDescription"</span> : <span class="string">"Alllow UClass to access your album in Settings"</span>,</span><br><span class="line"><span class="attr">"NSCameraUsageDescription"</span> : <span class="string">"Allow UClass to access your camera in Settings"</span>,</span><br><span class="line"><span class="attr">"NSPhotoLibraryAddUsageDescription"</span> : <span class="string">"Alllow UClass to access your album in Settings"</span>,</span><br><span class="line"><span class="attr">"NSMicrophoneUsageDescription"</span> : <span class="string">"Allow UClass to access your microphone in Settings"</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br><span class="line">&#125;  </span><br><span class="line">&#125;,  </span><br><span class="line"><span class="attr">"safearea"</span>:&#123;</span><br><span class="line"><span class="attr">"background"</span>:<span class="string">"#ffffff"</span>,</span><br><span class="line"><span class="attr">"bottom"</span>:&#123;</span><br><span class="line"><span class="attr">"offset"</span>: <span class="string">"auto"</span>    <span class="comment">/*解决iphoneX系列底部横杠问题*/</span></span><br><span class="line">&#125;</span><br><span class="line">&#125;,</span><br><span class="line">        <span class="attr">"splashscreen"</span> : &#123;</span><br><span class="line">            <span class="attr">"autoclose"</span> : <span class="literal">true</span>, <span class="comment">/*是否自动关闭程序启动界面，true表示应用加载应用入口页面后自动关闭；false则需调plus.navigator.closeSplashscreen()关闭*/</span></span><br><span class="line">            <span class="attr">"waiting"</span> : <span class="literal">false</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"popGesture"</span> : <span class="string">"close"</span>, <span class="comment">/*设置应用默认侧滑返回关闭Webview窗口，"none"为无侧滑返回功能，"hide"为侧滑隐藏Webview窗口。参考http://ask.dcloud.net.cn/article/102*/</span></span><br><span class="line">        <span class="attr">"runmode"</span> : <span class="string">"normal"</span>, <span class="comment">/*应用的首次启动运行模式，可取liberate或normal，liberate模式在第一次启动时将解压应用资源（Android平台File API才可正常访问_www目录）*/</span></span><br><span class="line">        <span class="attr">"signature"</span> : <span class="string">"Sk9JTiBVUyBtYWlsdG86aHIyMDEzQGRjbG91ZC5pbw=="</span>, <span class="comment">/*可选，保留给应用签名，暂不使用*/</span></span><br><span class="line">        <span class="attr">"distribute"</span> : &#123;</span><br><span class="line">            <span class="attr">"plugins"</span> : &#123;</span><br><span class="line">                <span class="attr">"push"</span> : &#123;</span><br><span class="line">                    <span class="attr">"igexin"</span> : &#123;</span><br><span class="line">                        <span class="attr">"appid"</span> : <span class="string">"PLGJS93Osc9QhkjR2iiW41"</span>,</span><br><span class="line">                        <span class="attr">"appkey"</span> : <span class="string">"hkKagRaTFV6KhZuyKnEaF9"</span>,</span><br><span class="line">                        <span class="attr">"appsecret"</span> : <span class="string">"xG4dJznxZs6xD5M8yQBl39"</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">"speech"</span> : &#123;</span><br><span class="line">                    <span class="attr">"ifly"</span> : &#123;&#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">"payment"</span> : &#123;&#125;,</span><br><span class="line">                <span class="attr">"oauth"</span> : &#123;&#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">"apple"</span> : &#123;</span><br><span class="line">                <span class="attr">"appid"</span> : <span class="string">""</span>, <span class="comment">/*iOS应用标识，苹果开发网站申请的appid，如io.dcloud.HelloH5*/</span></span><br><span class="line">                <span class="attr">"mobileprovision"</span> : <span class="string">""</span>, <span class="comment">/*iOS应用打包配置文件*/</span></span><br><span class="line">                <span class="attr">"password"</span> : <span class="string">""</span>, <span class="comment">/*iOS应用打包个人证书导入密码*/</span></span><br><span class="line">                <span class="attr">"p12"</span> : <span class="string">""</span>, <span class="comment">/*iOS应用打包个人证书，打包配置文件关联的个人证书*/</span></span><br><span class="line">                <span class="attr">"devices"</span> : <span class="string">"universal"</span>, <span class="comment">/*iOS应用支持的设备类型，可取值iphone/ipad/universal*/</span></span><br><span class="line">                <span class="attr">"frameworks"</span> : [],</span><br><span class="line">                <span class="attr">"privacyDescription"</span> : &#123;</span><br><span class="line">                    <span class="attr">"NSPhotoLibraryUsageDescription"</span> : <span class="string">"允许应用访问相册,用来上传图片附件功能"</span>,</span><br><span class="line">                    <span class="attr">"NSCameraUsageDescription"</span> : <span class="string">"允许应用使用相机,用来扫描二维码以及拍照功能"</span>,</span><br><span class="line">                    <span class="attr">"NSPhotoLibraryAddUsageDescription"</span> : <span class="string">"允许应用保存图片至本机，用来上传图片附件功能"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">"google"</span> : &#123;</span><br><span class="line">                <span class="attr">"packagename"</span> : <span class="string">""</span>, <span class="comment">/*Android应用包名，如io.dcloud.HelloH5*/</span></span><br><span class="line">                <span class="attr">"keystore"</span> : <span class="string">""</span>, <span class="comment">/*Android应用打包使用的密库文件*/</span></span><br><span class="line">                <span class="attr">"password"</span> : <span class="string">""</span>, <span class="comment">/*Android应用打包使用密钥库中证书的密码*/</span></span><br><span class="line">                <span class="attr">"aliasname"</span> : <span class="string">""</span>, <span class="comment">/*Android应用打包使用密钥库中证书的别名*/</span></span><br><span class="line">                <span class="attr">"permissions"</span> : [</span><br><span class="line">                    <span class="string">"&lt;uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\"/&gt;"</span>,</span><br><span class="line">                    <span class="string">"&lt;uses-permission android:name=\"android.permission.ACCESS_WIFI_STATE\"/&gt;"</span>,</span><br><span class="line">                    <span class="string">"&lt;uses-permission android:name=\"android.permission.CALL_PHONE\"/&gt;"</span>,</span><br><span class="line">                    <span class="string">"&lt;uses-permission android:name=\"android.permission.CAMERA\"/&gt;"</span>,</span><br><span class="line">                    <span class="string">"&lt;uses-permission android:name=\"android.permission.CHANGE_NETWORK_STATE\"/&gt;"</span>,</span><br><span class="line">                    <span class="string">"&lt;uses-permission android:name=\"android.permission.INTERNET\"/&gt;"</span>,</span><br><span class="line">                    <span class="string">"&lt;uses-permission android:name=\"android.permission.MODIFY_AUDIO_SETTINGS\"/&gt;"</span>,</span><br><span class="line">                    <span class="string">"&lt;uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\"/&gt;"</span>,</span><br><span class="line">                    <span class="string">"&lt;uses-permission android:name=\"android.permission.READ_PHONE_STATE\"/&gt;"</span>,</span><br><span class="line">                    <span class="string">"&lt;uses-permission android:name=\"android.permission.RECEIVE_BOOT_COMPLETED\"/&gt;"</span>,</span><br><span class="line">                    <span class="string">"&lt;uses-permission android:name=\"android.permission.RECORD_AUDIO\"/&gt;"</span>,</span><br><span class="line">                    <span class="string">"&lt;uses-permission android:name=\"android.permission.SYSTEM_ALERT_WINDOW\"/&gt;"</span>,</span><br><span class="line">                    <span class="string">"&lt;uses-permission android:name=\"android.permission.VIBRATE\"/&gt;"</span>,</span><br><span class="line">                    <span class="string">"&lt;uses-permission android:name=\"android.permission.WAKE_LOCK\"/&gt;"</span>,</span><br><span class="line">                    <span class="string">"&lt;uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\"/&gt;"</span></span><br><span class="line">                ]</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">"orientation"</span> : [ <span class="string">"portrait-primary"</span> ], <span class="comment">/*应用支持的方向，portrait-primary：竖屏正方向；portrait-secondary：竖屏反方向；landscape-primary：横屏正方向；landscape-secondary：横屏反方向*/</span></span><br><span class="line">            <span class="attr">"icons"</span> : &#123;</span><br><span class="line">                <span class="attr">"ios"</span> : &#123;</span><br><span class="line">                    <span class="attr">"prerendered"</span> : <span class="literal">true</span>, <span class="comment">/*应用图标是否已经高亮处理，在iOS6及以下设备上有效*/</span></span><br><span class="line"></span><br><span class="line">                    <span class="comment">/*应用图标，分辨率：512x512，用于自动生成各种尺寸程序图标*/</span></span><br><span class="line">                    <span class="attr">"iphone"</span> : &#123;</span><br><span class="line">                        <span class="attr">"normal"</span> : <span class="string">""</span>, <span class="comment">/*iPhone3/3GS程序图标，分辨率：57x57*/</span></span><br><span class="line">                        <span class="attr">"retina"</span> : <span class="string">""</span>, <span class="comment">/*iPhone4程序图标，分辨率：114x114*/</span></span><br><span class="line"></span><br><span class="line">                        <span class="comment">/*iPhone4S/5/6程序图标，分辨率：120x120*/</span><span class="comment">/*iPhone6 Plus程序图标，分辨率：180x180*/</span></span><br><span class="line">                        <span class="attr">"spotlight-normal"</span> : <span class="string">""</span>, <span class="comment">/*iPhone3/3GS Spotlight搜索程序图标，分辨率：29x29*/</span></span><br><span class="line">                        <span class="attr">"spotlight-retina"</span> : <span class="string">""</span>, <span class="comment">/*iPhone4 Spotlight搜索程序图标，分辨率：58x58*/</span></span><br><span class="line"></span><br><span class="line">                        <span class="comment">/*iPhone4S/5/6 Spotlight搜索程序图标，分辨率：80x80*/</span></span><br><span class="line">                        <span class="attr">"settings-normal"</span> : <span class="string">""</span>, <span class="comment">/*iPhone4设置页面程序图标，分辨率：29x29*/</span></span><br><span class="line"></span><br><span class="line">                        <span class="comment">/*iPhone4S/5/6设置页面程序图标，分辨率：58x58*/</span></span><br><span class="line">                        <span class="attr">"app@2x"</span> : <span class="string">"unpackage/res/icons/120x120.png"</span>,</span><br><span class="line">                        <span class="attr">"app@3x"</span> : <span class="string">"unpackage/res/icons/180x180.png"</span>,</span><br><span class="line">                        <span class="attr">"settings@3x"</span> : <span class="string">"unpackage/res/icons/87x87.png"</span>,</span><br><span class="line">                        <span class="attr">"settings@2x"</span> : <span class="string">"unpackage/res/icons/58x58.png"</span>,</span><br><span class="line">                        <span class="attr">"spotlight@2x"</span> : <span class="string">"unpackage/res/icons/80x80.png"</span>,</span><br><span class="line">                        <span class="attr">"spotlight@3x"</span> : <span class="string">"unpackage/res/icons/120x120.png"</span>,</span><br><span class="line">                        <span class="attr">"notification@3x"</span> : <span class="string">"unpackage/res/icons/60x60.png"</span>,</span><br><span class="line">                        <span class="attr">"notification@2x"</span> : <span class="string">"unpackage/res/icons/40x40.png"</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="attr">"ipad"</span> : &#123;</span><br><span class="line">                        <span class="attr">"normal"</span> : <span class="string">""</span>, <span class="comment">/*iPad普通屏幕程序图标，分辨率：72x72*/</span></span><br><span class="line">                        <span class="attr">"retina"</span> : <span class="string">""</span>, <span class="comment">/*iPad高分屏程序图标，分辨率：144x144*/</span></span><br><span class="line"></span><br><span class="line">                        <span class="comment">/*iPad iOS7程序图标，分辨率：76x76*/</span><span class="comment">/*iPad iOS7高分屏程序图标，分辨率：152x152*/</span></span><br><span class="line">                        <span class="attr">"spotlight-normal"</span> : <span class="string">""</span>, <span class="comment">/*iPad Spotlight搜索程序图标，分辨率：50x50*/</span></span><br><span class="line">                        <span class="attr">"spotlight-retina"</span> : <span class="string">""</span>, <span class="comment">/*iPad高分屏Spotlight搜索程序图标，分辨率：100x100*/</span></span><br><span class="line"></span><br><span class="line">                        <span class="comment">/*iPad iOS7 Spotlight搜索程序图标，分辨率：40x40*/</span><span class="comment">/*iPad iOS7高分屏Spotlight搜索程序图标，分辨率：80x80*/</span><span class="comment">/*iPad设置页面程序图标，分辨率：29x29*/</span></span><br><span class="line">                        <span class="attr">"app"</span> : <span class="string">"unpackage/res/icons/76x76.png"</span>,</span><br><span class="line">                        <span class="attr">"app@2x"</span> : <span class="string">"unpackage/res/icons/152x152.png"</span>,</span><br><span class="line">                        <span class="attr">"settings"</span> : <span class="string">"unpackage/res/icons/29x29.png"</span>,</span><br><span class="line">                        <span class="attr">"proapp@2x"</span> : <span class="string">"unpackage/res/icons/167x167.png"</span>,</span><br><span class="line">                        <span class="attr">"spotlight"</span> : <span class="string">"unpackage/res/icons/40x40.png"</span>,</span><br><span class="line">                        <span class="attr">"settings@2x"</span> : <span class="string">"unpackage/res/icons/58x58.png"</span>,</span><br><span class="line">                        <span class="attr">"notification"</span> : <span class="string">"unpackage/res/icons/20x20.png"</span>,</span><br><span class="line">                        <span class="attr">"spotlight@2x"</span> : <span class="string">"unpackage/res/icons/80x80.png"</span>,</span><br><span class="line">                        <span class="attr">"notification@2x"</span> : <span class="string">"unpackage/res/icons/40x40.png"</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="attr">"appstore"</span> : <span class="string">"unpackage/res/icons/1024x1024.png"</span></span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">"android"</span> : &#123;</span><br><span class="line">                    <span class="attr">"mdpi"</span> : <span class="string">"unpackage/res/icons/48x48.png"</span>, <span class="comment">/*普通屏程序图标，分辨率：48x48*/</span></span><br><span class="line">                    <span class="attr">"ldpi"</span> : <span class="string">"unpackage/res/icons/48x48.png"</span>, <span class="comment">/*大屏程序图标，分辨率：48x48*/</span></span><br><span class="line">                    <span class="attr">"hdpi"</span> : <span class="string">"unpackage/res/icons/72x72.png"</span>, <span class="comment">/*高分屏程序图标，分辨率：72x72*/</span></span><br><span class="line">                    <span class="attr">"xhdpi"</span> : <span class="string">"unpackage/res/icons/96x96.png"</span>, <span class="comment">/*720P高分屏程序图标，分辨率：96x96*/</span></span><br><span class="line">                    <span class="attr">"xxhdpi"</span> : <span class="string">"unpackage/res/icons/144x144.png"</span>,</span><br><span class="line">                    <span class="attr">"xxxhdpi"</span> : <span class="string">"unpackage/res/icons/192x192.png"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">"splashscreen"</span> : &#123;</span><br><span class="line">                <span class="attr">"ios"</span> : &#123;</span><br><span class="line">                    <span class="attr">"iphone"</span> : &#123;</span><br><span class="line">                        <span class="attr">"default"</span> : <span class="string">""</span>, <span class="comment">/*iPhone3启动图片选，分辨率：320x480*/</span></span><br><span class="line">                        <span class="attr">"retina35"</span> : <span class="string">"D:/work/uclass-xiaobu/sc-wxstu/static/images/app_config/Android720x1280.png"</span>, <span class="comment">/*3.5英寸设备(iPhone4)启动图片，分辨率：640x960*/</span></span><br><span class="line">                        <span class="attr">"retina40"</span> : <span class="string">"D:/work/uclass-xiaobu/sc-wxstu/static/images/app_config/Android720x1280.png"</span>, <span class="comment">/*4.0 英寸设备(iPhone5/iPhone5s)启动图片，分辨率：640x1136*/</span></span><br><span class="line">                        <span class="attr">"retina47"</span> : <span class="string">"D:/work/uclass-xiaobu/sc-wxstu/static/images/app_config/Android375x667.png"</span>, <span class="comment">/*4.7 英寸设备(iPhone6)启动图片，分辨率：750x1334*/</span></span><br><span class="line">                        <span class="attr">"retina55"</span> : <span class="string">"D:/work/uclass-xiaobu/sc-wxstu/static/images/app_config/iPhoneX1125x2436.png"</span>, <span class="comment">/*5.5 英寸设备(iPhone6 Plus)启动图片，分辨率：1242x2208*/</span></span><br><span class="line">                        <span class="attr">"retina55l"</span> : <span class="string">""</span>,</span><br><span class="line">                        <span class="attr">"iphonex"</span> : <span class="string">"D:/work/uclass-xiaobu/sc-wxstu/static/images/app_config/iPhoneX1125x2436.png"</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="attr">"ipad"</span> : &#123;</span><br><span class="line">                        <span class="attr">"portrait"</span> : <span class="string">"D:/work/uclass-xiaobu/sc-wxstu/static/images/app_config/Android720x1280.png"</span>, <span class="comment">/*iPad竖屏启动图片，分辨率：768x1004*/</span></span><br><span class="line"></span><br><span class="line">                        <span class="comment">/*iPad高分屏竖屏图片，分辨率：1536x2008*/</span></span><br><span class="line">                        <span class="attr">"landscape"</span> : <span class="string">""</span>, <span class="comment">/*iPad横屏启动图片，分辨率：1024x748*/</span></span><br><span class="line">                        <span class="attr">"landscape-retina"</span> : <span class="string">""</span>, <span class="comment">/*iPad高分屏横屏启动图片，分辨率：2048x1496*/</span></span><br><span class="line">                        <span class="attr">"portrait7"</span> : <span class="string">"D:/work/uclass-xiaobu/sc-wxstu/static/images/app_config/Android720x1280.png"</span>, <span class="comment">/*iPad iOS7竖屏启动图片，分辨率：768x1024*/</span></span><br><span class="line">                        <span class="attr">"portrait-retina7"</span> : <span class="string">"D:/work/uclass-xiaobu/sc-wxstu/static/images/app_config/ipad 1536X2048.png"</span>, <span class="comment">/*iPad iOS7高分屏竖屏图片，分辨率：1536x2048*/</span></span><br><span class="line">                        <span class="attr">"landscape7"</span> : <span class="string">"D:/work/uclass-xiaobu/sc-wxstu/static/images/app_config/Android1080x1920.png"</span>, <span class="comment">/*iPad iOS7横屏启动图片，分辨率：1024x768*/</span></span><br><span class="line">                        <span class="attr">"landscape-retina7"</span> : <span class="string">""</span>,</span><br><span class="line">                        <span class="attr">"portrait-retina"</span> : <span class="string">"D:/work/uclass-xiaobu/sc-wxstu/static/images/app_config/ipad 1536X2048.png"</span></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;,</span><br><span class="line">                <span class="attr">"android"</span> : &#123;</span><br><span class="line">                    <span class="attr">"mdpi"</span> : <span class="string">""</span>, <span class="comment">/*普通屏启动图片，分辨率：240x282*/</span></span><br><span class="line">                    <span class="attr">"ldpi"</span> : <span class="string">""</span>, <span class="comment">/*大屏启动图片，分辨率：320x442*/</span></span><br><span class="line">                    <span class="attr">"hdpi"</span> : <span class="string">"D:/work/uclass-xiaobu/sc-wxstu/static/images/app_config/Android375x667.png"</span>, <span class="comment">/*高分屏启动图片，分辨率：480x762*/</span></span><br><span class="line">                    <span class="attr">"xhdpi"</span> : <span class="string">"D:/work/uclass-xiaobu/sc-wxstu/static/images/app_config/Android720x1280.png"</span>, <span class="comment">/*720P高分屏启动图片，分辨率：720x1242*/</span></span><br><span class="line">                    <span class="attr">"xxhdpi"</span> : <span class="string">"D:/work/uclass-xiaobu/sc-wxstu/static/images/app_config/Android1080x1920.png"</span></span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="attr">"dependencies"</span> : &#123;</span><br><span class="line">        <span class="attr">"pages"</span> : &#123;</span><br><span class="line">            <span class="attr">"index.html"</span> : &#123;</span><br><span class="line">                <span class="attr">"href"</span> : <span class="string">"index.html"</span>,</span><br><span class="line">                <span class="attr">"resources"</span> : [ <span class="string">"static/svg/loading.svg"</span> ],</span><br><span class="line">                <span class="attr">"priority"</span> : <span class="number">0</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">"idle"</span> : &#123;</span><br><span class="line">            <span class="attr">"resources"</span> : [</span><br><span class="line">                <span class="string">"static/images/teacher/delete_img.png"</span>,</span><br><span class="line">                <span class="string">"static/js/26.2e209f7a31c67645cd17.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/wd_btn_xz@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/sjz_qh@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/40.0d52cfa1c7d05d87380a.js"</span>,</span><br><span class="line">                <span class="string">"static/js/5.70e29c0a6329537db4b2.js"</span>,</span><br><span class="line">                <span class="string">"static/js/16.18e0ca2fb6b0fdb39904.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/course/3.png"</span>,</span><br><span class="line">                <span class="string">"static/images/sjz_g@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/tag_xq_tz@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/76.a945c2b73d728c061af3.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/sjz_sh@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/good_big.png"</span>,</span><br><span class="line">                <span class="string">"static/js/record.js"</span>,</span><br><span class="line">                <span class="string">"static/js/33.f53b62dd3c0c6619122b.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/footer_msg.png"</span>,</span><br><span class="line">                <span class="string">"static/lang/zh-CN.js"</span>,</span><br><span class="line">                <span class="string">"static/images/wd_kp_bg@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/course_bg_gray@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/14.68e1922ee459f196bf8b.js.map"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/hu.js"</span>,</span><br><span class="line">                <span class="string">"static/img/8-bg.07ae696.png"</span>,</span><br><span class="line">                <span class="string">"static/js/6.b2048bdcbb1f969aefdf.js"</span>,</span><br><span class="line">                <span class="string">"static/js/56.fc5005d969da42c68bc0.js"</span>,</span><br><span class="line">                <span class="string">"static/js/27.1326df69a26889652fd6.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/xitong.png"</span>,</span><br><span class="line">                <span class="string">"static/images/login/ico_fuwuqidizhi@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/css/teacher/courseware/detail.css"</span>,</span><br><span class="line">                <span class="string">"static/images/courseware/courseware_blue.png"</span>,</span><br><span class="line">                <span class="string">"static/images/quiz_icon/url.png"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/ko.js"</span>,</span><br><span class="line">                <span class="string">"static/images/login/ico_mima.png"</span>,</span><br><span class="line">                <span class="string">"static/js/teacher/reg.js"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/ja.js"</span>,</span><br><span class="line">                <span class="string">"static/js/71.6905b7eca93d75949006.js"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/no_n.png"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/bg.js"</span>,</span><br><span class="line">                <span class="string">"static/js/10.b9083fe2d547cdc4b9c6.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/icon_kecheng@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/courseware/responder-ok.png"</span>,</span><br><span class="line">                <span class="string">"static/images/more@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/edit@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/39.2c7f53f140893d7d48d3.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/renwu.png"</span>,</span><br><span class="line">                <span class="string">"static/js/util.js"</span>,</span><br><span class="line">                <span class="string">"static/css/student/course/interaction.css"</span>,</span><br><span class="line">                <span class="string">"static/js/35.6cb97a5cf8e96c570a3b.js"</span>,</span><br><span class="line">                <span class="string">"static/images/file_icon/url.png"</span>,</span><br><span class="line">                <span class="string">"static/js/40.0d52cfa1c7d05d87380a.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/course/icon_saoma.png"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/footer_course1.png"</span>,</span><br><span class="line">                <span class="string">"static/js/5.70e29c0a6329537db4b2.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/wd_launch_s@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/app_config/start_icon2.png"</span>,</span><br><span class="line">                <span class="string">"static/js/42.b6dd165ebc6c1378bcf8.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/wd_tx_bg@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_face_female.png"</span>,</span><br><span class="line">                <span class="string">"static/images/course/user.png"</span>,</span><br><span class="line">                <span class="string">"static/images/file_icon/ppt.png"</span>,</span><br><span class="line">                <span class="string">"static/js/16.18e0ca2fb6b0fdb39904.js"</span>,</span><br><span class="line">                <span class="string">"static/js/27.1326df69a26889652fd6.js"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/ka.js"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/courseList_bg_red.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/blackpic@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/courseware_zi.png"</span>,</span><br><span class="line">                <span class="string">"static/images/login/ico_tishi@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/quiz_icon/pdf.png"</span>,</span><br><span class="line">                <span class="string">"static/images/course/2-s.png"</span>,</span><br><span class="line">                <span class="string">"static/js/32.26a5a6fd92f00e0289c2.js.map"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/sv.js"</span>,</span><br><span class="line">                <span class="string">"static/images/course/2-bg.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/card-green.png"</span>,</span><br><span class="line">                <span class="string">"static/css/app.a147bb1114e3b5709cf48eb9c1574424.css"</span>,</span><br><span class="line">                <span class="string">"static/img/5.b8926d4.png"</span>,</span><br><span class="line">                <span class="string">"static/images/file_icon/audio.png"</span>,</span><br><span class="line">                <span class="string">"static/js/19.85afabdaf045c2519b74.js"</span>,</span><br><span class="line">                <span class="string">"static/images/file_icon/excel-s.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/plus.png"</span>,</span><br><span class="line">                <span class="string">"static/images/wd_bg_c@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/login/banner@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/btn-group.png"</span>,</span><br><span class="line">                <span class="string">"static/images/wd_cw_bg@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/65.821ff86b65ac72900f2f.js"</span>,</span><br><span class="line">                <span class="string">"static/images/tag_g@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/css/student/task.css"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/course_bg_blue@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/24.77d4995a6babde8d114f.js.map"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/th_TH.js"</span>,</span><br><span class="line">                <span class="string">"static/css/courseDetailCommon.css"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/loading.gif"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/pt_BR.js"</span>,</span><br><span class="line">                <span class="string">"static/images/tag_t@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/girl.png"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/voice-rec.png"</span>,</span><br><span class="line">                <span class="string">"static/images/wd_launch_s@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/top@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/19.85afabdaf045c2519b74.js.map"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/de.js"</span>,</span><br><span class="line">                <span class="string">"static/css/teacher/missionDetail.css"</span>,</span><br><span class="line">                <span class="string">"static/js/56.fc5005d969da42c68bc0.js.map"</span>,</span><br><span class="line">                <span class="string">"static/js/74.078e4d992daa0653a8cc.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/quiz_icon/video.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/msg.png"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_xz_g@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/tag_xh_bg@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/courseList_bg_zi.png"</span>,</span><br><span class="line">                <span class="string">"static/img/6-bg.70615bc.png"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_xz_g@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/ku_IQ.js"</span>,</span><br><span class="line">                <span class="string">"static/js/68.733eacf4768630deb831.js.map"</span>,</span><br><span class="line">                <span class="string">"static/img/7-bg.2f62feb.png"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_nice_l@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/rednow@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/more_w@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/17.6abbaa99245e826047f5.js.map"</span>,</span><br><span class="line">                <span class="string">"static/js/37.65535faa1f357f16f702.js"</span>,</span><br><span class="line">                <span class="string">"static/images/file_icon/video.png"</span>,</span><br><span class="line">                <span class="string">"static/images/tag_g_1@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/courseware_orange.png"</span>,</span><br><span class="line">                <span class="string">"static/css/quiz.css"</span>,</span><br><span class="line">                <span class="string">"static/images/mustcard@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/quiz_icon/quiz-wrong.png"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_mes_g@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/config/app-config.json"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/no3.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/shangla_more.png"</span>,</span><br><span class="line">                <span class="string">"static/images/boy@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/css/student/group/vote.css"</span>,</span><br><span class="line">                <span class="string">"static/images/wd_btn_mr@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/9.005d3c492b7abd559677.js"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/da.js"</span>,</span><br><span class="line">                <span class="string">"static/images/pic@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/USB@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/check_box2.png"</span>,</span><br><span class="line">                <span class="string">"static/js/55.4ab8e60895318983eaf6.js"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_cy@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/footer_msg.png"</span>,</span><br><span class="line">                <span class="string">"static/css/student/group/index.css"</span>,</span><br><span class="line">                <span class="string">"static/css/course.css"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_right_g@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/page@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/btn_wd_tj@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/delete_img.png"</span>,</span><br><span class="line">                <span class="string">"static/images/up_rs@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_right_s_g@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/rar.png"</span>,</span><br><span class="line">                <span class="string">"static/font/icomoon.ttf"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/minx.png"</span>,</span><br><span class="line">                <span class="string">"static/css/teacher/course/detail.css"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/duoxuan_small.png"</span>,</span><br><span class="line">                <span class="string">"static/js/46.2aced9230cd815686141.js"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/course_bg_yellow@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/quiz_icon/ppt.png"</span>,</span><br><span class="line">                <span class="string">"static/images/course/4.png"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/el.js"</span>,</span><br><span class="line">                <span class="string">"static/images/delete@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/photoswipe/default-skin/preloader.gif"</span>,</span><br><span class="line">                <span class="string">"static/js/class-quiz/index.js"</span>,</span><br><span class="line">                <span class="string">"static/img/4.b0801bb.png"</span>,</span><br><span class="line">                <span class="string">"static/images/launch@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_xh_r@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/courseList_bg_zi@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/card_yellow.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/shangla_more1.png"</span>,</span><br><span class="line">                <span class="string">"static/js/53.fcea8d2e276463b5f13e.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/dele_s@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_book_g@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/courseList_bg_pink.png"</span>,</span><br><span class="line">                <span class="string">"static/images/course/report-bg.png"</span>,</span><br><span class="line">                <span class="string">"static/images/login/ico_mima@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/28.5818d59dace26f3dbf8e.js.map"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/plupload.full.min.js"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/nl.js"</span>,</span><br><span class="line">                <span class="string">"static/js/68.733eacf4768630deb831.js"</span>,</span><br><span class="line">                <span class="string">"static/images/wechat/student.png"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_mes@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/list_delete.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/courseList_bg_green@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/close_tc@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/photoswipe/default-skin/default-skin.svg"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/moxie.js"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/moxie.min.js"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_mes@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/quiz_icon/ppt_1.png"</span>,</span><br><span class="line">                <span class="string">"static/js/23.02b9f64c1831f5f6d17c.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_fin@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/54.019b9806e164eb68499e.js"</span>,</span><br><span class="line">                <span class="string">"static/images/file_icon/url-s.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/danxuan_small.png"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/whiteplus.png"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/footer_msg_on.png"</span>,</span><br><span class="line">                <span class="string">"static/images/login/ico_xuehao.png"</span>,</span><br><span class="line">                <span class="string">"static/js/22.1372eba9688406e9a888.js.map"</span>,</span><br><span class="line">                <span class="string">"static/js/49.34a5ee6e610c7934bf29.js.map"</span>,</span><br><span class="line">                <span class="string">"static/css/common.css"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/green_now_1.png"</span>,</span><br><span class="line">                <span class="string">"static/js/photoswipe/photoswipe.min.js"</span>,</span><br><span class="line">                <span class="string">"static/js/63.d3510f4e0e4eefe64c6b.js"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/card_red.png"</span>,</span><br><span class="line">                <span class="string">"static/js/manifest.da10c0ea397152ee43b4.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/wd_bg_z@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/whiteplus.png"</span>,</span><br><span class="line">                <span class="string">"static/images/sjz_g@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/close_tc@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/course/course-common.js"</span>,</span><br><span class="line">                <span class="string">"static/css/student/course/detail.css"</span>,</span><br><span class="line">                <span class="string">"static/img/8.111135d.png"</span>,</span><br><span class="line">                <span class="string">"static/images/sjz_qh@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/50.b0c4c66c0111e1e3635d.js"</span>,</span><br><span class="line">                <span class="string">"static/js/8.ea9c8e9d4b70d277e92b.js.map"</span>,</span><br><span class="line">                <span class="string">"static/js/13.22c2b93aa0508d520996.js"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/ru.js"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_xz_w@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/photoswipe/default-skin/default-skin.css"</span>,</span><br><span class="line">                <span class="string">"static/images/course/5-bg.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/daantongji.png"</span>,</span><br><span class="line">                <span class="string">"static/js/photoswipe/photoswipe.css"</span>,</span><br><span class="line">                <span class="string">"static/images/wd_bg_sh@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/9.005d3c492b7abd559677.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/courseList_bg_green.png"</span>,</span><br><span class="line">                <span class="string">"static/js/63.d3510f4e0e4eefe64c6b.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/close@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/footer_mine_on.png"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_book@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/img/word.a91ffb8.png"</span>,</span><br><span class="line">                <span class="string">"static/images/pic-s@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/footer_course_on1.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/course_bg_zi@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/btn_r_b@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/48.0e1627cbf94504061dc7.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/courseware/courseware_orange.png"</span>,</span><br><span class="line">                <span class="string">"static/images/app_config/return.png"</span>,</span><br><span class="line">                <span class="string">"static/images/app_config/Android720x1280.png"</span>,</span><br><span class="line">                <span class="string">"static/images/personalCenter/jiantou_right@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_t@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/css/teacher/missionItem.css"</span>,</span><br><span class="line">                <span class="string">"static/js/0.5a0076969dd89e2068d6.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/up_rs@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/course/icon_saoma@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/course/1-bg.png"</span>,</span><br><span class="line">                <span class="string">"static/images/quiz_icon/excel.png"</span>,</span><br><span class="line">                <span class="string">"static/css/student/group/vote-result.css"</span>,</span><br><span class="line">                <span class="string">"static/images/page@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/course_bg_green@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/logo-admin-login.png"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_right_s_g@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/tag_xq_zs@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/ketang.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/left_line.png"</span>,</span><br><span class="line">                <span class="string">"static/js/29.6eaeabde1c2d204e7fb2.js.map"</span>,</span><br><span class="line">                <span class="string">"static/css/student/course.css"</span>,</span><br><span class="line">                <span class="string">"static/js/60.2be964a16727732621bd.js.map"</span>,</span><br><span class="line">                <span class="string">"static/js/57.a0ab6885cde4b53cddf3.js.map"</span>,</span><br><span class="line">                <span class="string">"static/css/cropper.css"</span>,</span><br><span class="line">                <span class="string">"static/images/course/1.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/ico_now@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/course/7-bg.png"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/plupload.dev.js"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/right_line.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/duoxuan_samll1.png"</span>,</span><br><span class="line">                <span class="string">"static/js/62.df120f08dd6de7cb3ad5.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/xiala_more.png"</span>,</span><br><span class="line">                <span class="string">"static/images/sjz_sh@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/panduan_small.png"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/sk.js"</span>,</span><br><span class="line">                <span class="string">"static/js/38.07570ba8f93e5b1da25f.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/footer_course.png"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_f@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/73.bd7bcfbcb7596fe607ca.js"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/wenda1.png"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_r@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/2.479db8c5381e52b4094b.js.map"</span>,</span><br><span class="line">                <span class="string">"static/js/17.6abbaa99245e826047f5.js"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/list_edit.png"</span>,</span><br><span class="line">                <span class="string">"static/images/pic_delete@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/tag_g_1@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/wd_cw_bg@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/delete@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/75.f75b137dff93584306c2.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/dianxing.png"</span>,</span><br><span class="line">                <span class="string">"static/images/course/2.png"</span>,</span><br><span class="line">                <span class="string">"static/js/zepto.min.js"</span>,</span><br><span class="line">                <span class="string">"static/images/pic-s@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/css/teacher/group/stu-move.css"</span>,</span><br><span class="line">                <span class="string">"static/images/btn_r_w@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/close@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/54.019b9806e164eb68499e.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/me_g@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/74.078e4d992daa0653a8cc.js"</span>,</span><br><span class="line">                <span class="string">"static/css/teacher/course/groupDetail.css"</span>,</span><br><span class="line">                <span class="string">"static/images/wd_bg_sh@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/37.65535faa1f357f16f702.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/file_icon/word.png"</span>,</span><br><span class="line">                <span class="string">"static/images/word@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/add-stu.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/danxuan1.png"</span>,</span><br><span class="line">                <span class="string">"static/images/course/8-s.png"</span>,</span><br><span class="line">                <span class="string">"static/css/teacher/group/info.css"</span>,</span><br><span class="line">                <span class="string">"static/images/login/ico_tishi.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/duoxuan1.png"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/close.png"</span>,</span><br><span class="line">                <span class="string">"static/images/file_icon/excel.png"</span>,</span><br><span class="line">                <span class="string">"static/js/33.f53b62dd3c0c6619122b.js"</span>,</span><br><span class="line">                <span class="string">"static/images/quiz_icon/video_1.png"</span>,</span><br><span class="line">                <span class="string">"static/css/student/discuss/free.css"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/panduan_small1.png"</span>,</span><br><span class="line">                <span class="string">"static/js/36.e2314e7b3fdff24cc7c0.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/image.png"</span>,</span><br><span class="line">                <span class="string">"static/js/3.5776986484d75528975e.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/file_icon/ppt-s.png"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/et.js"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/red_now.png"</span>,</span><br><span class="line">                <span class="string">"static/images/btn_r_w@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/55.4ab8e60895318983eaf6.js.map"</span>,</span><br><span class="line">                <span class="string">"static/js/45.651e51522305da41208a.js.map"</span>,</span><br><span class="line">                <span class="string">"static/js/25.e8357b9f3da064dc2104.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/wd_btn_xz@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/courseware/responder-bg.png"</span>,</span><br><span class="line">                <span class="string">"static/fonts/MaterialIcons-Regular.570eb83.woff2"</span>,</span><br><span class="line">                <span class="string">"static/images/tag_tx_zz@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/audio-1.png"</span>,</span><br><span class="line">                <span class="string">"static/js/72.b18f4d06e605b404b0c9.js"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/list_delete_course.png"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/fa.js"</span>,</span><br><span class="line">                <span class="string">"static/images/quiz_icon/pdf_1.png"</span>,</span><br><span class="line">                <span class="string">"static/css/student/group/jump.css"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_right@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/38.07570ba8f93e5b1da25f.js"</span>,</span><br><span class="line">                <span class="string">"static/js/photoswipe/photoswipe-ui-default.js"</span>,</span><br><span class="line">                <span class="string">"static/js/61.f653095737f99f319a58.js"</span>,</span><br><span class="line">                <span class="string">"static/img/1.fc2374e.png"</span>,</span><br><span class="line">                <span class="string">"static/js/76.a945c2b73d728c061af3.js"</span>,</span><br><span class="line">                <span class="string">"static/js/30.492abee30cefd9a94f5e.js.map"</span>,</span><br><span class="line">                <span class="string">"static/js/0.5a0076969dd89e2068d6.js"</span>,</span><br><span class="line">                <span class="string">"static/js/29.6eaeabde1c2d204e7fb2.js"</span>,</span><br><span class="line">                <span class="string">"static/img/1-bg.f9622db.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/courseList_bg_blue.png"</span>,</span><br><span class="line">                <span class="string">"static/js/66.bc9e62a02f6b6dffba73.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/share.png"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_nice_s@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/tag_xh_bg@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/course/3-s.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/dianzan.png"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_nice_l@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/btn_wd_tj@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/nice@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/53.fcea8d2e276463b5f13e.js"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/courseware_green_left.png"</span>,</span><br><span class="line">                <span class="string">"static/images/course/6-s.png"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/it.js"</span>,</span><br><span class="line">                <span class="string">"static/js/49.34a5ee6e610c7934bf29.js"</span>,</span><br><span class="line">                <span class="string">"static/images/course/8.png"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_cy@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/kc_banner_mzd@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/no1.png"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/audio-3.png"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/stu-no-bg.png"</span>,</span><br><span class="line">                <span class="string">"static/js/21.19cca0ccf09f52f1fe65.js"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/sr.js"</span>,</span><br><span class="line">                <span class="string">"static/css/student/user/validate-new-phone.css"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/footer_course_on.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/course_bg_orange@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/login/ico_xuehao@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/az.js"</span>,</span><br><span class="line">                <span class="string">"static/js/34.808020b1b786ff046f33.js"</span>,</span><br><span class="line">                <span class="string">"static/images/tag_tx_zz@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/card_pink.png"</span>,</span><br><span class="line">                <span class="string">"static/images/personalCenter/headPhoto.jpg"</span>,</span><br><span class="line">                <span class="string">"static/js/22.1372eba9688406e9a888.js"</span>,</span><br><span class="line">                <span class="string">"static/img/3.ad6619e.png"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/icon_kecheng_xuanzhong@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/13.22c2b93aa0508d520996.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/edi_zm@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/wd_kp_bg@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/73.bd7bcfbcb7596fe607ca.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/after.png"</span>,</span><br><span class="line">                <span class="string">"static/js/72.b18f4d06e605b404b0c9.js.map"</span>,</span><br><span class="line">                <span class="string">"static/js/manifest.da10c0ea397152ee43b4.js"</span>,</span><br><span class="line">                <span class="string">"static/images/blackpic@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/user/center.js"</span>,</span><br><span class="line">                <span class="string">"static/images/quiz_icon/word_1.png"</span>,</span><br><span class="line">                <span class="string">"static/js/44.639a93c28f5a1788ca1e.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/reupload@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/wd_tx_bg_s@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/male.png"</span>,</span><br><span class="line">                <span class="string">"static/js/47.9e4fea3527f8f8d33c0e.js"</span>,</span><br><span class="line">                <span class="string">"static/images/course/empty-schedule.png"</span>,</span><br><span class="line">                <span class="string">"static/js/25.e8357b9f3da064dc2104.js"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_book@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/file_icon/video-s.png"</span>,</span><br><span class="line">                <span class="string">"static/font/MaterialIcons-Regular.woff2"</span>,</span><br><span class="line">                <span class="string">"static/js/31.b4efd46f891c4f68adef.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/Houses@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/css/student/class-quiz/index.css"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/bs.js"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/rednow@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/autoTextarea.js"</span>,</span><br><span class="line">                <span class="string">"static/js/60.2be964a16727732621bd.js"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_r@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/51.62a5a2b1be68b5cec8bd.js"</span>,</span><br><span class="line">                <span class="string">"static/js/43.a87a8c120bd2f9a9e5d4.js"</span>,</span><br><span class="line">                <span class="string">"static/js/41.b3fe7c5923d1a4f9b0f6.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/word@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_nice_s@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_kx_cg@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/nice@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/fr.js"</span>,</span><br><span class="line">                <span class="string">"static/images/tag_xq_tm@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/audio-2.png"</span>,</span><br><span class="line">                <span class="string">"static/images/top@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/rotate.png"</span>,</span><br><span class="line">                <span class="string">"static/images/quiz_icon/txt_1.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/more_right_arrow.png"</span>,</span><br><span class="line">                <span class="string">"static/images/app_config/start_icon.png"</span>,</span><br><span class="line">                <span class="string">"static/images/app_config/Android375x667.png"</span>,</span><br><span class="line">                <span class="string">"static/js/vendor.84d599022bb33b0b6aae.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/card_gray.png"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/group-stu-index.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/zhanweitu_wuxiaoxi.png"</span>,</span><br><span class="line">                <span class="string">"static/images/search@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/st_g@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/wd_zq_bg@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/courseware/hm-commit-success.png"</span>,</span><br><span class="line">                <span class="string">"static/images/mustcard@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/hr.js"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/close_tc@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/css/student/group/board.css"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/wenda_small1.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/duoxuan_small1.png"</span>,</span><br><span class="line">                <span class="string">"static/js/43.a87a8c120bd2f9a9e5d4.js.map"</span>,</span><br><span class="line">                <span class="string">"static/font/cour.ttf"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/comment-more.png"</span>,</span><br><span class="line">                <span class="string">"static/js/4.44be454250d9e3649a40.js"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_right_g@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/btn_r_b@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/edit_green.png"</span>,</span><br><span class="line">                <span class="string">"static/js/46.2aced9230cd815686141.js.map"</span>,</span><br><span class="line">                <span class="string">"static/css/student/course/responder.css"</span>,</span><br><span class="line">                <span class="string">"static/js/28.5818d59dace26f3dbf8e.js"</span>,</span><br><span class="line">                <span class="string">"static/images/search@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/file_icon/word-s.png"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/km.js"</span>,</span><br><span class="line">                <span class="string">"static/images/tag_g_bg@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/boy@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/img/3-bg.903ec0a.png"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/fi.js"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/plupload.min.js"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_kjzy@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/img/pdf.bd8f8ab.png"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/image.png"</span>,</span><br><span class="line">                <span class="string">"static/images/nice_s_s@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/girl@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/orange_title.png"</span>,</span><br><span class="line">                <span class="string">"static/images/tag_g@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/courseware/group-btn.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/shoucang_on.png"</span>,</span><br><span class="line">                <span class="string">"static/images/course/prev.png"</span>,</span><br><span class="line">                <span class="string">"static/css/student/course/board.css"</span>,</span><br><span class="line">                <span class="string">"static/img/2.ca5b2cc.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/wenda_small.png"</span>,</span><br><span class="line">                <span class="string">"static/js/47.9e4fea3527f8f8d33c0e.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/bg_dian@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/footer_msg_on.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/share.png"</span>,</span><br><span class="line">                <span class="string">"static/images/selectcard@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/quiz_icon/mp3.png"</span>,</span><br><span class="line">                <span class="string">"static/images/courseware/courseware_green.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/people@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/1.51bbc5b102a31e3b4274.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/courseware/courseware-index.jpg"</span>,</span><br><span class="line">                <span class="string">"static/images/login/ico_qingchu@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/rar(1)@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/daifabu.png"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/footer_course_on.png"</span>,</span><br><span class="line">                <span class="string">"static/images/file_icon/txt-s.png"</span>,</span><br><span class="line">                <span class="string">"static/images/quiz_icon/right.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/panduan.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/panduan1.png"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_f@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/app_config/Android1080x1920.png"</span>,</span><br><span class="line">                <span class="string">"static/js/66.bc9e62a02f6b6dffba73.js"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/course_bg_qing@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/question_more.png"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/kk.js"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/good.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/delete@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/course/7-s.png"</span>,</span><br><span class="line">                <span class="string">"static/images/course/4-s.png"</span>,</span><br><span class="line">                <span class="string">"static/css/weui.css"</span>,</span><br><span class="line">                <span class="string">"static/css/app.a147bb1114e3b5709cf48eb9c1574424.css.map"</span>,</span><br><span class="line">                <span class="string">"static/js/7.a25eeb813f874473b08b.js"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/ico_right.png"</span>,</span><br><span class="line">                <span class="string">"static/images/course/7.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/no2.png"</span>,</span><br><span class="line">                <span class="string">"static/images/group@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/Moxie.xap"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_face_male.png"</span>,</span><br><span class="line">                <span class="string">"static/images/pic@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/img/banner.90232c3.png"</span>,</span><br><span class="line">                <span class="string">"static/images/wd_bg_c@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/11.0b6b5a4434f53e174d27.js"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_kx_cg@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/footer_mine.png"</span>,</span><br><span class="line">                <span class="string">"static/js/61.f653095737f99f319a58.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/footer_mine_on.png"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_mes_g@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/quiz_icon/doc.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/bangdingshoujichenggong@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/img/7.f02a1f0.png"</span>,</span><br><span class="line">                <span class="string">"static/js/15.deffd44a3ab386e462af.js"</span>,</span><br><span class="line">                <span class="string">"static/css/vueWeui.min.css"</span>,</span><br><span class="line">                <span class="string">"static/images/file_icon/pdf.png"</span>,</span><br><span class="line">                <span class="string">"static/images/blackpic@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/user/reg.js"</span>,</span><br><span class="line">                <span class="string">"static/js/app.c5f16e22c4f6dc7904e3.js"</span>,</span><br><span class="line">                <span class="string">"static/js/8.ea9c8e9d4b70d277e92b.js"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/voice.png"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_book_g@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/quanbu.png"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/voice-rec.jpg"</span>,</span><br><span class="line">                <span class="string">"static/images/wd_tx_bg_s@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/img/4-bg.2d9170d.png"</span>,</span><br><span class="line">                <span class="string">"static/images/bg_dian@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/rem-px.js"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_kthd@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/css/student/group/screen.css"</span>,</span><br><span class="line">                <span class="string">"static/js/57.a0ab6885cde4b53cddf3.js"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/hy.js"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/danxuan_small1.png"</span>,</span><br><span class="line">                <span class="string">"static/css/teacher/course/chooseTeam.css"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/attach.png"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/lt.js"</span>,</span><br><span class="line">                <span class="string">"static/images/course/3-bg.png"</span>,</span><br><span class="line">                <span class="string">"static/images/wd_bg_z@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/es.js"</span>,</span><br><span class="line">                <span class="string">"static/images/group@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/female.png"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/zh_TW.js"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/edit_green.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/red_now_1.png"</span>,</span><br><span class="line">                <span class="string">"static/img/5-bg.339e113.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/Bench 2@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/ico_right_g.png"</span>,</span><br><span class="line">                <span class="string">"static/js/1.51bbc5b102a31e3b4274.js"</span>,</span><br><span class="line">                <span class="string">"static/images/file_icon/txt.png"</span>,</span><br><span class="line">                <span class="string">"static/images/edit@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/31.b4efd46f891c4f68adef.js"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/courseList_bg_gray.png"</span>,</span><br><span class="line">                <span class="string">"static/js/20.8e61d518fe12def5beeb.js.map"</span>,</span><br><span class="line">                <span class="string">"static/js/75.f75b137dff93584306c2.js"</span>,</span><br><span class="line">                <span class="string">"static/js/44.639a93c28f5a1788ca1e.js"</span>,</span><br><span class="line">                <span class="string">"static/images/st_g@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/like.png"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/no-attach.png"</span>,</span><br><span class="line">                <span class="string">"static/js/32.26a5a6fd92f00e0289c2.js"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/boy.png"</span>,</span><br><span class="line">                <span class="string">"static/js/59.27757db0ab06829db933.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/dele_s@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/tag_xq_tz@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/course/5-s.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/left_arrow.png"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/he.js"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/no_2.png"</span>,</span><br><span class="line">                <span class="string">"static/js/23.02b9f64c1831f5f6d17c.js"</span>,</span><br><span class="line">                <span class="string">"static/images/checkUpdate/tanchuangtou.png"</span>,</span><br><span class="line">                <span class="string">"static/js/58.29d13a0cb0a209a2a890.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/leader.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/yiyue.png"</span>,</span><br><span class="line">                <span class="string">"static/css/cropper.min.css"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/wrong.png"</span>,</span><br><span class="line">                <span class="string">"static/images/more@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_me@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/course/1-s.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/edit.png"</span>,</span><br><span class="line">                <span class="string">"static/js/photoswipe/default-skin/default-skin.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/danxuan.png"</span>,</span><br><span class="line">                <span class="string">"static/images/time-out.png"</span>,</span><br><span class="line">                <span class="string">"static/js/64.a5373ce9d1f41c504a8f.js"</span>,</span><br><span class="line">                <span class="string">"static/images/rednow@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/wd_tx_bg@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_right@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/6.b2048bdcbb1f969aefdf.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/quiz_icon/quiz-right.png"</span>,</span><br><span class="line">                <span class="string">"static/images/course/6.png"</span>,</span><br><span class="line">                <span class="string">"config/app-config.json"</span>,</span><br><span class="line">                <span class="string">"static/js/18.6f3d829c90c19e7e3a1f.js"</span>,</span><br><span class="line">                <span class="string">"static/images/tag_xq_zs@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/11.0b6b5a4434f53e174d27.js.map"</span>,</span><br><span class="line">                <span class="string">"static/css/teacherCommon.css"</span>,</span><br><span class="line">                <span class="string">"static/css/teacher/course/addGroup.css"</span>,</span><br><span class="line">                <span class="string">"static/css/student/group/list.css"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/duoxuan.png"</span>,</span><br><span class="line">                <span class="string">"static/images/quiz_icon/excel_1.png"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/uk_UA.js"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/liked.png"</span>,</span><br><span class="line">                <span class="string">"static/images/upload@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/weui.js"</span>,</span><br><span class="line">                <span class="string">"static/svg/audio.svg"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/teacher_pagedown@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/tag_g_bg@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/edi_zm@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/courseware_blue.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/green_now.png"</span>,</span><br><span class="line">                <span class="string">"static/images/wd_btn_mr@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/discuss/wall.js"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/USB(1)@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/62.df120f08dd6de7cb3ad5.js"</span>,</span><br><span class="line">                <span class="string">"static/css/question.css"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/ar.js"</span>,</span><br><span class="line">                <span class="string">"static/js/app.c5f16e22c4f6dc7904e3.js.map"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/zh_CN.js"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/pt.js"</span>,</span><br><span class="line">                <span class="string">"static/js/7.a25eeb813f874473b08b.js.map"</span>,</span><br><span class="line">                <span class="string">"static/js/34.808020b1b786ff046f33.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/quiz_icon/wrong.png"</span>,</span><br><span class="line">                <span class="string">"static/images/quiz_icon/txt.png"</span>,</span><br><span class="line">                <span class="string">"static/img/2-bg.1dcd998.png"</span>,</span><br><span class="line">                <span class="string">"static/js/42.b6dd165ebc6c1378bcf8.js"</span>,</span><br><span class="line">                <span class="string">"static/images/checkUpdate/tanchuangtou@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/no_3.png"</span>,</span><br><span class="line">                <span class="string">"static/images/quiz_icon/url_1.png"</span>,</span><br><span class="line">                <span class="string">"static/js/vendor.84d599022bb33b0b6aae.js"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/ro.js"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/pl.js"</span>,</span><br><span class="line">                <span class="string">"static/images/wechat/teacher.png"</span>,</span><br><span class="line">                <span class="string">"static/js/uploadVoice.js"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/ca.js"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_xz_me@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/wenda.png"</span>,</span><br><span class="line">                <span class="string">"static/js/4.44be454250d9e3649a40.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/courseware/responder-fail.png"</span>,</span><br><span class="line">                <span class="string">"static/js/51.62a5a2b1be68b5cec8bd.js.map"</span>,</span><br><span class="line">                <span class="string">"static/js/67.abb1c370ce4ae2c5b500.js.map"</span>,</span><br><span class="line">                <span class="string">"static/js/64.a5373ce9d1f41c504a8f.js.map"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/lv.js"</span>,</span><br><span class="line">                <span class="string">"static/js/35.6cb97a5cf8e96c570a3b.js.map"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/cy.js"</span>,</span><br><span class="line">                <span class="string">"static/images/quiz_icon/excel_1.png.png"</span>,</span><br><span class="line">                <span class="string">"static/images/more_w@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/course/pos.png"</span>,</span><br><span class="line">                <span class="string">"static/js/20.8e61d518fe12def5beeb.js"</span>,</span><br><span class="line">                <span class="string">"static/images/loading.svg"</span>,</span><br><span class="line">                <span class="string">"static/js/58.29d13a0cb0a209a2a890.js"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/footer_course.png"</span>,</span><br><span class="line">                <span class="string">"static/img/kc_banner_mzd@2x.94bd27e.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/course_none.png"</span>,</span><br><span class="line">                <span class="string">"static/images/file_icon/audio-s.png"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_fin@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/courseList_bg_yellow.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/caogao.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/move.png"</span>,</span><br><span class="line">                <span class="string">"static/images/login/banner.png"</span>,</span><br><span class="line">                <span class="string">"static/images/file_icon/exe-s.png"</span>,</span><br><span class="line">                <span class="string">"static/js/2.479db8c5381e52b4094b.js"</span>,</span><br><span class="line">                <span class="string">"static/css/teacher/groupMission.css"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/shoucang_normal.png"</span>,</span><br><span class="line">                <span class="string">"static/js/3.5776986484d75528975e.js"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/courseware_green2.png"</span>,</span><br><span class="line">                <span class="string">"static/images/girl@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/app_config/return_.png"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/tr.js"</span>,</span><br><span class="line">                <span class="string">"static/css/student/course/screen.css"</span>,</span><br><span class="line">                <span class="string">"static/js/15.deffd44a3ab386e462af.js.map"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/ms.js"</span>,</span><br><span class="line">                <span class="string">"static/images/wd_zq_bg@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/more-down.png"</span>,</span><br><span class="line">                <span class="string">"static/images/app_config/Android1080x2160.png"</span>,</span><br><span class="line">                <span class="string">"static/images/nice_s@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/30.492abee30cefd9a94f5e.js"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/ico-search.png"</span>,</span><br><span class="line">                <span class="string">"static/js/weui.min.js"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_xh_r@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/24.77d4995a6babde8d114f.js"</span>,</span><br><span class="line">                <span class="string">"static/js/18.6f3d829c90c19e7e3a1f.js.map"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/en.js"</span>,</span><br><span class="line">                <span class="string">"static/js/65.821ff86b65ac72900f2f.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/more-up.png"</span>,</span><br><span class="line">                <span class="string">"static/js/cookieUtil.js"</span>,</span><br><span class="line">                <span class="string">"static/js/21.19cca0ccf09f52f1fe65.js.map"</span>,</span><br><span class="line">                <span class="string">"static/css/res-icon.css"</span>,</span><br><span class="line">                <span class="string">"static/css/swiper.min.css"</span>,</span><br><span class="line">                <span class="string">"static/css/student/user/center.css"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/hengxian.png"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/vi.js"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/cs.js"</span>,</span><br><span class="line">                <span class="string">"static/js/12.e0c233a7dc6aa64eacf4.js"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/flag.png"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/footer_mine.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/has_choose.png"</span>,</span><br><span class="line">                <span class="string">"static/js/52.8fe85e4ffdddb41dd7a2.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/course/5.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/list_more.png"</span>,</span><br><span class="line">                <span class="string">"static/css/attach-icon.css"</span>,</span><br><span class="line">                <span class="string">"static/css/student/group/face.css"</span>,</span><br><span class="line">                <span class="string">"static/images/tag_xq_tm@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_xz_me@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/selectcard@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/10.b9083fe2d547cdc4b9c6.js"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/people_fill@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/1_1/course-index.png"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_kthd@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/courseware/courseware_zi.png"</span>,</span><br><span class="line">                <span class="string">"static/images/word_bg@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/teacher_more@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/photoswipe/photoswipe-ui-default.min.js"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/yiwancheng.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/courseware_green.png"</span>,</span><br><span class="line">                <span class="string">"static/js/67.abb1c370ce4ae2c5b500.js"</span>,</span><br><span class="line">                <span class="string">"static/img/report-bg.d7b637d.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/zhanweitu_wuxiaoxi@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/img/courseware-index.f60a962.jpg"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/jinxingzhong.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/no_1.png"</span>,</span><br><span class="line">                <span class="string">"static/images/copy@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/css/teacher/courseware/createEditCourse.css"</span>,</span><br><span class="line">                <span class="string">"static/images/course/8-bg.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/check_box1.png"</span>,</span><br><span class="line">                <span class="string">"static/img/6.bbadfb3.png"</span>,</span><br><span class="line">                <span class="string">"static/js/71.6905b7eca93d75949006.js.map"</span>,</span><br><span class="line">                <span class="string">"static/js/photoswipe/photoswipe.js"</span>,</span><br><span class="line">                <span class="string">"static/js/59.27757db0ab06829db933.js"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_t@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/css/common-unpack.css"</span>,</span><br><span class="line">                <span class="string">"static/images/course/6-bg.png"</span>,</span><br><span class="line">                <span class="string">"static/css/switch.css"</span>,</span><br><span class="line">                <span class="string">"static/js/cropper.min.js"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/right_answer.png"</span>,</span><br><span class="line">                <span class="string">"static/lang/en-US.js"</span>,</span><br><span class="line">                <span class="string">"static/js/52.8fe85e4ffdddb41dd7a2.js"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/sl.js"</span>,</span><br><span class="line">                <span class="string">"static/fonts/cour.5dbc191.ttf"</span>,</span><br><span class="line">                <span class="string">"static/js/39.2c7f53f140893d7d48d3.js"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/grayPlus.png"</span>,</span><br><span class="line">                <span class="string">"static/img/responder-bg.f54dcd3.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/card_blue.png"</span>,</span><br><span class="line">                <span class="string">"static/images/login/ico_fuwuqidizhi.png"</span>,</span><br><span class="line">                <span class="string">"static/js/cropper.js"</span>,</span><br><span class="line">                <span class="string">"static/js/41.b3fe7c5923d1a4f9b0f6.js"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/zh_CN.js"</span>,</span><br><span class="line">                <span class="string">"static/js/36.e2314e7b3fdff24cc7c0.js"</span>,</span><br><span class="line">                <span class="string">"static/images/app_config/huaweiM5.png"</span>,</span><br><span class="line">                <span class="string">"static/js/12.e0c233a7dc6aa64eacf4.js.map"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/yichehui.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/dahui.png"</span>,</span><br><span class="line">                <span class="string">"static/js/14.68e1922ee459f196bf8b.js"</span>,</span><br><span class="line">                <span class="string">"static/js/48.0e1627cbf94504061dc7.js"</span>,</span><br><span class="line">                <span class="string">"static/js/26.2e209f7a31c67645cd17.js"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_xz_w@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_me@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/personalCenter/jiantou_right.png"</span>,</span><br><span class="line">                <span class="string">"static/images/app_config/iPhoneX1125x2436.png"</span>,</span><br><span class="line">                <span class="string">"static/images/copy@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/course/4-bg.png"</span>,</span><br><span class="line">                <span class="string">"static/js/45.651e51522305da41208a.js"</span>,</span><br><span class="line">                <span class="string">"static/img/time-out.f1600cb.png"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/id.js"</span>,</span><br><span class="line">                <span class="string">"static/images/course/next.png"</span>,</span><br><span class="line">                <span class="string">"static/images/unlaunch@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/me_g@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/tag_t@3x.png"</span>,</span><br><span class="line">                <span class="string">"static/js/teacher/center.js"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/courseware_none.png"</span>,</span><br><span class="line">                <span class="string">"static/images/word_bg@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/deleteCourseware.png"</span>,</span><br><span class="line">                <span class="string">"static/images/launch@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/login/ico_qingchu.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/course_bg_red@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/quiz_icon/mp3_1.png"</span>,</span><br><span class="line">                <span class="string">"static/images/teacher/courseware_green_right.png"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/i18n/sq.js"</span>,</span><br><span class="line">                <span class="string">"static/images/file_icon/pdf-s.png"</span>,</span><br><span class="line">                <span class="string">"static/images/ico_kjzy@2x.png"</span>,</span><br><span class="line">                <span class="string">"static/images/courseware/courseware_green2.png"</span>,</span><br><span class="line">                <span class="string">"static/js/50.b0c4c66c0111e1e3635d.js.map"</span>,</span><br><span class="line">                <span class="string">"static/js/plupload/Moxie.swf"</span></span><br><span class="line">            ]</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><a href="https://ask.dcloud.net.cn/article/94" target="_blank" rel="noopener">详细manifest配置请点我</a></p><p>5 就是在所在项目目录下 右键 ——&gt; 发行 ——&gt; 原生app 云打包</p><p><img src="/2019/12/14/前端开发app总结/1576302483507.png" alt="1576302483507"></p><p><img src="/2019/12/14/前端开发app总结/1576302815309.png" alt="1576302815309"></p><p><img src="/2019/12/14/前端开发app总结/1576302997871.png" alt="1576302997871"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;web前端基于vue利用H5-接口开发APP总结&quot;&gt;&lt;a href=&quot;#web前端基于vue利用H5-接口开发APP总结&quot; class=&quot;headerlink&quot; title=&quot;web前端基于vue利用H5+接口开发APP总结&quot;&gt;&lt;/a&gt;web前端基于vue利用H5
      
    
    </summary>
    
    
      <category term="Hbuilder" scheme="https://shenxiaobu.github.io/tags/Hbuilder/"/>
    
  </entry>
  
  <entry>
    <title>java零基础6</title>
    <link href="https://shenxiaobu.github.io/2019/12/10/java%E9%9B%B6%E5%9F%BA%E7%A1%806/"/>
    <id>https://shenxiaobu.github.io/2019/12/10/java零基础6/</id>
    <published>2019-12-10T01:58:26.000Z</published>
    <updated>2020-03-22T13:49:33.088Z</updated>
    
    <content type="html"><![CDATA[<h3 id="API概述"><a href="#API概述" class="headerlink" title="API概述"></a>API概述</h3><p>API（Application Programming Interface）：应用程序编程接口</p><p>编写一个机器人程序去控制机器人踢足球，程序需要向机器人发出向前跑，向后跑，射门，抢球等各种命令。</p><p>机器人厂商一定会提供些用于控制机器人的接口类。这些类中定义好了操作机器人各种动作的方法，其实，这些</p><p>接口类就是机器人厂商提供给应用程序编程的接口，大家把这些类成为API；</p><p>java API:  指的就是JDK中提供的各种功能的java类</p><p>这些类将底层的实现封装了起来。我们不需要关心这些类是如何实现的，</p><p>只需要学习这些类如何使用即可。我们可以通过帮助文档来学习这些API的使用</p><p><img src="/2019/12/10/java零基础6/1575945068701.png" alt="1575945068701"></p><p><img src="/2019/12/10/java零基础6/1575945118102.png" alt="1575945118102"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    String构造方法</span></span><br><span class="line"><span class="comment">        public String();   创建一个空白字符串对象，不含任何内容</span></span><br><span class="line"><span class="comment">        public String(char[] chs); 根据字符数组的内容，来创建字符串对象</span></span><br><span class="line"><span class="comment">        public String(byte[] bys); 根据字节数组的内容，来创建字符串对象</span></span><br><span class="line"><span class="comment">        String s = "abc";   直接赋值的方式创建字符串对象，内容是abc   推荐这种方式</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="comment">//        public String();    创建一个空白字符串对象，不含任何内容</span></span><br><span class="line">        String s1 = <span class="keyword">new</span> String();</span><br><span class="line">        System.out.println(<span class="string">"s1:"</span> + s1);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//public String(char[] chs);  根据字符数组得内容，来创建字符串对象</span></span><br><span class="line">        <span class="keyword">char</span>[] chs = &#123;<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>&#125;;</span><br><span class="line">        String s2 = <span class="keyword">new</span> String(chs);</span><br><span class="line">        System.out.println(<span class="string">"s2:"</span> + s2);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//public String(byte[] bys); 根据字节数组的内容，来创建字符串内容</span></span><br><span class="line">        <span class="keyword">byte</span>[] bys = &#123;<span class="number">97</span>,<span class="number">98</span>,<span class="number">99</span>&#125;;</span><br><span class="line">        String s3 = <span class="keyword">new</span> String(bys);</span><br><span class="line">        System.out.println(<span class="string">"s3:"</span> + s3);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//String s = "abc";  直接赋值的方法创建字符串对象，内容时abc</span></span><br><span class="line">        String s4 = <span class="string">"abc"</span>;</span><br><span class="line">        System.out.println(<span class="string">"s4:"</span> + s4);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    输出结果为</span></span><br><span class="line"><span class="comment">    s1:</span></span><br><span class="line"><span class="comment">    s2:abc</span></span><br><span class="line"><span class="comment">    s3:abc</span></span><br><span class="line"><span class="comment">    s4:abc</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p><img src="/2019/12/10/java零基础6/1575966459475.png" alt="1575966459475"></p><p><img src="/2019/12/10/java零基础6/1575966510795.png" alt="1575966510795"></p><p><img src="/2019/12/10/java零基础6/1575966583404.png" alt="1575966583404"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    String对象的特点</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//构造方法的方式得到对象</span></span><br><span class="line">        <span class="keyword">char</span>[] chs = &#123;<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>&#125;;</span><br><span class="line">        String s1 = <span class="keyword">new</span> String(chs);</span><br><span class="line">        String s2 = <span class="keyword">new</span> String(chs);</span><br><span class="line">        System.out.println(s1 == s2);  <span class="comment">//false   解释：new 方式会重新开辟一个地址</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//直接赋值的方式得到对象</span></span><br><span class="line">        String s3 = <span class="string">"abc"</span>;</span><br><span class="line">        String s4 = <span class="string">"abc"</span>;</span><br><span class="line">        System.out.println(s3 == s4);  <span class="comment">//true    解释：s4和s3的在字符串池中维护，指向同一个字符串地址</span></span><br><span class="line">        <span class="comment">//比较字符串对象地址是否相同</span></span><br><span class="line">        System.out.println(s1 == s3);  <span class="comment">//false   解释：""的方式是在常量池开辟地址，new是新一个地址</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2019/12/10/java零基础6/1575968321579.png" alt="1575968321579"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    public boolean equals (object anObject);</span></span><br><span class="line"><span class="comment">    将次字符串与指定对象进行比较。由于我们比较的是字符串对象。所以参数直接传递一个字符串</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//构造方法的方式得到对象</span></span><br><span class="line">        <span class="keyword">char</span>[] chs = &#123;<span class="string">'a'</span>,<span class="string">'b'</span>,<span class="string">'c'</span>&#125;;</span><br><span class="line">        String s1 = <span class="keyword">new</span> String(chs);</span><br><span class="line">        String s2 = <span class="keyword">new</span> String(chs);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//直接赋值的方式得到对象</span></span><br><span class="line">        String s3 = <span class="string">"abc"</span>;</span><br><span class="line">        String s4 = <span class="string">"abc"</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//比较字符串对象地址是否相同</span></span><br><span class="line">        System.out.println(s1 == s2);</span><br><span class="line">        System.out.println(s1 == s3);</span><br><span class="line">        System.out.println(s3 == s4);</span><br><span class="line">        System.out.println(<span class="string">"---------"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//比较字符串对象内容是否相同</span></span><br><span class="line">        System.out.println(s1.equals(s2));</span><br><span class="line">        System.out.println(s1.equals(s3));</span><br><span class="line">        System.out.println(s3.equals(s4));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    输出结果为</span></span><br><span class="line"><span class="comment">    false</span></span><br><span class="line"><span class="comment">    false</span></span><br><span class="line"><span class="comment">    true</span></span><br><span class="line"><span class="comment">    ---------</span></span><br><span class="line"><span class="comment">    true</span></span><br><span class="line"><span class="comment">    true</span></span><br><span class="line"><span class="comment">    true</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p><a href="https://www.runoob.com/java/java-string.html" target="_blank" rel="noopener">菜鸟教程jString类</a></p><p><img src="/2019/12/10/java零基础6/1575969039975.png" alt="1575969039975"></p><p><img src="/2019/12/10/java零基础6/1575969067424.png" alt="1575969067424"></p><p><img src="/2019/12/10/java零基础6/1575969090744.png" alt="1575969090744"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;API概述&quot;&gt;&lt;a href=&quot;#API概述&quot; class=&quot;headerlink&quot; title=&quot;API概述&quot;&gt;&lt;/a&gt;API概述&lt;/h3&gt;&lt;p&gt;API（Application Programming Interface）：应用程序编程接口&lt;/p&gt;
&lt;p&gt;编写一
      
    
    </summary>
    
    
      <category term="java" scheme="https://shenxiaobu.github.io/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>Java零基础5</title>
    <link href="https://shenxiaobu.github.io/2019/12/09/Java%E9%9B%B6%E5%9F%BA%E7%A1%805/"/>
    <id>https://shenxiaobu.github.io/2019/12/09/Java零基础5/</id>
    <published>2019-12-09T13:32:34.000Z</published>
    <updated>2020-03-22T13:49:33.014Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/2019/12/09/Java零基础5/1575898828139.png" alt="1575898828139"></p><p><img src="/2019/12/09/Java零基础5/1575898846898.png" alt="1575898846898"></p><p><img src="/2019/12/09/Java零基础5/1575898896913.png" alt="1575898896913"></p><p><img src="/2019/12/09/Java零基础5/1575898977372.png" alt="1575898977372"></p><p><img src="/2019/12/09/Java零基础5/1575899002926.png" alt="1575899002926"></p><p><img src="/2019/12/09/Java零基础5/1575899028037.png" alt="1575899028037"></p><p><img src="/2019/12/09/Java零基础5/575899055239.png" alt="1575899055239"></p><p><img src="/2019/12/09/Java零基础5/1575899429768.png" alt="1575899429768"></p><p><img src="/2019/12/09/Java零基础5/1575899448910.png" alt="1575899448910"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//同一个包下创建一个 Phone类</span></span><br><span class="line"><span class="keyword">package</span> bubu;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Phone</span> </span>&#123;</span><br><span class="line">    <span class="comment">//成员变量</span></span><br><span class="line">    String brand;</span><br><span class="line">    <span class="keyword">int</span> price;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//成员方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">call</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"打电话"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sendMessage</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"发短信"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> bubu;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    手机类</span></span><br><span class="line"><span class="comment">        类名：</span></span><br><span class="line"><span class="comment">        手机（Phone）</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        成员变量：</span></span><br><span class="line"><span class="comment">        品牌（brand）</span></span><br><span class="line"><span class="comment">        价格（price）</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        成员方法</span></span><br><span class="line"><span class="comment">        打电话（call）</span></span><br><span class="line"><span class="comment">        发短信（sendMessage）</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//创建对象</span></span><br><span class="line">        Phone p = <span class="keyword">new</span> Phone();</span><br><span class="line"></span><br><span class="line">        <span class="comment">//使用成员变量</span></span><br><span class="line">        System.out.println(p.brand);</span><br><span class="line">        System.out.println(p.price);</span><br><span class="line"></span><br><span class="line">        p.brand = <span class="string">"小米"</span>;</span><br><span class="line">        p.price = <span class="number">2999</span>;</span><br><span class="line">  p.call();</span><br><span class="line">        p.sendMessage();</span><br><span class="line">        System.out.println(p.brand);</span><br><span class="line">        System.out.println(p.price);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出结果为</span></span><br><span class="line"><span class="comment">    null</span></span><br><span class="line"><span class="comment">    0</span></span><br><span class="line"><span class="comment">    打电话</span></span><br><span class="line"><span class="comment">    发短信</span></span><br><span class="line"><span class="comment">    小米</span></span><br><span class="line"><span class="comment">    2999</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">在用户那直接可以修改成员变量的值 是不安全的，因此引入 <span class="keyword">private</span> 关键字</span><br><span class="line"><span class="keyword">private</span> 定义的成员变量，外部无法修改其值，只能通过该类的内部函数修改值</span><br></pre></td></tr></table></figure><p><img src="/2019/12/09/Java零基础5/1575900106365.png" alt="1575900106365"></p><p><img src="/2019/12/09/Java零基础5/1575900130929.png" alt="1575900130929"></p><p><img src="/2019/12/09/Java零基础5/1575900192023.png" alt="1575900192023"></p><p><img src="/2019/12/09/Java零基础5/1575900233940.png" alt="1575900233940"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> bubu;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentDemo</span> </span>&#123;</span><br><span class="line">    <span class="comment">//成员变量</span></span><br><span class="line">    String name;   <span class="comment">//未采用private修饰符，外部的学生类可以修改成员变量name的值</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;  <span class="comment">//采用private修饰符，只能内部函数访问</span></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> a)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>(a &gt; <span class="number">120</span> || a &lt; <span class="number">0</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">"您输入的年龄有误"</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            age = a;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//成员方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(name + <span class="string">","</span> + age);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> bubu;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    student类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        StudentDemo student = <span class="keyword">new</span> StudentDemo();</span><br><span class="line">        <span class="comment">//会报错的语句</span></span><br><span class="line">        <span class="comment">//System.out.println(student.age); //age使用private修饰，在这里是访问不到的，因此age在idea编辑器会显示红色</span></span><br><span class="line">        System.out.println(student.getAge());</span><br><span class="line">        System.out.println(student.name);</span><br><span class="line"></span><br><span class="line">        student.name = <span class="string">"小布"</span>;  <span class="comment">//name 因为没有private修饰 所以可以，但是是不安全的</span></span><br><span class="line">        <span class="comment">//student.age = 20;   //这里也一样//会报错的语句</span></span><br><span class="line">        student.setAge(<span class="number">1000</span>);</span><br><span class="line"><span class="comment">//      System.out.println(student.age);  会报错的语句</span></span><br><span class="line">        System.out.println(student.getAge());</span><br><span class="line">        System.out.println(student.name);</span><br><span class="line">        student.show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    输出结果为</span></span><br><span class="line"><span class="comment">    0</span></span><br><span class="line"><span class="comment">    null</span></span><br><span class="line"><span class="comment">    您输入的年龄有误</span></span><br><span class="line"><span class="comment">    0</span></span><br><span class="line"><span class="comment">    小布</span></span><br><span class="line"><span class="comment">    小布,0</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p><img src="/2019/12/09/Java零基础5/1575902338394.png" alt="1575902338394"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> bubu;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentDemo</span> </span>&#123;</span><br><span class="line">    <span class="comment">//成员变量</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">        name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"name:"</span> + name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> bubu;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    student类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        StudentDemo student = <span class="keyword">new</span> StudentDemo();</span><br><span class="line">        System.out.println(student.getName());</span><br><span class="line">        student.setName(<span class="string">"xiaobu"</span>); <span class="comment">//并改变不了学生类成员变量name的值，因为setName的参数与成员变量名字一样的问题；因此引入 this解决问题</span></span><br><span class="line">        System.out.println(student.getName());</span><br><span class="line">        student.show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    输出结果为</span></span><br><span class="line"><span class="comment">    null</span></span><br><span class="line"><span class="comment">    null</span></span><br><span class="line"><span class="comment">    name:null</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><h4 id="使用this后的运行"><a href="#使用this后的运行" class="headerlink" title="使用this后的运行"></a>使用this后的运行</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> bubu;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentDemo</span> </span>&#123;</span><br><span class="line">    <span class="comment">//成员变量</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"name:"</span> + <span class="keyword">this</span>.name);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>调用代码和上面的一样，输出结果如下</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//null</span></span><br><span class="line"><span class="comment">//xiaobu</span></span><br><span class="line"><span class="comment">//name:xiaobu</span></span><br></pre></td></tr></table></figure><p><img src="/2019/12/09/Java零基础5/1575903232837.png" alt="1575903232837"></p><p><img src="/2019/12/09/Java零基础5/1575903249604.png" alt="1575903249604"></p><p><img src="/2019/12/09/Java零基础5/1575903266811.png" alt="1575903266811"></p><p><img src="/2019/12/09/Java零基础5/1575903283626.png" alt="1575903283626"></p><p><img src="/2019/12/09/Java零基础5/1575903300671.png" alt="1575903300671"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> bubu;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    student类</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    构造方法</span></span><br><span class="line"><span class="comment">    作用： 创建对象</span></span><br><span class="line"><span class="comment">    功能： 完成对象数据的初始化</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    格式</span></span><br><span class="line"><span class="comment">        修饰符 类名(参数) &#123;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        修饰符一般用 public</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentDemo</span> </span>&#123;</span><br><span class="line">    <span class="comment">//成员变量</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">StudentDemo</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"没有参数的构造函数，无参构造函数"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println( <span class="keyword">this</span>.name + <span class="string">","</span> + <span class="keyword">this</span>.age);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> bubu;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        StudentDemo student = <span class="keyword">new</span> StudentDemo();</span><br><span class="line">        System.out.println(student.getName());</span><br><span class="line">        student.setName(<span class="string">"xiaobu"</span>);</span><br><span class="line">        System.out.println(student.getName());</span><br><span class="line">        student.show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    输出结果为</span></span><br><span class="line"><span class="comment">    没有参数的构造函数，无参构造函数</span></span><br><span class="line"><span class="comment">    null</span></span><br><span class="line"><span class="comment">    xiaobu</span></span><br><span class="line"><span class="comment">    xiaobu,0</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> bubu;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    student类</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    构造方法</span></span><br><span class="line"><span class="comment">    作用： 创建对象</span></span><br><span class="line"><span class="comment">    功能： 完成对象数据的初始化</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    格式</span></span><br><span class="line"><span class="comment">        修饰符 类名(参数) &#123;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">        修饰符一般用 public</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">StudentDemo</span> </span>&#123;</span><br><span class="line">    <span class="comment">//成员变量</span></span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">StudentDemo</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"没有参数的构造函数，无参构造函数"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">StudentDemo</span><span class="params">(<span class="keyword">int</span> age)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">        System.out.println(<span class="string">"设置age的构造函数"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">StudentDemo</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        System.out.println(<span class="string">"设置name的构造函数"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">StudentDemo</span><span class="params">(<span class="keyword">int</span> age,String name)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">        System.out.println(<span class="string">"设置name和age的构造函数"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">StudentDemo</span><span class="params">(String name,<span class="keyword">int</span> age)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">        System.out.println(<span class="string">"设置age和name的构造函数"</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span></span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">this</span>.age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println( <span class="keyword">this</span>.name + <span class="string">","</span> + <span class="keyword">this</span>.age);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> bubu;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        StudentDemo student1 = <span class="keyword">new</span> StudentDemo();</span><br><span class="line">        student1.show();</span><br><span class="line"></span><br><span class="line">        StudentDemo student2 = <span class="keyword">new</span> StudentDemo(<span class="number">12</span>);</span><br><span class="line">        student2.show();</span><br><span class="line"></span><br><span class="line">        StudentDemo student3 = <span class="keyword">new</span> StudentDemo(<span class="string">"xiaobu"</span>);</span><br><span class="line">        student3.show();</span><br><span class="line"></span><br><span class="line">        StudentDemo student4 = <span class="keyword">new</span> StudentDemo(<span class="number">18</span>,<span class="string">"xiaoshen"</span>);</span><br><span class="line">        student4.show();</span><br><span class="line"></span><br><span class="line">        StudentDemo student5 = <span class="keyword">new</span> StudentDemo(<span class="string">"boom"</span>,<span class="number">15</span>);</span><br><span class="line">        student5.show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    没有参数的构造函数，无参构造函数</span></span><br><span class="line"><span class="comment">    null,0</span></span><br><span class="line"><span class="comment">    设置age的构造函数</span></span><br><span class="line"><span class="comment">    null,12</span></span><br><span class="line"><span class="comment">    设置name的构造函数</span></span><br><span class="line"><span class="comment">    xiaobu,0</span></span><br><span class="line"><span class="comment">    设置name和age的构造函数</span></span><br><span class="line"><span class="comment">    xiaoshen,18</span></span><br><span class="line"><span class="comment">    设置age和name的构造函数</span></span><br><span class="line"><span class="comment">    boom,15</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p><img src="/2019/12/09/Java零基础5/1575903326182.png" alt="1575903326182"></p><p><img src="/2019/12/09/Java零基础5/1575903343682.png" alt="1575903343682"></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;/2019/12/09/Java零基础5/1575898828139.png&quot; alt=&quot;1575898828139&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2019/12/09/Java零基础5/1575898846898.png&quot; alt=&quot;1575
      
    
    </summary>
    
    
      <category term="java" scheme="https://shenxiaobu.github.io/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>java零基础4</title>
    <link href="https://shenxiaobu.github.io/2019/12/09/java%E9%9B%B6%E5%9F%BA%E7%A1%804/"/>
    <id>https://shenxiaobu.github.io/2019/12/09/java零基础4/</id>
    <published>2019-12-09T08:35:24.000Z</published>
    <updated>2020-03-22T13:49:33.077Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/2019/12/09/java零基础4/1575887794699.png" alt="1575887794699"></p><p><img src="/2019/12/09/java零基础4/1575887820147.png" alt="1575887820147"></p><p><img src="/2019/12/09/java零基础4/1575887841999.png" alt="1575887841999"></p><p><img src="/2019/12/09/java零基础4/1575887905720.png" alt="1575887905720"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  数组：是一种用于推荐多个相同类型数据的存储模型</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">  定义格式：（推荐方式）</span></span><br><span class="line"><span class="comment">        数据类型[] 数组名;</span></span><br><span class="line"><span class="comment">        举例： int[] arr;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">   数组初始化：</span></span><br><span class="line"><span class="comment">        a：所谓初始化，就是为数组中的元素分配内存空间，并未每个数组元素赋值</span></span><br><span class="line"><span class="comment">        b：数组初始化</span></span><br><span class="line"><span class="comment">               动态初始化</span></span><br><span class="line"><span class="comment">               静态初始化</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">   动态初始化：</span></span><br><span class="line"><span class="comment">        初始化时只指定数组长度，由系统为数组分配初始值</span></span><br><span class="line"><span class="comment">        格式  数据类型[] 数组名 = new 数据类型[数组长度];</span></span><br><span class="line"><span class="comment">        范例： int[] arr = new int[3];</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] arr = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">3</span>];</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">            左边：</span></span><br><span class="line"><span class="comment">                int： 说明数组中的元素类型时int类型</span></span><br><span class="line"><span class="comment">                []: 说明这是一个数组</span></span><br><span class="line"><span class="comment">                arr： 这是数组名称</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            右边：</span></span><br><span class="line"><span class="comment">                new： 为数组申请内存空间</span></span><br><span class="line"><span class="comment">                int： 说明数组中的元素类型是int类型</span></span><br><span class="line"><span class="comment">                []: 说明这是一个数组</span></span><br><span class="line"><span class="comment">                3： 数组长度，其实就是数组中的元素个数</span></span><br><span class="line"><span class="comment">        */</span></span><br><span class="line">        System.out.println(arr);   <span class="comment">//输出结果为  [I@46f5f779   代表系统分配的内存地址</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//动态创建数组，数组元素会是系统默认值  整数 的默认值为 0</span></span><br><span class="line">        System.out.println(arr[<span class="number">0</span>]);   <span class="comment">//0</span></span><br><span class="line">        System.out.println(arr[<span class="number">1</span>]); <span class="comment">//0</span></span><br><span class="line">        System.out.println(arr[<span class="number">2</span>]); <span class="comment">//0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2019/12/09/java零基础4/1575891866382.png" alt="1575891866382"></p><p><img src="/2019/12/09/java零基础4/1575891887168.png" alt="1575891887168"></p><p><img src="/2019/12/09/java零基础4/1575892140791.png" alt="1575892140791"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    单个数组</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] arr = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">3</span>];   <span class="comment">//定义一个长度为3的整形数组</span></span><br><span class="line">        System.out.println(arr);   <span class="comment">//[I@46f5f779</span></span><br><span class="line">        System.out.println(arr[<span class="number">0</span>]);   <span class="comment">//0</span></span><br><span class="line">        System.out.println(arr[<span class="number">1</span>]); <span class="comment">//0</span></span><br><span class="line">        System.out.println(arr[<span class="number">2</span>]);<span class="comment">//0</span></span><br><span class="line">        System.out.println(<span class="string">"-----------"</span>);</span><br><span class="line"></span><br><span class="line">        arr[<span class="number">0</span>] = <span class="number">10</span>;</span><br><span class="line">        arr[<span class="number">1</span>] = <span class="number">20</span>;</span><br><span class="line">        System.out.println(arr);    <span class="comment">//[I@46f5f779</span></span><br><span class="line">        System.out.println(arr[<span class="number">0</span>]);<span class="comment">//10</span></span><br><span class="line">        System.out.println(arr[<span class="number">1</span>]);<span class="comment">//20</span></span><br><span class="line">        System.out.println(arr[<span class="number">2</span>]);<span class="comment">//0</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2019/12/09/java零基础4/1575892466242.png" alt="1575892466242"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    多个数组指向相同</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] arr = <span class="keyword">new</span> <span class="keyword">int</span>[<span class="number">3</span>];   <span class="comment">//定义一个长度为3的整形数组</span></span><br><span class="line">        System.out.println(arr);   <span class="comment">//[I@46f5f779</span></span><br><span class="line">        System.out.println(arr[<span class="number">0</span>]);   <span class="comment">//0</span></span><br><span class="line">        System.out.println(arr[<span class="number">1</span>]); <span class="comment">//0</span></span><br><span class="line">        System.out.println(arr[<span class="number">2</span>]);<span class="comment">//0</span></span><br><span class="line">        System.out.println(<span class="string">"-----------"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="keyword">int</span>[] arr2 = arr;</span><br><span class="line">        arr2[<span class="number">0</span>] = <span class="number">20</span>;</span><br><span class="line">        arr2[<span class="number">1</span>] = <span class="number">40</span>;</span><br><span class="line">        System.out.println(arr2 == arr);  <span class="comment">//true</span></span><br><span class="line">        System.out.println(arr2);    <span class="comment">//[I@46f5f779</span></span><br><span class="line">        System.out.println(arr[<span class="number">0</span>]);<span class="comment">//20</span></span><br><span class="line">        System.out.println(arr[<span class="number">1</span>]);<span class="comment">//40</span></span><br><span class="line">        System.out.println(arr[<span class="number">2</span>]);<span class="comment">//0</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2019/12/09/java零基础4/1575892765165.png" alt="1575892765165"></p><p><img src="/2019/12/09/java零基础4/1575893614427.png" alt="1575893614427"></p><p><img src="/2019/12/09/java零基础4/1575893693145.png" alt="1575893693145"></p><p><img src="/2019/12/09/java零基础4/1575893717443.png" alt="1575893717443"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    静态初始化</span></span><br><span class="line"><span class="comment">         初始化时指定每个数组元素的初始值，由系统决定数组长度</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">         格式：数据类型[] 变量名 = new 数据类型[]&#123;数据1,数据2,数据3,...&#125;;</span></span><br><span class="line"><span class="comment">         范例：int[] arr = new int[]&#123;1,2,3,4&#125;;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">         简化格式：数据类型[] 变量名 = &#123;数据1,数据2,数据3,...&#125;;</span></span><br><span class="line"><span class="comment">         范例：int[] arr = &#123;1,2,3,4&#125;;</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//定义数组</span></span><br><span class="line">        <span class="keyword">int</span>[] arr = &#123;<span class="number">1</span>,<span class="number">2</span>,<span class="number">3</span>&#125;;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//输出数组名</span></span><br><span class="line">        System.out.println(arr);  <span class="comment">//[I@46f5f779</span></span><br><span class="line">        <span class="comment">//输出数组中的元素</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; arr.length; i++)&#123;</span><br><span class="line">            System.out.println(arr[i]);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//输出长度之外的数</span></span><br><span class="line"><span class="comment">//        System.out.println(arr[3]);  //报错</span></span><br><span class="line">        arr = <span class="keyword">null</span>;</span><br><span class="line">        System.out.println(arr);   <span class="comment">//null</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2019/12/09/java零基础4/1575894288651.png" alt="1575894288651"></p><p><img src="/2019/12/09/java零基础4/1575894309320.png" alt="1575894309320"></p><p><img src="/2019/12/09/java零基础4/1575894328025.png" alt="1575894328025"></p><p><img src="/2019/12/09/java零基础4/1575894385071.png" alt="1575894385071"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    方法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//调用方法</span></span><br><span class="line">        xiaobu();  <span class="comment">//调用xiaobu方法</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">xiaobu</span><span class="params">()</span></span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"小布666"</span>);  <span class="comment">//被上面的main调用，所以输出  小布666</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2019/12/09/java零基础4/1575894578754.png" alt="1575894578754"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    带参数的方法</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//调用方法</span></span><br><span class="line">        xiaobu(<span class="string">"小布"</span>);  <span class="comment">//调用xiaobu方法</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">xiaobu</span><span class="params">(String name)</span></span>&#123;</span><br><span class="line">        System.out.println(name + <span class="string">"666"</span>);  <span class="comment">//被上面的main调用，所以输出  小布666</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2019/12/09/java零基础4/1575894940065.png" alt="1575894940065"></p><p><img src="/2019/12/09/java零基础4/1575894976012.png" alt="1575894976012"></p><p><img src="/2019/12/09/java零基础4/1575894995817.png" alt="1575894995817"></p><p><img src="/2019/12/09/java零基础4/1575895026480.png" alt="1575895026480"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    带返回值的方法调用</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//调用方法</span></span><br><span class="line">        Boolean result =  isEvenNumber(<span class="number">20</span>);  <span class="comment">//调用isEvenNumber方法，返回结果</span></span><br><span class="line">        System.out.println(result);   <span class="comment">//true</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Boolean <span class="title">isEvenNumber</span><span class="params">(<span class="keyword">int</span> number)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (number % <span class="number">2</span> == <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2019/12/09/java零基础4/1575895325600.png" alt="1575895325600"></p><p><img src="/2019/12/09/java零基础4/1575895343196.png" alt="1575895343196"></p><p><img src="/2019/12/09/java零基础4/1575895370008.png" alt="1575895370008"></p><h5 id="两个明确"><a href="#两个明确" class="headerlink" title="两个明确"></a>两个明确</h5><p><img src="/2019/12/09/java零基础4/1575895484699.png" alt="1575895484699"></p><p><img src="/2019/12/09/java零基础4/1575895752797.png" alt="1575895752797"></p><p><img src="/2019/12/09/java零基础4/1575895776884.png" alt="1575895776884"></p><p><img src="/2019/12/09/java零基础4/1575895838647.png" alt="1575895838647"></p><p><img src="/2019/12/09/java零基础4/1575895953169.png" alt="1575895953169"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    方法重载练习</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Boolean result;</span><br><span class="line">        <span class="comment">//调用方法</span></span><br><span class="line">        result = compare(<span class="number">10</span>, <span class="number">20</span>);  <span class="comment">//调用isEvenNumber方法，返回结果</span></span><br><span class="line">        System.out.println(result);</span><br><span class="line"></span><br><span class="line">        result = compare((<span class="keyword">byte</span>) <span class="number">10</span>, (<span class="keyword">byte</span>) <span class="number">20</span>);  <span class="comment">//调用isEvenNumber方法，返回结果</span></span><br><span class="line">        System.out.println(result);</span><br><span class="line"></span><br><span class="line">        result = compare((<span class="keyword">short</span>) <span class="number">10</span>, (<span class="keyword">short</span>) <span class="number">20</span>);  <span class="comment">//调用isEvenNumber方法，返回结果</span></span><br><span class="line">        System.out.println(result);</span><br><span class="line"></span><br><span class="line">        result = compare(<span class="number">10L</span>, <span class="number">20L</span>);  <span class="comment">//调用isEvenNumber方法，返回结果</span></span><br><span class="line">        System.out.println(result);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//int</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Boolean <span class="title">compare</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> b)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"int"</span>);</span><br><span class="line">        <span class="keyword">return</span> a == b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//byte</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Boolean <span class="title">compare</span><span class="params">(<span class="keyword">byte</span> a, <span class="keyword">byte</span> b)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"byte"</span>);</span><br><span class="line">        <span class="keyword">return</span> a == b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//short</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Boolean <span class="title">compare</span><span class="params">(<span class="keyword">short</span> a, <span class="keyword">short</span> b)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"short"</span>);</span><br><span class="line">        <span class="keyword">return</span> a == b;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//long</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Boolean <span class="title">compare</span><span class="params">(<span class="keyword">long</span> a, <span class="keyword">long</span> b)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"long"</span>);</span><br><span class="line">        <span class="keyword">return</span> a == b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出结果为</span></span><br><span class="line"><span class="comment">int</span></span><br><span class="line"><span class="comment">    false</span></span><br><span class="line"><span class="comment">    byte</span></span><br><span class="line"><span class="comment">    false</span></span><br><span class="line"><span class="comment">    short</span></span><br><span class="line"><span class="comment">    false</span></span><br><span class="line"><span class="comment">    long</span></span><br><span class="line"><span class="comment">    false</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure><p><img src="/2019/12/09/java零基础4/1575896467356.png" alt="1575896467356"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    对于  基本类型  的 参数，形式参数的改变，不会影响实际参数的值</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span> number = <span class="number">100</span>;</span><br><span class="line">        System.out.println(<span class="string">"调用change方法前的值："</span> + number);</span><br><span class="line">        change(number);</span><br><span class="line">        System.out.println(<span class="string">"调用change方法后的值："</span> + number);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">change</span><span class="params">(<span class="keyword">int</span> a)</span> </span>&#123;</span><br><span class="line">        a = <span class="number">10</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出结果为</span></span><br><span class="line"><span class="comment">调用change方法前的值：100</span></span><br><span class="line"><span class="comment">调用change方法后的值：100</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure><p><img src="/2019/12/09/java零基础4/1575896749181.png" alt="1575896749181"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    对于  引用类型  的 参数，形式参数的改变，影响实际参数的值</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">int</span>[] arr = &#123;<span class="number">100</span>,<span class="number">200</span>,<span class="number">300</span>&#125;;</span><br><span class="line">        System.out.println(<span class="string">"调用change方法前的值："</span> + arr[<span class="number">0</span>]);</span><br><span class="line">        change(arr);</span><br><span class="line">        System.out.println(<span class="string">"调用change方法后的值："</span> + arr[<span class="number">0</span>]);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">change</span><span class="params">(<span class="keyword">int</span>[] arr)</span> </span>&#123;</span><br><span class="line">        arr[<span class="number">0</span>] = <span class="number">1</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">输出结果为</span></span><br><span class="line"><span class="comment">调用change方法前的值：100</span></span><br><span class="line"><span class="comment">调用change方法后的值：1</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;/2019/12/09/java零基础4/1575887794699.png&quot; alt=&quot;1575887794699&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2019/12/09/java零基础4/1575887820147.png&quot; alt=&quot;1575
      
    
    </summary>
    
    
      <category term="java" scheme="https://shenxiaobu.github.io/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>java零基础3</title>
    <link href="https://shenxiaobu.github.io/2019/12/09/java%E9%9B%B6%E5%9F%BA%E7%A1%803/"/>
    <id>https://shenxiaobu.github.io/2019/12/09/java零基础3/</id>
    <published>2019-12-09T07:07:44.000Z</published>
    <updated>2020-03-22T13:49:33.069Z</updated>
    
    <content type="html"><![CDATA[<p><img src="/2019/12/09/java零基础3/1575875457598.png" alt="1575875457598"></p><p><img src="/2019/12/09/java零基础3/1575875487269.png" alt="1575875487269"></p><p><img src="/2019/12/09/java零基础3/1575875509431.png" alt="1575875509431"></p><p><img src="/2019/12/09/java零基础3/1575875537505.png" alt="1575875537505"></p><p><img src="/2019/12/09/java零基础3/1575875575525.png" alt="1575875575525"></p><p><img src="/2019/12/09/java零基础3/1575875603630.png" alt="1575875603630"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  输出数据</span></span><br><span class="line"><span class="comment">  需求：</span></span><br><span class="line"><span class="comment">        在控制台输出 1-5 和 5-1</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">5</span>; i++)&#123;</span><br><span class="line">            System.out.println(i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">5</span>; i &gt; <span class="number">0</span>; i--)&#123;</span><br><span class="line">            System.out.println(i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2019/12/09/java零基础3/1575875852946.png" alt="1575875852946"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  输出数据</span></span><br><span class="line"><span class="comment">  需求：</span></span><br><span class="line"><span class="comment">        在控制台输出 5次HelloWorld</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)&#123;</span><br><span class="line">            System.out.println(<span class="string">"HelloWorld"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> j = <span class="number">5</span>;</span><br><span class="line">        <span class="comment">//由于本人从事前端开发，因此经常有如下写法</span></span><br><span class="line">        <span class="comment">//while(j)&#123;&#125;  在java中这样是不行的，会报错，因为 j是int类型，while括号里面的值必须是布尔类型</span></span><br><span class="line">        <span class="comment">//js是弱类型语言，所以可以上面那样写</span></span><br><span class="line">        <span class="keyword">while</span> (j &gt; <span class="number">0</span>)&#123;</span><br><span class="line">            j--;</span><br><span class="line">            System.out.println(<span class="string">"HelloWorld"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">  珠穆朗玛峰</span></span><br><span class="line"><span class="comment">  需求：</span></span><br><span class="line"><span class="comment">        世界最高山峰是珠穆朗玛峰（8844.43米 = 8844430毫米），假如我有一张足够大的纸，</span></span><br><span class="line"><span class="comment">        它的厚度是 0.1毫米，请问，我折叠多少次，可以折成珠穆朗玛峰的高度？</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//定义一个计数器，初始值为 0</span></span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//定义纸张的厚度</span></span><br><span class="line">        <span class="keyword">double</span> paper = <span class="number">0.1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//定义珠穆朗玛峰的高度</span></span><br><span class="line">        <span class="keyword">int</span> zf = <span class="number">8844430</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//因为要反复折叠，所以要使用循环，但是不知道循环多少次。这种情况下更适合用while循环</span></span><br><span class="line">        <span class="comment">//折叠过程中，当纸张厚度大于珠穆朗玛峰高度就停止，因此继续执行的要求是纸张厚度小于珠穆朗玛峰</span></span><br><span class="line"></span><br><span class="line">        <span class="keyword">while</span>(paper &lt;= zf)&#123;</span><br><span class="line">            paper *= <span class="number">2</span>;</span><br><span class="line">            count++;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(count);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2019/12/09/java零基础3/1575877244550.png" alt="1575877244550"></p><p><img src="/2019/12/09/java零基础3/1575877270794.png" alt="1575877270794"></p><p><img src="/2019/12/09/java零基础3/1575877294209.png" alt="1575877294209"></p><p><img src="/2019/12/09/java零基础3/1575877317727.png" alt="1575877317727"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    Random</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    作用：用于产生一个随机数</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    使用步骤：</span></span><br><span class="line"><span class="comment">        1： 导包</span></span><br><span class="line"><span class="comment">            import java.util.Random;</span></span><br><span class="line"><span class="comment">        2: 创建对象</span></span><br><span class="line"><span class="comment">            Random r = new Random();</span></span><br><span class="line"><span class="comment">        3:  获取随机数</span></span><br><span class="line"><span class="comment">            int number = r.nextInt(10);</span></span><br><span class="line"><span class="comment">            获取数据的范围：[0,10) 包括0.不包括 10</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Random r = <span class="keyword">new</span> Random();</span><br><span class="line">        <span class="comment">//需求：用循环生成五个随机数</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)&#123;</span><br><span class="line">            <span class="keyword">int</span> number = r.nextInt(<span class="number">10</span>);</span><br><span class="line">            System.out.println(number);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//需求： 获取一个 1-100之间的随机数</span></span><br><span class="line">        <span class="keyword">int</span> x = r.nextInt(<span class="number">100</span>) + <span class="number">1</span>;</span><br><span class="line">        System.out.println(x);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">   需求：猜数字</span></span><br><span class="line"><span class="comment">   随机生成一个正确数字(0，100]，输入 一个1-100的数字,猜错提示过大还是过小。</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Random;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner sc = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        Random r = <span class="keyword">new</span> Random();</span><br><span class="line">        <span class="comment">//随机生成一个正确答案</span></span><br><span class="line">        <span class="keyword">int</span> answer = r.nextInt(<span class="number">100</span>) + <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//由于只有答对的时候才结束，所以使用一个while(true)的死循环 然后 答对时 break 跳出循环</span></span><br><span class="line">        <span class="keyword">while</span>(<span class="keyword">true</span>)&#123;</span><br><span class="line">            System.out.println(<span class="string">"请输入您要猜的数值："</span>);</span><br><span class="line">            <span class="keyword">int</span> guessNum = sc.nextInt();</span><br><span class="line"></span><br><span class="line">            <span class="comment">//用猜的数值与随机数比较，并给出提示</span></span><br><span class="line">            <span class="keyword">if</span>(guessNum &gt; answer)&#123;</span><br><span class="line">                System.out.println(<span class="string">"您猜的数值过大"</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(guessNum == answer)&#123;</span><br><span class="line">                System.out.println(<span class="string">"恭喜您猜对了"</span>);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                System.out.println(<span class="string">"您猜的数值过小"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2019/12/09/java零基础3/1575878675709.png" alt="1575878675709"></p><p><img src="/2019/12/09/java零基础3/1575879123777.png" alt="1575879123777"></p><p><img src="/2019/12/09/java零基础3/1575879143549.png" alt="1575879143549"></p><p><img src="/2019/12/09/java零基础3/1575879220564.png" alt="1575879220564"></p><p><img src="/2019/12/09/java零基础3/1575879239897.png" alt="1575879239897"></p><p><img src="/2019/12/09/java零基础3/1575879265196.png" alt="1575879265196"></p><h4 id="新增模块，删除模块，导入模块"><a href="#新增模块，删除模块，导入模块" class="headerlink" title="新增模块，删除模块，导入模块"></a>新增模块，删除模块，导入模块</h4><p>删除模块并不会删除本地文件，如需删除 需要到本地文件夹删除文件</p><p>本地文件的模块是可以被导入进来的。</p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;&lt;img src=&quot;/2019/12/09/java零基础3/1575875457598.png&quot; alt=&quot;1575875457598&quot;&gt;&lt;/p&gt;
&lt;p&gt;&lt;img src=&quot;/2019/12/09/java零基础3/1575875487269.png&quot; alt=&quot;1575
      
    
    </summary>
    
    
      <category term="java" scheme="https://shenxiaobu.github.io/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>java零基础2</title>
    <link href="https://shenxiaobu.github.io/2019/12/09/java%E9%9B%B6%E5%9F%BA%E7%A1%802/"/>
    <id>https://shenxiaobu.github.io/2019/12/09/java零基础2/</id>
    <published>2019-12-09T02:03:07.000Z</published>
    <updated>2020-03-22T13:49:33.065Z</updated>
    
    <content type="html"><![CDATA[<h4 id="java零基础-2"><a href="#java零基础-2" class="headerlink" title="java零基础 2"></a>java零基础 2</h4><h5 id="算术运算符"><a href="#算术运算符" class="headerlink" title="算术运算符"></a>算术运算符</h5><h6 id="运算符和表达式"><a href="#运算符和表达式" class="headerlink" title="运算符和表达式"></a>运算符和表达式</h6><p>运算符： 对常量或者变量进行操作的   符号</p><p>表达式：用运算符把常量或者变量连接起来 符合java语法的式子 就可以称为表达式</p><p>​                不用运算符连接的表达式体现的是不同类型的表达式</p><p>举例说明：</p><p>​                    int a = 10;<br>​                    int b = 30;</p><p>​                    int c = a + b;</p><p>​                    +: 是运算符，并且是算术运算符</p><p>​                    a+b：是表达式，由于 + 是算术运算符，所以这个表达式叫算术表达式</p><p><img src="/2019/12/09/java零基础2/1575857873701.png" alt="1575857873701"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    算术运算符</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//定义两个变量</span></span><br><span class="line">        <span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">int</span> b = <span class="number">8</span>;</span><br><span class="line">        <span class="keyword">int</span> c;</span><br><span class="line">        c = a + b;</span><br><span class="line">        System.out.println(<span class="string">"a + b = "</span> + c); <span class="comment">//输出结果: a + b = 18</span></span><br><span class="line"></span><br><span class="line">        c = a - b;</span><br><span class="line">        System.out.println(<span class="string">"a - b = "</span> + c); <span class="comment">//输出结果: a - b = 2</span></span><br><span class="line"></span><br><span class="line">        c = a * b;</span><br><span class="line">        System.out.println(<span class="string">"a * b = "</span> + c);<span class="comment">//输出结果: a * b = 80</span></span><br><span class="line"></span><br><span class="line">        c = a / b;</span><br><span class="line">        System.out.println(<span class="string">"a / b = "</span> + c);<span class="comment">//输出结果: a / b = 1</span></span><br><span class="line">        <span class="comment">// 注意：整数相除只能得到整数，要想得到小数，必须有浮点数参与</span></span><br><span class="line"></span><br><span class="line">        c = a % b;</span><br><span class="line">        System.out.println(<span class="string">"a % b = "</span> + c);<span class="comment">//输出结果: a % b = 2</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//除法得到的是商，取余得到的是余数</span></span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="number">10.0</span> / <span class="number">8</span>); <span class="comment">//输出结果:  1.25   使用c = 10.0 / 8  会报错，因为c定义为 int类型</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure><h4 id="字符-的-“-”-操作"><a href="#字符-的-“-”-操作" class="headerlink" title="字符 的 “+” 操作"></a>字符 的 “+” 操作</h4><p>拿字符在计算机底层对应的数值来进行计算的</p><p>‘A’    ————————》 65     A-Z 是连续的   ‘Z’——————》90</p><p>‘a’   ————————》 97     a-z是连续的    ‘z’——————》122</p><p>‘0’   ————————》 48     0-9是连续的    ‘9’——————》57</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    字符 的'+'操作</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"><span class="comment">//        System.out.println(A);  //没用单引号包起来表示 变量，但是变量A未定义，所以报错，注释掉</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">'A'</span>);   <span class="comment">//使用单引号包起来，表示未字符, 因此输出结果为  字符  A</span></span><br><span class="line">        System.out.println(<span class="string">"A"</span>);    <span class="comment">//双引号表示是字符串，输出结果为 A</span></span><br><span class="line"> System.out.println(<span class="string">"A"</span> + <span class="number">0</span>); <span class="comment">//输出结果为  A0</span></span><br><span class="line">        <span class="comment">//如果使用字符 进行 '+' 操作</span></span><br><span class="line">        System.out.println(<span class="string">'A'</span> + <span class="number">0</span>);   <span class="comment">//输出结果为  字符对应的  ANSI码的值 与 数字 和  所以结果为  65</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//如果使用字符 进行 '+' 操作</span></span><br><span class="line">        System.out.println(<span class="string">'Z'</span> + <span class="number">0</span>);   <span class="comment">//输出结果为  字符对应的  ANSI码的值 与 数字 和  所以结果为  90</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//如果使用字符 进行 '+' 操作</span></span><br><span class="line">        System.out.println(<span class="string">'a'</span> + <span class="number">0</span>);   <span class="comment">//输出结果为  字符对应的  ANSI码的值 与 数字 和  所以结果为  97</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//如果使用字符 进行 '+' 操作</span></span><br><span class="line">        System.out.println(<span class="string">'z'</span> + <span class="number">0</span>);   <span class="comment">//输出结果为  字符对应的  ANSI码的值 与 数字 和  所以结果为  122</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>总结： 算术表达式中包含多个基本数据类型的值的时候，整个算术表达式的类型就会自动进行提升。</p><p>提升规则： </p><p>​            byte类型，short类型和char 类型的将被提升为 int类型</p><p>​            整个表达式的类型自动提升到表达式中最高级操作数同样的类型</p><p>​            等级顺序：byte，short，char   ——》 int  ——》long ——》float——》double</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    字符 的'+'操作</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//定义两个变量</span></span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">char</span> c = <span class="string">'A'</span>;      <span class="comment">// 'A'的值是 65</span></span><br><span class="line">        c = <span class="string">'a'</span>;     <span class="comment">//'a'的值是97</span></span><br><span class="line">        c = <span class="string">'0'</span>;    <span class="comment">//'0'的值是48</span></span><br><span class="line">        System.out.println(i + c);    <span class="comment">//输出结果  58</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//char ch = i + c;   //错误表达式，i + c 的结果 为整形 ch为char类型，因此不行</span></span><br><span class="line">        <span class="comment">//char类型会自动提升为int类型</span></span><br><span class="line">        <span class="keyword">int</span> j = i + c;</span><br><span class="line">        System.out.println(j);   <span class="comment">//输出结果  58</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//int k = 10 + 13.14;  //错误表达式， 10 + 13.14的结果为浮点型，k为int类型 因此不行</span></span><br><span class="line">        <span class="keyword">double</span> k = <span class="number">10</span> + <span class="number">13.14</span>;</span><br><span class="line">        System.out.println(k);  <span class="comment">//输出结果  23.14</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="字符串的-操作"><a href="#字符串的-操作" class="headerlink" title="字符串的+操作"></a>字符串的+操作</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    字符串 的'+'操作</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"shen"</span> + <span class="string">"xiaobu"</span>);  <span class="comment">//shenxiaobu</span></span><br><span class="line">        System.out.println(<span class="string">"xiaobu"</span> + <span class="number">666</span>);   <span class="comment">//xiaobu666</span></span><br><span class="line">        System.out.println(<span class="number">666</span> + <span class="string">"xiaobu"</span>); <span class="comment">//666xiaobu</span></span><br><span class="line">        System.out.println(<span class="string">"xiaobu"</span> + <span class="number">6</span> + <span class="number">66</span>);  <span class="comment">//xiaobu666</span></span><br><span class="line">        System.out.println(<span class="number">6</span> + <span class="number">66</span> + <span class="string">"xiaobu"</span>);  <span class="comment">// 72xiaobu</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2019/12/09/java零基础2/1575869502691.png" alt="1575869502691"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    赋值运算符</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">       <span class="comment">//把10赋值给int类型的变量i</span></span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">10</span>;</span><br><span class="line">        System.out.println(<span class="string">"i:"</span> + i);  <span class="comment">//输出结果为 i:10</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// += 把左边和右边的数据做加法操作，结果赋值给左边</span></span><br><span class="line">        i += <span class="number">20</span>;</span><br><span class="line">        <span class="comment">// 上面的赋值方法 相当于 i = i + 20;  有时候两者是一样的，但是并不完全一样</span></span><br><span class="line">        System.out.println(<span class="string">"i:"</span> + i);  <span class="comment">//输出结果为 i:30</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//注意：扩展的赋值运算符底层隐含了强制的类型转换</span></span><br><span class="line">        <span class="keyword">short</span> s = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">       <span class="comment">// s = s + 20;    //编译报错：不兼容的类型: 从int转换到short可能会有损失，因为s为 short类型, s + 20为int类型</span></span><br><span class="line"></span><br><span class="line">        s += <span class="number">20</span>;</span><br><span class="line">        <span class="comment">//上面的赋值方法 相当于  s = (short)(s + 20);    隐含了强制的类型转换</span></span><br><span class="line">        System.out.println(<span class="string">"s:"</span> + s);  <span class="comment">//输出结果为 s:30</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//总结： 如果有累加操作时 建议采用  +=  的运算符</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="自增或自减运算符"><a href="#自增或自减运算符" class="headerlink" title="自增或自减运算符"></a>自增或自减运算符</h5><p><img src="/2019/12/09/java零基础2/1575870319491.png" alt="1575870319491"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    自增或自减运算符</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//定义变量</span></span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">10</span>;</span><br><span class="line">        System.out.println(<span class="string">"i:"</span> + i); <span class="comment">//输出结果为 i:10</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//单独使用</span></span><br><span class="line">        i++;   <span class="comment">//此时  i的结果 为 11</span></span><br><span class="line">        ++i;    <span class="comment">//此时 i的结果 为 12</span></span><br><span class="line">        System.out.println(<span class="string">"i:"</span> + i); <span class="comment">//输出结果为 i:12</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//参与操作使用</span></span><br><span class="line">        <span class="keyword">int</span> j = i++;   <span class="comment">//先执行  j = i;  再执行  i++;   所以 j的值为 12，i的值为 13</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"i:"</span> + i); <span class="comment">//输出结果为 i:13</span></span><br><span class="line">        System.out.println(<span class="string">"j:"</span> + j);   <span class="comment">//输出结果为 j:12</span></span><br><span class="line"></span><br><span class="line">        j = ++i;      <span class="comment">//先执行 ++i;  再执行 j = i; 所以此时 i的值为 14，j的值也为 14</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"i:"</span> + i); <span class="comment">//输出结果为 i:14</span></span><br><span class="line">        System.out.println(<span class="string">"j:"</span> + j);   <span class="comment">//输出结果为 j:14</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2019/12/09/java零基础2/1575870837584.png" alt="1575870837584"></p><p><img src="/2019/12/09/java零基础2/1575870862560.png" alt="1575870862560"></p><p><img src="/2019/12/09/java零基础2/1575870886394.png" alt="1575870886394"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    短路运算符</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//定义变量</span></span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">int</span> j = <span class="number">20</span>;</span><br><span class="line">        System.out.println((i++ &gt; <span class="number">100</span>) &amp; (j++ &gt; <span class="number">100</span>));  <span class="comment">//输出结果为false</span></span><br><span class="line">        System.out.println(<span class="string">"i:"</span> + i);  <span class="comment">//输出结果为 i:11</span></span><br><span class="line">        System.out.println(<span class="string">"j:"</span> + j);    <span class="comment">//输出结果为 j:21</span></span><br><span class="line">        <span class="comment">// 因为 运算符 &amp;  左边为false 右边也得执行 即 j++ 执行</span></span><br><span class="line"></span><br><span class="line">        System.out.println((i++ &gt; <span class="number">100</span>) &amp;&amp; (j++ &gt; <span class="number">100</span>)); <span class="comment">//输出结果为false</span></span><br><span class="line">        System.out.println(<span class="string">"i:"</span> + i);   <span class="comment">//输出结果为 i:12</span></span><br><span class="line">        System.out.println(<span class="string">"j:"</span> + j);    <span class="comment">//输出结果为 j:21</span></span><br><span class="line">        <span class="comment">// 因为 短路运算符 &amp;&amp;  左边为false 右边不执行 即 j++ 未执行</span></span><br><span class="line"></span><br><span class="line">        System.out.println((i++ &gt; <span class="number">10</span>) | (j++ &gt; <span class="number">100</span>));  <span class="comment">//输出结果为true</span></span><br><span class="line">        System.out.println(<span class="string">"i:"</span> + i);   <span class="comment">//输出结果为 i:13</span></span><br><span class="line">        System.out.println(<span class="string">"j:"</span> + j);    <span class="comment">//输出结果为 j:22</span></span><br><span class="line">        <span class="comment">// 因为 运算符 |  左边为true 右边也得执行 即 j++ 执行</span></span><br><span class="line"></span><br><span class="line">        System.out.println((i++ &gt; <span class="number">10</span>) || (j++ &gt; <span class="number">100</span>));  <span class="comment">//输出结果为true</span></span><br><span class="line">        System.out.println(<span class="string">"i:"</span> + i);   <span class="comment">//输出结果为 i:14</span></span><br><span class="line">        System.out.println(<span class="string">"j:"</span> + j);    <span class="comment">//输出结果为 j:22</span></span><br><span class="line">        <span class="comment">// 因为 短路运算符 ||  左边为true 右边不执行 即 j++ 未执行</span></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><img src="/2019/12/09/java零基础2/1575871481003.png" alt="1575871481003"></p><p><img src="/2019/12/09/java零基础2/1575871569203.png" alt="1575871569203"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    数据输入</span></span><br><span class="line"><span class="comment">    1.导包  import Java.util.Scanner;   导包的动作必须出现在类定义的上边（在idea编辑器中，会自动导包）</span></span><br><span class="line"><span class="comment">    2.创建对象 Scanner sc = new Scanner(System.in);   只有sc是变量名可以变，其他都不可以改变</span></span><br><span class="line"><span class="comment">    3.接收数据  int i = sc.nextInt();  只有i是变量名可以变，sc跟随上面变，其他的不可以改变</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner sc = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">int</span> i = sc.nextInt();</span><br><span class="line">        System.out.println(i);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//在控制台上输入 一个 int类型数值  回车   会输出 i的值  输入非int类型的值 会报错</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">    数据输入</span></span><br><span class="line"><span class="comment">    1.导包  import Java.util.Scanner;   导包的动作必须出现在类定义的上边（在idea编辑器中，会自动导包）</span></span><br><span class="line"><span class="comment">    2.创建对象 Scanner sc = new Scanner(System.in);   只有sc是变量名可以变，其他都不可以改变</span></span><br><span class="line"><span class="comment">    3.接收数据  int i = sc.nextInt();  只有i是变量名可以变，sc跟随上面变，其他的不可以改变</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    下面制作一个三个和尚的最高身高</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner sc = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        <span class="keyword">int</span> height1,height2,height3;</span><br><span class="line">        System.out.println(<span class="string">"请输入第一个和尚的身高"</span>);</span><br><span class="line"></span><br><span class="line">        height1 = sc.nextInt();</span><br><span class="line">        System.out.println(<span class="string">"请输入第二个和尚的身高"</span>);</span><br><span class="line">        height2 = sc.nextInt();</span><br><span class="line">        System.out.println(<span class="string">"请输入第三个和尚的身高"</span>);</span><br><span class="line">        height3 = sc.nextInt();</span><br><span class="line"></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//用三元运算符获取前两个和尚较高身高值，并用临时身高变量存储起来</span></span><br><span class="line">        <span class="keyword">int</span> tempHeight = height1 &gt; height2 ? height1 : height2;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//用三元运算符获取临时身高值与第三个和尚身高的比较，并用最大身高变量保存</span></span><br><span class="line">        <span class="keyword">int</span> maxHeight = tempHeight &gt; height3 ? tempHeight : height3;</span><br><span class="line">        </span><br><span class="line">        System.out.println(<span class="string">"第一个和尚的身高为"</span> + height1);</span><br><span class="line">        System.out.println(<span class="string">"第二个和尚的身高为"</span> + height2);</span><br><span class="line">        System.out.println(<span class="string">"第三个和尚的身高为"</span> + height3);</span><br><span class="line">        System.out.println(<span class="string">"最高的身高为"</span> + max);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         *</span></span><br><span class="line"><span class="comment">        运行结果如下</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">            请输入第一个和尚的身高</span></span><br><span class="line"><span class="comment">            172</span></span><br><span class="line"><span class="comment">            请输入第二个和尚的身高</span></span><br><span class="line"><span class="comment">            112</span></span><br><span class="line"><span class="comment">            请输入第三个和尚的身高</span></span><br><span class="line"><span class="comment">            185</span></span><br><span class="line"><span class="comment">            第一个和尚的身高为172</span></span><br><span class="line"><span class="comment">            第二个和尚的身高为112</span></span><br><span class="line"><span class="comment">            第三个和尚的身高为185</span></span><br><span class="line"><span class="comment">            最高的身高为185</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h4 id=&quot;java零基础-2&quot;&gt;&lt;a href=&quot;#java零基础-2&quot; class=&quot;headerlink&quot; title=&quot;java零基础 2&quot;&gt;&lt;/a&gt;java零基础 2&lt;/h4&gt;&lt;h5 id=&quot;算术运算符&quot;&gt;&lt;a href=&quot;#算术运算符&quot; class=&quot;header
      
    
    </summary>
    
    
      <category term="java" scheme="https://shenxiaobu.github.io/tags/java/"/>
    
  </entry>
  
  <entry>
    <title>java零基础</title>
    <link href="https://shenxiaobu.github.io/2019/12/08/java%E9%9B%B6%E5%9F%BA%E7%A1%80/"/>
    <id>https://shenxiaobu.github.io/2019/12/08/java零基础/</id>
    <published>2019-12-08T06:25:51.000Z</published>
    <updated>2020-03-22T13:49:33.056Z</updated>
    
    <content type="html"><![CDATA[<h3 id="java零基础"><a href="#java零基础" class="headerlink" title="java零基础"></a>java零基础</h3><h4 id="java语言发展史"><a href="#java语言发展史" class="headerlink" title="java语言发展史"></a>java语言发展史</h4><p><img src="/2019/12/08/java零基础/1575786454571.png" alt="1575786454571"></p><p>1996年到2002年 版本变动不大，版本号就是后面 +1</p><p>2004年由于版本变动较大，所以直接将版本改为 java5.0</p><p>2009年sun公司被Oracle公司收购</p><p><img src="/2019/12/08/java零基础/1575786932615.png" alt="1575786932615"></p><p>java程序通过jvm编译，从而使各平台都支持java语言</p><p><img src="/2019/12/08/java零基础/1575787013785.png" alt="1575787013785"></p><p>JRE是java程序运训时环境，包含JVM和运行时所需的核心类库</p><p><img src="/2019/12/08/java零基础/1575787129534.png" alt="1575787129534"></p><p><img src="/2019/12/08/java零基础/1575787164497.png" alt="1575787164497"></p><p><img src="/2019/12/08/java零基础/1575787200550.png" alt="1575787200550"></p><p><img src="/2019/12/08/java零基础/1575787225989.png" alt="1575787225989"></p><p><img src="/2019/12/08/java零基础/1575787251015.png" alt="1575787251015"></p><p><img src="/2019/12/08/java零基础/1575787274428.png" alt="1575787274428"></p><p><img src="/2019/12/08/java零基础/1575787298291.png" alt="1575787298291"></p><p><img src="/2019/12/08/java零基础/1575787322218.png" alt="1575787322218"></p><p><img src="/2019/12/08/java零基础/1575787340784.png" alt="1575787340784"></p><p><img src="/2019/12/08/java零基础/1575787360422.png" alt="1575787360422"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"HelloWorld"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h5 id="HelloWorld案例的编译和运行"><a href="#HelloWorld案例的编译和运行" class="headerlink" title="HelloWorld案例的编译和运行"></a>HelloWorld案例的编译和运行</h5><p>打开命令提示符窗口，进入到HelloWorld.java所在的目录，输入指定命令编译和执行。</p><p>编译：javac 文件名.java   （执行这个命令会生成一个  文件名.class   文件）</p><p>范例：javac HelloWorld.java</p><p>执行：java类名               （只有类名，千万不要有后缀，否则报错）</p><p>范例： java HelloWorld      </p><p><img src="/2019/12/08/java零基础/1575787706736.png" alt="1575787706736"></p><h4 id="java代码注释"><a href="#java代码注释" class="headerlink" title="java代码注释"></a>java代码注释</h4><blockquote><p>注释分类</p><blockquote><p>单行注释</p><p>​        格式： // 注释信息</p><p>多行注释</p><p>​        格式  /<em>  注释信息  </em>/</p><p>文档注释</p><pre><code>格式   /**  注释信息 */</code></pre></blockquote></blockquote><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">java程序中最基本的组成单位是类，</span></span><br><span class="line"><span class="comment">类的定义格式：</span></span><br><span class="line"><span class="comment">public class 类名 &#123;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">&#125;</span></span><br><span class="line"><span class="comment">下面是我定义的HelloWorld类</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    这是main方法</span></span><br><span class="line"><span class="comment">    main方法是程序的入口方法，代码的执行都是从main开始的</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//这是输出语句，“”里面的内容为输出内容，是可以改变的</span></span><br><span class="line">        System.out.printLn(<span class="string">"shenxiaobu"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h4 id="关键字"><a href="#关键字" class="headerlink" title="关键字"></a>关键字</h4><h5 id="关键字的特点"><a href="#关键字的特点" class="headerlink" title="关键字的特点"></a>关键字的特点</h5><p>关键字的字母全是小写字母</p><p>常用的编辑器，针对关键字有特殊的颜色标记，非常直观</p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">System.out.println(<span class="string">"HelloWorld"</span>);</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>上面例子中  public class static 就是关键字</p><h4 id="常量概述"><a href="#常量概述" class="headerlink" title="常量概述"></a>常量概述</h4><p>常量：在程序运行过程中，其值不可以发生改变的量。</p><p><img src="/2019/12/08/java零基础/1575788453085.png" alt="1575788453085"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">常量分类</span></span><br><span class="line"><span class="comment">    字符串常量：用双引号括起来的内容，”shenxiaobu“，”爆米花“</span></span><br><span class="line"><span class="comment">整数常量：  不带小数的数字， 1，2，3，5，-5，0</span></span><br><span class="line"><span class="comment">小数常量：  带小数的数字  13.12  -5.254</span></span><br><span class="line"><span class="comment">字符常量： 用单引号括起来的内容  ‘A' ’0’  ‘打’</span></span><br><span class="line"><span class="comment">布尔常量： 布尔值，表示真假   true   false</span></span><br><span class="line"><span class="comment">空常量： 一个特殊的值  空值  null</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">static</span> ConstantDemo &#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">       <span class="comment">//字符串常量</span></span><br><span class="line">        System.out.println(<span class="string">"字符串常量"</span>);</span><br><span class="line">        System.out.println(<span class="string">"shenxiaobu"</span>);</span><br><span class="line">        System.out.println(<span class="string">"爆米花"</span>);</span><br><span class="line">        System.out.println(<span class="string">"---------"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//整数常量</span></span><br><span class="line">        System.out.println(<span class="string">"整数常量"</span>);</span><br><span class="line">        System.out.println(<span class="number">666</span>);</span><br><span class="line">        System.out.println(-<span class="number">44545</span>);</span><br><span class="line">        System.out.println(<span class="string">"---------"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//小数常量</span></span><br><span class="line">        System.out.println(<span class="string">"小数常量"</span>);</span><br><span class="line">        System.out.println(<span class="number">1.2</span>);</span><br><span class="line">        System.out.println(-<span class="number">5.04</span>);</span><br><span class="line">        System.out.println(<span class="string">"---------"</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//字符常量</span></span><br><span class="line">        System.out.println(<span class="string">"字符常量"</span>);</span><br><span class="line">        System.out.println(<span class="string">'a'</span>);</span><br><span class="line">        System.out.println(<span class="string">'发'</span>);</span><br><span class="line">        System.out.println(<span class="string">"---------"</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">//布尔常量</span></span><br><span class="line">        System.out.println(<span class="string">"布尔常量"</span>);</span><br><span class="line">        System.out.println(<span class="keyword">true</span>);</span><br><span class="line">        System.out.println(<span class="keyword">false</span>);</span><br><span class="line">        System.out.println(<span class="string">"---------"</span>);</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//空常量  空常量是不让输出的，所以 注释掉</span></span><br><span class="line"><span class="comment">//        System.out.println(null);</span></span><br><span class="line"><span class="comment">//        System.out.println('');</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>运行结果</p><p><img src="/2019/12/08/java零基础/1575789298315.png" alt="1575789298315"></p><h4 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h4><p><img src="/2019/12/08/java零基础/1575789346816.png" alt="1575789346816"></p><p><img src="/2019/12/08/java零基础/1575789376173.png" alt="1575789376173"></p><p>取值范围解释</p><p>byte 内存占用一个字节，一个字节有8位二进制数，即  最小值为 00000000  最大值为 11111111</p><p>第一位数值  0代表  负数   1代表  正数， 其余七位表示数值大小   即最小值为  -1111111 最大值为  +1111111</p><p>即  最小值 为   -（2的7次方 -1）  最大值为  2的7次方 -1  所以byte能表示的值的范围为  -128 - +127       </p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment"> * 变量定义格式</span></span><br><span class="line"><span class="comment"> *      数据类型 变量名 = 变量值;</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 基本数据类型</span></span><br><span class="line"><span class="comment"> *      byte，short，int，long，float，double，char，boolean</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> * 变量的使用</span></span><br><span class="line"><span class="comment"> *      取值格式： 变量名</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> *      修改值格式： 变量名 =  变量值</span></span><br><span class="line"><span class="comment"> *</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//定义变量</span></span><br><span class="line">        <span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//输出变量</span></span><br><span class="line">        System.out.println(a);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//修改变量</span></span><br><span class="line">        a = <span class="number">520</span>;</span><br><span class="line">        System.out.println(a);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>输出结果</p><p>10</p><p>520</p><h5 id="变量使用的注意事项"><a href="#变量使用的注意事项" class="headerlink" title="变量使用的注意事项"></a>变量使用的注意事项</h5><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//直接定义 long类型数值为如下数值的时候，运行会报错，提示数值过大，因此注释，不采用如下方式</span></span><br><span class="line"><span class="comment">//long i = 100000000000000;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//需要这么定义 long类型数值  数值后面加一个 L</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">long</span> i = <span class="number">100000000000000L</span>;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//直接定义 float 类型为如下数值时 会报错， 提示  Error:(29, 19) java: 不兼容的类型: 从double转换</span></span><br><span class="line"><span class="comment">//到float可能会有损失   因此注释，不采用如下方式定义 float类型数值</span></span><br><span class="line"><span class="comment">//float i = 1000000.00;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//需要这么定义</span></span><br><span class="line"><span class="keyword">float</span> i = <span class="number">1000000.00F</span></span><br></pre></td></tr></table></figure><h4 id="标识符"><a href="#标识符" class="headerlink" title="标识符"></a>标识符</h4><p>标识符定义规则</p><p>由数字、字母、下划线(_)和美元符($)组成</p><p>不能以数字开头</p><p>不能是关键字</p><p>区分大小写</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">//判断下面那些变量名  不符合规则</span><br><span class="line">bj ： true   b2 ： true   2b   : false,以数字开头</span><br><span class="line">class  ： false  是关键字    _2b  : true          #shenxiaobu   : false   #不是标识符的组成部分</span><br><span class="line">ak47  : true     Class : true  区分大小写，不是关键字，所以可以是标识符   helloworld  ： true</span><br></pre></td></tr></table></figure><h6 id="常见命名约定"><a href="#常见命名约定" class="headerlink" title="常见命名约定"></a>常见命名约定</h6><blockquote><p>小驼峰命名法：建议用在     方法  或  变量</p><blockquote><p>约定1：标识符是一个单词的时候，首字母小写</p><p>范例1：name</p><p>约定2：标识符由多个单词组成的时候，第一个单词首字母小写，其他单词首字母大写</p><p>范例2：firstName </p></blockquote></blockquote><blockquote><p>大驼峰命名法：建议用在 类  上</p><blockquote><p>约定1：标识符是一个单词的时候，首字母大写</p><p>范例1：Student</p><p>约定2：标识符由多个单词组成的时候，每个单词的首字母大写</p><p>范例2：GoodStudent</p></blockquote></blockquote><h4 id="自动类型转换"><a href="#自动类型转换" class="headerlink" title="自动类型转换"></a>自动类型转换</h4><p><img src="/2019/12/08/java零基础/1575791458206.png" alt="1575791458206"></p><p><img src="/2019/12/08/java零基础/1575791487443.png" alt="1575791487443"></p><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloWorld</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="comment">//自动类型转换</span></span><br><span class="line">        <span class="keyword">int</span> a = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">double</span> b = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">float</span> c = <span class="number">10</span>;</span><br><span class="line">        System.out.println(<span class="string">"int:"</span> + a);</span><br><span class="line">        System.out.println(<span class="string">"double:"</span> + b);</span><br><span class="line">        System.out.println(<span class="string">"float:"</span> + c);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//强制类型转换</span></span><br><span class="line">        <span class="keyword">int</span> A = (<span class="keyword">int</span>)<span class="number">10.000</span>;</span><br><span class="line">        System.out.println(<span class="string">"(int)A:"</span> + A);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//输出结果为</span></span><br><span class="line"><span class="comment">//int:10</span></span><br><span class="line"><span class="comment">//double:10.0</span></span><br><span class="line"><span class="comment">//float:10.0</span></span><br><span class="line"><span class="comment">//(int)A:10</span></span><br></pre></td></tr></table></figure>]]></content>
    
    <summary type="html">
    
      
      
        &lt;h3 id=&quot;java零基础&quot;&gt;&lt;a href=&quot;#java零基础&quot; class=&quot;headerlink&quot; title=&quot;java零基础&quot;&gt;&lt;/a&gt;java零基础&lt;/h3&gt;&lt;h4 id=&quot;java语言发展史&quot;&gt;&lt;a href=&quot;#java语言发展史&quot; class=&quot;header
      
    
    </summary>
    
    
      <category term="java" scheme="https://shenxiaobu.github.io/tags/java/"/>
    
  </entry>
  
</feed>
